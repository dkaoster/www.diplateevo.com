function Zt(){}const Bu=e=>e;function Fp(e,r){for(const t in r)e[t]=r[t];return e}function Pu(e){return e()}function Uu(){return Object.create(null)}function Yn(e){e.forEach(Pu)}function $u(e){return typeof e=="function"}function Np(e,r){return e!=e?r==r:e!==r||e&&typeof e=="object"||typeof e=="function"}let Ma;function W_(e,r){return Ma||(Ma=document.createElement("a")),Ma.href=r,e===Ma.href}function Ip(e){return Object.keys(e).length===0}function Mp(e,...r){if(e==null)return Zt;const t=e.subscribe(...r);return t.unsubscribe?()=>t.unsubscribe():t}function X_(e,r,t){e.$$.on_destroy.push(Mp(r,t))}function q_(e,r,t,n){if(e){const i=Hu(e,r,t,n);return e[0](i)}}function Hu(e,r,t,n){return e[1]&&n?Fp(t.ctx.slice(),e[1](n(r))):t.ctx}function K_(e,r,t,n){if(e[2]&&n){const i=e[2](n(t));if(r.dirty===void 0)return i;if(typeof i=="object"){const o=[],f=Math.max(r.dirty.length,i.length);for(let u=0;u<f;u+=1)o[u]=r.dirty[u]|i[u];return o}return r.dirty|i}return r.dirty}function Q_(e,r,t,n,i,o){if(i){const f=Hu(r,t,n,o);e.p(f,i)}}function Z_(e){if(e.ctx.length>32){const r=[],t=e.ctx.length/32;for(let n=0;n<t;n++)r[n]=-1;return r}return-1}const zu=typeof window!="undefined";let Gp=zu?()=>window.performance.now():()=>Date.now(),lf=zu?e=>requestAnimationFrame(e):Zt;const Vn=new Set;function ju(e){Vn.forEach(r=>{r.c(e)||(Vn.delete(r),r.f())}),Vn.size!==0&&lf(ju)}function Bp(e){let r;return Vn.size===0&&lf(ju),{promise:new Promise(t=>{Vn.add(r={c:e,f:t})}),abort(){Vn.delete(r)}}}let Ga=!1;function Pp(){Ga=!0}function Up(){Ga=!1}function $p(e,r,t,n){for(;e<r;){const i=e+(r-e>>1);t(i)<=n?e=i+1:r=i}return e}function Hp(e){if(e.hydrate_init)return;e.hydrate_init=!0;let r=e.childNodes;if(e.nodeName==="HEAD"){const v=[];for(let A=0;A<r.length;A++){const M=r[A];M.claim_order!==void 0&&v.push(M)}r=v}const t=new Int32Array(r.length+1),n=new Int32Array(r.length);t[0]=-1;let i=0;for(let v=0;v<r.length;v++){const A=r[v].claim_order,M=(i>0&&r[t[i]].claim_order<=A?i+1:$p(1,i,W=>r[t[W]].claim_order,A))-1;n[v]=t[M]+1;const G=M+1;t[G]=v,i=Math.max(G,i)}const o=[],f=[];let u=r.length-1;for(let v=t[i]+1;v!=0;v=n[v-1]){for(o.push(r[v-1]);u>=v;u--)f.push(r[u]);u--}for(;u>=0;u--)f.push(r[u]);o.reverse(),f.sort((v,A)=>v.claim_order-A.claim_order);for(let v=0,A=0;v<f.length;v++){for(;A<o.length&&f[v].claim_order>=o[A].claim_order;)A++;const M=A<o.length?o[A]:null;e.insertBefore(f[v],M)}}function Yu(e,r){e.appendChild(r)}function Vu(e){if(!e)return document;const r=e.getRootNode?e.getRootNode():e.ownerDocument;return r&&r.host?r:e.ownerDocument}function zp(e){const r=Ba("style");return jp(Vu(e),r),r.sheet}function jp(e,r){Yu(e.head||e,r)}function Yp(e,r){if(Ga){for(Hp(e),(e.actual_end_child===void 0||e.actual_end_child!==null&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild);e.actual_end_child!==null&&e.actual_end_child.claim_order===void 0;)e.actual_end_child=e.actual_end_child.nextSibling;r!==e.actual_end_child?(r.claim_order!==void 0||r.parentNode!==e)&&e.insertBefore(r,e.actual_end_child):e.actual_end_child=r.nextSibling}else(r.parentNode!==e||r.nextSibling!==null)&&e.appendChild(r)}function Vp(e,r,t){e.insertBefore(r,t||null)}function Wp(e,r,t){Ga&&!t?Yp(e,r):(r.parentNode!==e||r.nextSibling!=t)&&e.insertBefore(r,t||null)}function xi(e){e.parentNode.removeChild(e)}function J_(e,r){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(r)}function Ba(e){return document.createElement(e)}function Xp(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function uf(e){return document.createTextNode(e)}function ey(){return uf(" ")}function ry(){return uf("")}function Wu(e,r,t,n){return e.addEventListener(r,t,n),()=>e.removeEventListener(r,t,n)}function ty(e){return function(r){return r.stopPropagation(),e.call(this,r)}}function qp(e,r,t){t==null?e.removeAttribute(r):e.getAttribute(r)!==t&&e.setAttribute(r,t)}function ny(e,r){const t=Object.getOwnPropertyDescriptors(e.__proto__);for(const n in r)r[n]==null?e.removeAttribute(n):n==="style"?e.style.cssText=r[n]:n==="__value"?e.value=e[n]=r[n]:t[n]&&t[n].set?e[n]=r[n]:qp(e,n,r[n])}function Kp(e){return Array.from(e.childNodes)}function Xu(e){e.claim_info===void 0&&(e.claim_info={last_index:0,total_claimed:0})}function qu(e,r,t,n,i=!1){Xu(e);const o=(()=>{for(let f=e.claim_info.last_index;f<e.length;f++){const u=e[f];if(r(u)){const v=t(u);return v===void 0?e.splice(f,1):e[f]=v,i||(e.claim_info.last_index=f),u}}for(let f=e.claim_info.last_index-1;f>=0;f--){const u=e[f];if(r(u)){const v=t(u);return v===void 0?e.splice(f,1):e[f]=v,i?v===void 0&&e.claim_info.last_index--:e.claim_info.last_index=f,u}}return n()})();return o.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1,o}function Ku(e,r,t,n){return qu(e,i=>i.nodeName===r,i=>{const o=[];for(let f=0;f<i.attributes.length;f++){const u=i.attributes[f];t[u.name]||o.push(u.name)}o.forEach(f=>i.removeAttribute(f))},()=>n(r))}function iy(e,r,t){return Ku(e,r,t,Ba)}function ay(e,r,t){return Ku(e,r,t,Xp)}function Qp(e,r){return qu(e,t=>t.nodeType===3,t=>{const n=""+r;if(t.data.startsWith(n)){if(t.data.length!==n.length)return t.splitText(n.length)}else t.data=n},()=>uf(r),!0)}function oy(e){return Qp(e," ")}function Qu(e,r,t){for(let n=t;n<e.length;n+=1){const i=e[n];if(i.nodeType===8&&i.textContent.trim()===r)return n}return e.length}function fy(e){const r=Qu(e,"HTML_TAG_START",0),t=Qu(e,"HTML_TAG_END",r);if(r===t)return new Zu;Xu(e);const n=e.splice(r,t-r+1);xi(n[0]),xi(n[n.length-1]);const i=n.slice(1,n.length-1);for(const o of i)o.claim_order=e.claim_info.total_claimed,e.claim_info.total_claimed+=1;return new Zu(i)}function ly(e,r){r=""+r,e.wholeText!==r&&(e.data=r)}function uy(e,r){e.value=r==null?"":r}function sy(e,r,t,n){t===null?e.style.removeProperty(r):e.style.setProperty(r,t,n?"important":"")}let Pa;function Zp(){if(Pa===void 0){Pa=!1;try{typeof window!="undefined"&&window.parent&&window.parent.document}catch{Pa=!0}}return Pa}function cy(e,r){getComputedStyle(e).position==="static"&&(e.style.position="relative");const n=Ba("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const i=Zp();let o;return i?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",o=Wu(window,"message",f=>{f.source===n.contentWindow&&r()})):(n.src="about:blank",n.onload=()=>{o=Wu(n.contentWindow,"resize",r)}),Yu(e,n),()=>{(i||o&&n.contentWindow)&&o(),xi(n)}}function dy(e,r,t){e.classList[t?"add":"remove"](r)}function Jp(e,r,t=!1){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t,!1,r),n}function hy(e,r=document.body){return Array.from(r.querySelectorAll(e))}class em{constructor(){this.e=this.n=null}c(r){this.h(r)}m(r,t,n=null){this.e||(this.e=Ba(t.nodeName),this.t=t,this.c(r)),this.i(n)}h(r){this.e.innerHTML=r,this.n=Array.from(this.e.childNodes)}i(r){for(let t=0;t<this.n.length;t+=1)Vp(this.t,this.n[t],r)}p(r){this.d(),this.h(r),this.i(this.a)}d(){this.n.forEach(xi)}}class Zu extends em{constructor(r){super();this.e=this.n=null,this.l=r}c(r){this.l?this.n=this.l:super.c(r)}i(r){for(let t=0;t<this.n.length;t+=1)Wp(this.t,this.n[t],r)}}const Ua=new Map;let $a=0;function rm(e){let r=5381,t=e.length;for(;t--;)r=(r<<5)-r^e.charCodeAt(t);return r>>>0}function tm(e,r){const t={stylesheet:zp(r),rules:{}};return Ua.set(e,t),t}function Ju(e,r,t,n,i,o,f,u=0){const v=16.666/n;let A=`{
`;for(let de=0;de<=1;de+=v){const Se=r+(t-r)*o(de);A+=de*100+`%{${f(Se,1-Se)}}
`}const M=A+`100% {${f(t,1-t)}}
}`,G=`__svelte_${rm(M)}_${u}`,W=Vu(e),{stylesheet:B,rules:ge}=Ua.get(W)||tm(W,e);ge[G]||(ge[G]=!0,B.insertRule(`@keyframes ${G} ${M}`,B.cssRules.length));const Ee=e.style.animation||"";return e.style.animation=`${Ee?`${Ee}, `:""}${G} ${n}ms linear ${i}ms 1 both`,$a+=1,G}function nm(e,r){const t=(e.style.animation||"").split(", "),n=t.filter(r?o=>o.indexOf(r)<0:o=>o.indexOf("__svelte")===-1),i=t.length-n.length;i&&(e.style.animation=n.join(", "),$a-=i,$a||im())}function im(){lf(()=>{$a||(Ua.forEach(e=>{const{stylesheet:r}=e;let t=r.cssRules.length;for(;t--;)r.deleteRule(t);e.rules={}}),Ua.clear())})}let Ai;function Ei(e){Ai=e}function Ti(){if(!Ai)throw new Error("Function called outside component initialization");return Ai}function py(e){Ti().$$.on_mount.push(e)}function my(e){Ti().$$.after_update.push(e)}function vy(e){Ti().$$.on_destroy.push(e)}function gy(e,r){Ti().$$.context.set(e,r)}function _y(e){return Ti().$$.context.get(e)}const wi=[],es=[],Ha=[],rs=[],ts=Promise.resolve();let sf=!1;function ns(){sf||(sf=!0,ts.then(is))}function yy(){return ns(),ts}function za(e){Ha.push(e)}const cf=new Set;let ja=0;function is(){const e=Ai;do{for(;ja<wi.length;){const r=wi[ja];ja++,Ei(r),am(r.$$)}for(Ei(null),wi.length=0,ja=0;es.length;)es.pop()();for(let r=0;r<Ha.length;r+=1){const t=Ha[r];cf.has(t)||(cf.add(t),t())}Ha.length=0}while(wi.length);for(;rs.length;)rs.pop()();sf=!1,cf.clear(),Ei(e)}function am(e){if(e.fragment!==null){e.update(),Yn(e.before_update);const r=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,r),e.after_update.forEach(za)}}let Si;function om(){return Si||(Si=Promise.resolve(),Si.then(()=>{Si=null})),Si}function df(e,r,t){e.dispatchEvent(Jp(`${r?"intro":"outro"}${t}`))}const Ya=new Set;let Mt;function by(){Mt={r:0,c:[],p:Mt}}function xy(){Mt.r||Yn(Mt.c),Mt=Mt.p}function fm(e,r){e&&e.i&&(Ya.delete(e),e.i(r))}function Ay(e,r,t,n){if(e&&e.o){if(Ya.has(e))return;Ya.add(e),Mt.c.push(()=>{Ya.delete(e),n&&(t&&e.d(1),n())}),e.o(r)}}const lm={duration:0};function Ey(e,r,t,n){let i=r(e,t),o=n?0:1,f=null,u=null,v=null;function A(){v&&nm(e,v)}function M(W,B){const ge=W.b-o;return B*=Math.abs(ge),{a:o,b:W.b,d:ge,duration:B,start:W.start,end:W.start+B,group:W.group}}function G(W){const{delay:B=0,duration:ge=300,easing:Ee=Bu,tick:de=Zt,css:Se}=i||lm,J={start:Gp()+B,b:W};W||(J.group=Mt,Mt.r+=1),f||u?u=J:(Se&&(A(),v=Ju(e,o,W,ge,B,Ee,Se)),W&&de(0,1),f=M(J,ge),za(()=>df(e,W,"start")),Bp(we=>{if(u&&we>u.start&&(f=M(u,ge),u=null,df(e,f.b,"start"),Se&&(A(),v=Ju(e,o,f.b,f.duration,0,Ee,i.css))),f){if(we>=f.end)de(o=f.b,1-o),df(e,f.b,"end"),u||(f.b?A():--f.group.r||Yn(f.group.c)),f=null;else if(we>=f.start){const Fe=we-f.start;o=f.a+f.d*Ee(Fe/f.duration),de(o,1-o)}}return!!(f||u)}))}return{run(W){$u(i)?om().then(()=>{i=i(),G(W)}):G(W)},end(){A(),f=u=null}}}function Ty(e,r){const t={},n={},i={$$scope:1};let o=e.length;for(;o--;){const f=e[o],u=r[o];if(u){for(const v in f)v in u||(n[v]=1);for(const v in u)i[v]||(t[v]=u[v],i[v]=1);e[o]=u}else for(const v in f)i[v]=1}for(const f in n)f in t||(t[f]=void 0);return t}function wy(e){return typeof e=="object"&&e!==null?e:{}}function Sy(e){e&&e.c()}function Cy(e,r){e&&e.l(r)}function um(e,r,t,n){const{fragment:i,on_mount:o,on_destroy:f,after_update:u}=e.$$;i&&i.m(r,t),n||za(()=>{const v=o.map(Pu).filter($u);f?f.push(...v):Yn(v),e.$$.on_mount=[]}),u.forEach(za)}function sm(e,r){const t=e.$$;t.fragment!==null&&(Yn(t.on_destroy),t.fragment&&t.fragment.d(r),t.on_destroy=t.fragment=null,t.ctx=[])}function cm(e,r){e.$$.dirty[0]===-1&&(wi.push(e),ns(),e.$$.dirty.fill(0)),e.$$.dirty[r/31|0]|=1<<r%31}function ky(e,r,t,n,i,o,f,u=[-1]){const v=Ai;Ei(e);const A=e.$$={fragment:null,ctx:null,props:o,update:Zt,not_equal:i,bound:Uu(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(v?v.$$.context:[])),callbacks:Uu(),dirty:u,skip_bound:!1,root:r.target||v.$$.root};f&&f(A.root);let M=!1;if(A.ctx=t?t(e,r.props||{},(G,W,...B)=>{const ge=B.length?B[0]:W;return A.ctx&&i(A.ctx[G],A.ctx[G]=ge)&&(!A.skip_bound&&A.bound[G]&&A.bound[G](ge),M&&cm(e,G)),W}):[],A.update(),M=!0,Yn(A.before_update),A.fragment=n?n(A.ctx):!1,r.target){if(r.hydrate){Pp();const G=Kp(r.target);A.fragment&&A.fragment.l(G),G.forEach(xi)}else A.fragment&&A.fragment.c();r.intro&&fm(e.$$.fragment),um(e,r.target,r.anchor,r.customElement),Up(),is()}Ei(v)}class Ly{$destroy(){sm(this,1),this.$destroy=Zt}$on(r,t){const n=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(r){this.$$set&&!Ip(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}}const Wn=[];function Oy(e,r){return{subscribe:dm(e,r).subscribe}}function dm(e,r=Zt){let t;const n=new Set;function i(u){if(Np(e,u)&&(e=u,t)){const v=!Wn.length;for(const A of n)A[1](),Wn.push(A,e);if(v){for(let A=0;A<Wn.length;A+=2)Wn[A][0](Wn[A+1]);Wn.length=0}}}function o(u){i(u(e))}function f(u,v=Zt){const A=[u,v];return n.add(A),n.size===1&&(t=r(i)||Zt),u(e),()=>{n.delete(A),n.size===0&&(t(),t=null)}}return{set:i,update:o,subscribe:f}}function Ry(e,{delay:r=0,duration:t=400,easing:n=Bu}={}){const i=+getComputedStyle(e).opacity;return{delay:r,duration:t,easing:n,css:o=>`opacity: ${o*i}`}}var as=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},os={exports:{}};(function(e,r){(function(t,n){e.exports=n()})(as,function(){var t=function(a){return a instanceof Uint8Array||a instanceof Uint16Array||a instanceof Uint32Array||a instanceof Int8Array||a instanceof Int16Array||a instanceof Int32Array||a instanceof Float32Array||a instanceof Float64Array||a instanceof Uint8ClampedArray},n=function(a,s){for(var _=Object.keys(s),D=0;D<_.length;++D)a[_[D]]=s[_[D]];return a},i=`
`;function o(a){return typeof atob!="undefined"?atob(a):"base64:"+a}function f(a){var s=new Error("(regl) "+a);throw console.error(s),s}function u(a,s){a||f(s)}function v(a){return a?": "+a:""}function A(a,s,_){a in s||f("unknown parameter ("+a+")"+v(_)+". possible values: "+Object.keys(s).join())}function M(a,s){t(a)||f("invalid parameter type"+v(s)+". must be a typed array")}function G(a,s){switch(s){case"number":return typeof a=="number";case"object":return typeof a=="object";case"string":return typeof a=="string";case"boolean":return typeof a=="boolean";case"function":return typeof a=="function";case"undefined":return typeof a=="undefined";case"symbol":return typeof a=="symbol"}}function W(a,s,_){G(a,s)||f("invalid parameter type"+v(_)+". expected "+s+", got "+typeof a)}function B(a,s){a>=0&&(a|0)===a||f("invalid parameter type, ("+a+")"+v(s)+". must be a nonnegative integer")}function ge(a,s,_){s.indexOf(a)<0&&f("invalid value"+v(_)+". must be one of: "+s)}var Ee=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function de(a){Object.keys(a).forEach(function(s){Ee.indexOf(s)<0&&f('invalid regl constructor argument "'+s+'". must be one of '+Ee)})}function Se(a,s){for(a=a+"";a.length<s;)a=" "+a;return a}function J(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function we(a,s){this.number=a,this.line=s,this.errors=[]}function Fe(a,s,_){this.file=a,this.line=s,this.message=_}function ze(){var a=new Error,s=(a.stack||a).toString(),_=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(s);if(_)return _[1];var D=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(s);return D?D[1]:"unknown"}function er(){var a=new Error,s=(a.stack||a).toString(),_=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(s);if(_)return _[1];var D=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(s);return D?D[1]:"unknown"}function vr(a,s){var _=a.split(`
`),D=1,H=0,R={unknown:new J,0:new J};R.unknown.name=R[0].name=s||ze(),R.unknown.lines.push(new we(0,""));for(var I=0;I<_.length;++I){var q=_[I],X=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(q);if(X)switch(X[1]){case"line":var re=/(\d+)(\s+\d+)?/.exec(X[2]);re&&(D=re[1]|0,re[2]&&(H=re[2]|0,H in R||(R[H]=new J)));break;case"define":var ne=/SHADER_NAME(_B64)?\s+(.*)$/.exec(X[2]);ne&&(R[H].name=ne[1]?o(ne[2]):ne[2]);break}R[H].lines.push(new we(D++,q))}return Object.keys(R).forEach(function(te){var oe=R[te];oe.lines.forEach(function(K){oe.index[K.number]=K})}),R}function Er(a){var s=[];return a.split(`
`).forEach(function(_){if(!(_.length<5)){var D=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(_);D?s.push(new Fe(D[1]|0,D[2]|0,D[3].trim())):_.length>0&&s.push(new Fe("unknown",0,_))}}),s}function Zr(a,s){s.forEach(function(_){var D=a[_.file];if(D){var H=D.index[_.line];if(H){H.errors.push(_),D.hasErrors=!0;return}}a.unknown.hasErrors=!0,a.unknown.lines[0].errors.push(_)})}function st(a,s,_,D,H){if(!a.getShaderParameter(s,a.COMPILE_STATUS)){var R=a.getShaderInfoLog(s),I=D===a.FRAGMENT_SHADER?"fragment":"vertex";at(_,"string",I+" shader source must be a string",H);var q=vr(_,H),X=Er(R);Zr(q,X),Object.keys(q).forEach(function(re){var ne=q[re];if(!ne.hasErrors)return;var te=[""],oe=[""];function K(ee,w){te.push(ee),oe.push(w||"")}K("file number "+re+": "+ne.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),ne.lines.forEach(function(ee){if(ee.errors.length>0){K(Se(ee.number,4)+"|  ","background-color:yellow; font-weight:bold"),K(ee.line+i,"color:red; background-color:yellow; font-weight:bold");var w=0;ee.errors.forEach(function(N){var Z=N.message,me=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Z);if(me){var V=me[1];switch(Z=me[2],V){case"assign":V="=";break}w=Math.max(ee.line.indexOf(V,w),0)}else w=0;K(Se("| ",6)),K(Se("^^^",w+3)+i,"font-weight:bold"),K(Se("| ",6)),K(Z+i,"font-weight:bold")}),K(Se("| ",6)+i)}else K(Se(ee.number,4)+"|  "),K(ee.line+i,"color:red")}),typeof document!="undefined"&&!window.chrome?(oe[0]=te.join("%c"),console.log.apply(console,oe)):console.log(te.join(""))}),u.raise("Error compiling "+I+" shader, "+q[0].name)}}function ct(a,s,_,D,H){if(!a.getProgramParameter(s,a.LINK_STATUS)){var R=a.getProgramInfoLog(s),I=vr(_,H),q=vr(D,H),X='Error linking program with vertex shader, "'+q[0].name+'", and fragment shader "'+I[0].name+'"';typeof document!="undefined"?console.log("%c"+X+i+"%c"+R,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(X+i+R),u.raise(X)}}function dt(a){a._commandRef=ze()}function pr(a,s,_,D){dt(a);function H(X){return X?D.id(X):0}a._fragId=H(a.static.frag),a._vertId=H(a.static.vert);function R(X,re){Object.keys(re).forEach(function(ne){X[D.id(ne)]=!0})}var I=a._uniformSet={};R(I,s.static),R(I,s.dynamic);var q=a._attributeSet={};R(q,_.static),R(q,_.dynamic),a._hasCount="count"in a.static||"count"in a.dynamic||"elements"in a.static||"elements"in a.dynamic}function Yr(a,s){var _=er();f(a+" in command "+(s||ze())+(_==="unknown"?"":" called from "+_))}function Ge(a,s,_){a||Yr(s,_||ze())}function gr(a,s,_,D){a in s||Yr("unknown parameter ("+a+")"+v(_)+". possible values: "+Object.keys(s).join(),D||ze())}function at(a,s,_,D){G(a,s)||Yr("invalid parameter type"+v(_)+". expected "+s+", got "+typeof a,D||ze())}function Vr(a){a()}function Lr(a,s,_){a.texture?ge(a.texture._texture.internalformat,s,"unsupported texture format for attachment"):ge(a.renderbuffer._renderbuffer.format,_,"unsupported renderbuffer format for attachment")}var ur=33071,or=9728,ht=9984,sr=9985,ot=9986,mr=9987,Rt=5120,tn=5121,wn=5122,Ce=5123,qe=5124,Ke=5125,ae=5126,Tr=32819,nr=32820,_r=33635,wr=34042,Jr=36193,Dr={};Dr[Rt]=Dr[tn]=1,Dr[wn]=Dr[Ce]=Dr[Jr]=Dr[_r]=Dr[Tr]=Dr[nr]=2,Dr[qe]=Dr[Ke]=Dr[ae]=Dr[wr]=4;function Sn(a,s){return a===nr||a===Tr||a===_r?2:a===wr?4:Dr[a]*s}function Tt(a){return!(a&a-1)&&!!a}function Ht(a,s,_){var D,H=s.width,R=s.height,I=s.channels;u(H>0&&H<=_.maxTextureSize&&R>0&&R<=_.maxTextureSize,"invalid texture shape"),(a.wrapS!==ur||a.wrapT!==ur)&&u(Tt(H)&&Tt(R),"incompatible wrap mode for texture, both width and height must be power of 2"),s.mipmask===1?H!==1&&R!==1&&u(a.minFilter!==ht&&a.minFilter!==ot&&a.minFilter!==sr&&a.minFilter!==mr,"min filter requires mipmap"):(u(Tt(H)&&Tt(R),"texture must be a square power of 2 to support mipmapping"),u(s.mipmask===(H<<1)-1,"missing or incomplete mipmap data")),s.type===ae&&(_.extensions.indexOf("oes_texture_float_linear")<0&&u(a.minFilter===or&&a.magFilter===or,"filter not supported, must enable oes_texture_float_linear"),u(!a.genMipmaps,"mipmap generation not supported with float textures"));var q=s.images;for(D=0;D<16;++D)if(q[D]){var X=H>>D,re=R>>D;u(s.mipmask&1<<D,"missing mipmap data");var ne=q[D];if(u(ne.width===X&&ne.height===re,"invalid shape for mip images"),u(ne.format===s.format&&ne.internalformat===s.internalformat&&ne.type===s.type,"incompatible type for mip image"),!ne.compressed)if(ne.data){var te=Math.ceil(Sn(ne.type,I)*X/ne.unpackAlignment)*ne.unpackAlignment;u(ne.data.byteLength===te*re,"invalid data for image, buffer size is inconsistent with image format")}else ne.element||ne.copy}else a.genMipmaps||u((s.mipmask&1<<D)==0,"extra mipmap data");s.compressed&&u(!a.genMipmaps,"mipmap generation for compressed images not supported")}function zt(a,s,_,D){var H=a.width,R=a.height,I=a.channels;u(H>0&&H<=D.maxTextureSize&&R>0&&R<=D.maxTextureSize,"invalid texture shape"),u(H===R,"cube map must be square"),u(s.wrapS===ur&&s.wrapT===ur,"wrap mode not supported by cube map");for(var q=0;q<_.length;++q){var X=_[q];u(X.width===H&&X.height===R,"inconsistent cube map face shape"),s.genMipmaps&&(u(!X.compressed,"can not generate mipmap for compressed textures"),u(X.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var re=X.images,ne=0;ne<16;++ne){var te=re[ne];if(te){var oe=H>>ne,K=R>>ne;u(X.mipmask&1<<ne,"missing mipmap data"),u(te.width===oe&&te.height===K,"invalid shape for mip images"),u(te.format===a.format&&te.internalformat===a.internalformat&&te.type===a.type,"incompatible type for mip image"),te.compressed||(te.data?u(te.data.byteLength===oe*K*Math.max(Sn(te.type,I),te.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):te.element||te.copy)}}}}var c=n(u,{optional:Vr,raise:f,commandRaise:Yr,command:Ge,parameter:A,commandParameter:gr,constructor:de,type:W,commandType:at,isTypedArray:M,nni:B,oneOf:ge,shaderError:st,linkError:ct,callSite:er,saveCommandRef:dt,saveDrawInfo:pr,framebufferFormat:Lr,guessCommand:ze,texture2D:Ht,textureCube:zt}),ji=0,Yi=0,ei=5,Vi=6;function vt(a,s){this.id=ji++,this.type=a,this.data=s}function Cn(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function et(a){if(a.length===0)return[];var s=a.charAt(0),_=a.charAt(a.length-1);if(a.length>1&&s===_&&(s==='"'||s==="'"))return['"'+Cn(a.substr(1,a.length-2))+'"'];var D=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(a);if(D)return et(a.substr(0,D.index)).concat(et(D[1])).concat(et(a.substr(D.index+D[0].length)));var H=a.split(".");if(H.length===1)return['"'+Cn(a)+'"'];for(var R=[],I=0;I<H.length;++I)R=R.concat(et(H[I]));return R}function nn(a){return"["+et(a).join("][")+"]"}function ri(a,s){return new vt(a,nn(s+""))}function jt(a){return typeof a=="function"&&!a._reglType||a instanceof vt}function Wi(a,s){if(typeof a=="function")return new vt(Yi,a);if(typeof a=="number"||typeof a=="boolean")return new vt(ei,a);if(Array.isArray(a))return new vt(Vi,a.map(function(_,D){return Wi(_,s+"["+D+"]")}));if(a instanceof vt)return a;c(!1,"invalid option type in uniform "+s)}var qr={DynamicVariable:vt,define:ri,isDynamic:jt,unbox:Wi,accessor:nn},gt={next:typeof requestAnimationFrame=="function"?function(a){return requestAnimationFrame(a)}:function(a){return setTimeout(a,16)},cancel:typeof cancelAnimationFrame=="function"?function(a){return cancelAnimationFrame(a)}:clearTimeout},Dt=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function oo(){var a={"":0},s=[""];return{id:function(_){var D=a[_];return D||(D=a[_]=s.length,s.push(_),D)},str:function(_){return s[_]}}}function Xi(a,s,_){var D=document.createElement("canvas");n(D.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),a.appendChild(D),a===document.body&&(D.style.position="absolute",n(a.style,{margin:0,padding:0}));function H(){var q=window.innerWidth,X=window.innerHeight;if(a!==document.body){var re=D.getBoundingClientRect();q=re.right-re.left,X=re.bottom-re.top}D.width=_*q,D.height=_*X}var R;a!==document.body&&typeof ResizeObserver=="function"?(R=new ResizeObserver(function(){setTimeout(H)}),R.observe(a)):window.addEventListener("resize",H,!1);function I(){R?R.disconnect():window.removeEventListener("resize",H),a.removeChild(D)}return H(),{canvas:D,onDestroy:I}}function ti(a,s){function _(D){try{return a.getContext(D,s)}catch{return null}}return _("webgl")||_("experimental-webgl")||_("webgl-experimental")}function qi(a){return typeof a.nodeName=="string"&&typeof a.appendChild=="function"&&typeof a.getBoundingClientRect=="function"}function Ki(a){return typeof a.drawArrays=="function"||typeof a.drawElements=="function"}function an(a){return typeof a=="string"?a.split():(c(Array.isArray(a),"invalid extension array"),a)}function kn(a){return typeof a=="string"?(c(typeof document!="undefined","not supported outside of DOM"),document.querySelector(a)):a}function fo(a){var s=a||{},_,D,H,R,I={},q=[],X=[],re=typeof window=="undefined"?1:window.devicePixelRatio,ne=!1,te=function(ee){ee&&c.raise(ee)},oe=function(){};if(typeof s=="string"?(c(typeof document!="undefined","selector queries only supported in DOM enviroments"),_=document.querySelector(s),c(_,"invalid query string for element")):typeof s=="object"?qi(s)?_=s:Ki(s)?(R=s,H=R.canvas):(c.constructor(s),"gl"in s?R=s.gl:"canvas"in s?H=kn(s.canvas):"container"in s&&(D=kn(s.container)),"attributes"in s&&(I=s.attributes,c.type(I,"object","invalid context attributes")),"extensions"in s&&(q=an(s.extensions)),"optionalExtensions"in s&&(X=an(s.optionalExtensions)),"onDone"in s&&(c.type(s.onDone,"function","invalid or missing onDone callback"),te=s.onDone),"profile"in s&&(ne=!!s.profile),"pixelRatio"in s&&(re=+s.pixelRatio,c(re>0,"invalid pixel ratio"))):c.raise("invalid arguments to regl"),_&&(_.nodeName.toLowerCase()==="canvas"?H=_:D=_),!R){if(!H){c(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var K=Xi(D||document.body,te,re);if(!K)return null;H=K.canvas,oe=K.onDestroy}I.premultipliedAlpha===void 0&&(I.premultipliedAlpha=!0),R=ti(H,I)}return R?{gl:R,canvas:H,container:D,extensions:q,optionalExtensions:X,pixelRatio:re,profile:ne,onDone:te,onDestroy:oe}:(oe(),te("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function _t(a,s){var _={};function D(I){c.type(I,"string","extension name must be string");var q=I.toLowerCase(),X;try{X=_[q]=a.getExtension(q)}catch{}return!!X}for(var H=0;H<s.extensions.length;++H){var R=s.extensions[H];if(!D(R))return s.onDestroy(),s.onDone('"'+R+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return s.optionalExtensions.forEach(D),{extensions:_,restore:function(){Object.keys(_).forEach(function(I){if(_[I]&&!D(I))throw new Error("(regl): error restoring extension "+I)})}}}function Wr(a,s){for(var _=Array(a),D=0;D<a;++D)_[D]=s(D);return _}var Qi=5120,Zi=5121,lo=5122,on=5123,yt=5124,Ji=5125,ea=5126;function ra(a){for(var s=16;s<=1<<28;s*=16)if(a<=s)return s;return 0}function ni(a){var s,_;return s=(a>65535)<<4,a>>>=s,_=(a>255)<<3,a>>>=_,s|=_,_=(a>15)<<2,a>>>=_,s|=_,_=(a>3)<<1,a>>>=_,s|=_,s|a>>1}function ta(){var a=Wr(8,function(){return[]});function s(R){var I=ra(R),q=a[ni(I)>>2];return q.length>0?q.pop():new ArrayBuffer(I)}function _(R){a[ni(R.byteLength)>>2].push(R)}function D(R,I){var q=null;switch(R){case Qi:q=new Int8Array(s(I),0,I);break;case Zi:q=new Uint8Array(s(I),0,I);break;case lo:q=new Int16Array(s(2*I),0,I);break;case on:q=new Uint16Array(s(2*I),0,I);break;case yt:q=new Int32Array(s(4*I),0,I);break;case Ji:q=new Uint32Array(s(4*I),0,I);break;case ea:q=new Float32Array(s(4*I),0,I);break;default:return null}return q.length!==I?q.subarray(0,I):q}function H(R){_(R.buffer)}return{alloc:s,free:_,allocType:D,freeType:H}}var Ae=ta();Ae.zero=ta();var k=3408,ve=3410,Oe=3411,ar=3412,Mr=3413,Gr=3414,Fr=3415,Ln=33901,rt=33902,na=3379,uo=3386,Wf=34921,Zc=36347,Jc=36348,ed=35661,rd=35660,td=34930,nd=36349,id=34076,ad=34024,od=7936,fd=7937,ld=7938,ud=35724,sd=34047,cd=36063,dd=34852,ia=3553,Xf=34067,hd=34069,pd=33984,ii=6408,so=5126,qf=5121,co=36160,md=36053,vd=36064,gd=16384,_d=function(a,s){var _=1;s.ext_texture_filter_anisotropic&&(_=a.getParameter(sd));var D=1,H=1;s.webgl_draw_buffers&&(D=a.getParameter(dd),H=a.getParameter(cd));var R=!!s.oes_texture_float;if(R){var I=a.createTexture();a.bindTexture(ia,I),a.texImage2D(ia,0,ii,1,1,0,ii,so,null);var q=a.createFramebuffer();if(a.bindFramebuffer(co,q),a.framebufferTexture2D(co,vd,ia,I,0),a.bindTexture(ia,null),a.checkFramebufferStatus(co)!==md)R=!1;else{a.viewport(0,0,1,1),a.clearColor(1,0,0,1),a.clear(gd);var X=Ae.allocType(so,4);a.readPixels(0,0,1,1,ii,so,X),a.getError()?R=!1:(a.deleteFramebuffer(q),a.deleteTexture(I),R=X[0]===1),Ae.freeType(X)}}var re=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),ne=!0;if(!re){var te=a.createTexture(),oe=Ae.allocType(qf,36);a.activeTexture(pd),a.bindTexture(Xf,te),a.texImage2D(hd,0,ii,3,3,0,ii,qf,oe),Ae.freeType(oe),a.bindTexture(Xf,null),a.deleteTexture(te),ne=!a.getError()}return{colorBits:[a.getParameter(ve),a.getParameter(Oe),a.getParameter(ar),a.getParameter(Mr)],depthBits:a.getParameter(Gr),stencilBits:a.getParameter(Fr),subpixelBits:a.getParameter(k),extensions:Object.keys(s).filter(function(K){return!!s[K]}),maxAnisotropic:_,maxDrawbuffers:D,maxColorAttachments:H,pointSizeDims:a.getParameter(Ln),lineWidthDims:a.getParameter(rt),maxViewportDims:a.getParameter(uo),maxCombinedTextureUnits:a.getParameter(ed),maxCubeMapSize:a.getParameter(id),maxRenderbufferSize:a.getParameter(ad),maxTextureUnits:a.getParameter(td),maxTextureSize:a.getParameter(na),maxAttributes:a.getParameter(Wf),maxVertexUniforms:a.getParameter(Zc),maxVertexTextureUnits:a.getParameter(rd),maxVaryingVectors:a.getParameter(Jc),maxFragmentUniforms:a.getParameter(nd),glsl:a.getParameter(ud),renderer:a.getParameter(fd),vendor:a.getParameter(od),version:a.getParameter(ld),readFloat:R,npotTextureCube:ne}};function bt(a){return!!a&&typeof a=="object"&&Array.isArray(a.shape)&&Array.isArray(a.stride)&&typeof a.offset=="number"&&a.shape.length===a.stride.length&&(Array.isArray(a.data)||t(a.data))}var ft=function(a){return Object.keys(a).map(function(s){return a[s]})},aa={shape:Ad,flatten:xd};function yd(a,s,_){for(var D=0;D<s;++D)_[D]=a[D]}function bd(a,s,_,D){for(var H=0,R=0;R<s;++R)for(var I=a[R],q=0;q<_;++q)D[H++]=I[q]}function Kf(a,s,_,D,H,R){for(var I=R,q=0;q<s;++q)for(var X=a[q],re=0;re<_;++re)for(var ne=X[re],te=0;te<D;++te)H[I++]=ne[te]}function Qf(a,s,_,D,H){for(var R=1,I=_+1;I<s.length;++I)R*=s[I];var q=s[_];if(s.length-_==4){var X=s[_+1],re=s[_+2],ne=s[_+3];for(I=0;I<q;++I)Kf(a[I],X,re,ne,D,H),H+=R}else for(I=0;I<q;++I)Qf(a[I],s,_+1,D,H),H+=R}function xd(a,s,_,D){var H=1;if(s.length)for(var R=0;R<s.length;++R)H*=s[R];else H=0;var I=D||Ae.allocType(_,H);switch(s.length){case 0:break;case 1:yd(a,s[0],I);break;case 2:bd(a,s[0],s[1],I);break;case 3:Kf(a,s[0],s[1],s[2],I,0);break;default:Qf(a,s,0,I,0)}return I}function Ad(a){for(var s=[],_=a;_.length;_=_[0])s.push(_.length);return s}var ho={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ed=5120,Td=5122,wd=5124,Sd=5121,Cd=5123,kd=5125,Ld=5126,Od=5126,fn={int8:Ed,int16:Td,int32:wd,uint8:Sd,uint16:Cd,uint32:kd,float:Ld,float32:Od},Rd=35048,Dd=35040,oa={dynamic:Rd,stream:Dd,static:35044},po=aa.flatten,Zf=aa.shape,Jf=35044,Fd=35040,mo=5121,vo=5126,Yt=[];Yt[5120]=1,Yt[5122]=2,Yt[5124]=4,Yt[5121]=1,Yt[5123]=2,Yt[5125]=4,Yt[5126]=4;function fa(a){return ho[Object.prototype.toString.call(a)]|0}function el(a,s){for(var _=0;_<s.length;++_)a[_]=s[_]}function rl(a,s,_,D,H,R,I){for(var q=0,X=0;X<_;++X)for(var re=0;re<D;++re)a[q++]=s[H*X+R*re+I]}function Nd(a,s,_,D){var H=0,R={};function I(w){this.id=H++,this.buffer=a.createBuffer(),this.type=w,this.usage=Jf,this.byteLength=0,this.dimension=1,this.dtype=mo,this.persistentData=null,_.profile&&(this.stats={size:0})}I.prototype.bind=function(){a.bindBuffer(this.type,this.buffer)},I.prototype.destroy=function(){oe(this)};var q=[];function X(w,N){var Z=q.pop();return Z||(Z=new I(w)),Z.bind(),te(Z,N,Fd,0,1,!1),Z}function re(w){q.push(w)}function ne(w,N,Z){w.byteLength=N.byteLength,a.bufferData(w.type,N,Z)}function te(w,N,Z,me,V,he){var se;if(w.usage=Z,Array.isArray(N)){if(w.dtype=me||vo,N.length>0){var Le;if(Array.isArray(N[0])){se=Zf(N);for(var z=1,$=1;$<se.length;++$)z*=se[$];w.dimension=z,Le=po(N,se,w.dtype),ne(w,Le,Z),he?w.persistentData=Le:Ae.freeType(Le)}else if(typeof N[0]=="number"){w.dimension=V;var be=Ae.allocType(w.dtype,N.length);el(be,N),ne(w,be,Z),he?w.persistentData=be:Ae.freeType(be)}else t(N[0])?(w.dimension=N[0].length,w.dtype=me||fa(N[0])||vo,Le=po(N,[N.length,N[0].length],w.dtype),ne(w,Le,Z),he?w.persistentData=Le:Ae.freeType(Le)):c.raise("invalid buffer data")}}else if(t(N))w.dtype=me||fa(N),w.dimension=V,ne(w,N,Z),he&&(w.persistentData=new Uint8Array(new Uint8Array(N.buffer)));else if(bt(N)){se=N.shape;var fe=N.stride,Q=N.offset,le=0,ue=0,Ue=0,Be=0;se.length===1?(le=se[0],ue=1,Ue=fe[0],Be=0):se.length===2?(le=se[0],ue=se[1],Ue=fe[0],Be=fe[1]):c.raise("invalid shape"),w.dtype=me||fa(N.data)||vo,w.dimension=ue;var ce=Ae.allocType(w.dtype,le*ue);rl(ce,N.data,le,ue,Ue,Be,Q),ne(w,ce,Z),he?w.persistentData=ce:Ae.freeType(ce)}else N instanceof ArrayBuffer?(w.dtype=mo,w.dimension=V,ne(w,N,Z),he&&(w.persistentData=new Uint8Array(new Uint8Array(N)))):c.raise("invalid buffer data")}function oe(w){s.bufferCount--,D(w);var N=w.buffer;c(N,"buffer must not be deleted already"),a.deleteBuffer(N),w.buffer=null,delete R[w.id]}function K(w,N,Z,me){s.bufferCount++;var V=new I(N);R[V.id]=V;function he(z){var $=Jf,be=null,fe=0,Q=0,le=1;return Array.isArray(z)||t(z)||bt(z)||z instanceof ArrayBuffer?be=z:typeof z=="number"?fe=z|0:z&&(c.type(z,"object","buffer arguments must be an object, a number or an array"),"data"in z&&(c(be===null||Array.isArray(be)||t(be)||bt(be),"invalid data for buffer"),be=z.data),"usage"in z&&(c.parameter(z.usage,oa,"invalid buffer usage"),$=oa[z.usage]),"type"in z&&(c.parameter(z.type,fn,"invalid buffer type"),Q=fn[z.type]),"dimension"in z&&(c.type(z.dimension,"number","invalid dimension"),le=z.dimension|0),"length"in z&&(c.nni(fe,"buffer length must be a nonnegative integer"),fe=z.length|0)),V.bind(),be?te(V,be,$,Q,le,me):(fe&&a.bufferData(V.type,fe,$),V.dtype=Q||mo,V.usage=$,V.dimension=le,V.byteLength=fe),_.profile&&(V.stats.size=V.byteLength*Yt[V.dtype]),he}function se(z,$){c($+z.byteLength<=V.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+z.byteLength+" starting from offset "+$+" to a buffer of size "+V.byteLength),a.bufferSubData(V.type,$,z)}function Le(z,$){var be=($||0)|0,fe;if(V.bind(),t(z)||z instanceof ArrayBuffer)se(z,be);else if(Array.isArray(z)){if(z.length>0)if(typeof z[0]=="number"){var Q=Ae.allocType(V.dtype,z.length);el(Q,z),se(Q,be),Ae.freeType(Q)}else if(Array.isArray(z[0])||t(z[0])){fe=Zf(z);var le=po(z,fe,V.dtype);se(le,be),Ae.freeType(le)}else c.raise("invalid buffer data")}else if(bt(z)){fe=z.shape;var ue=z.stride,Ue=0,Be=0,ce=0,pe=0;fe.length===1?(Ue=fe[0],Be=1,ce=ue[0],pe=0):fe.length===2?(Ue=fe[0],Be=fe[1],ce=ue[0],pe=ue[1]):c.raise("invalid shape");var Ne=Array.isArray(z.data)?V.dtype:fa(z.data),$e=Ae.allocType(Ne,Ue*Be);rl($e,z.data,Ue,Be,ce,pe,z.offset),se($e,be),Ae.freeType($e)}else c.raise("invalid data for buffer subdata");return he}return Z||he(w),he._reglType="buffer",he._buffer=V,he.subdata=Le,_.profile&&(he.stats=V.stats),he.destroy=function(){oe(V)},he}function ee(){ft(R).forEach(function(w){w.buffer=a.createBuffer(),a.bindBuffer(w.type,w.buffer),a.bufferData(w.type,w.persistentData||w.byteLength,w.usage)})}return _.profile&&(s.getTotalBufferSize=function(){var w=0;return Object.keys(R).forEach(function(N){w+=R[N].stats.size}),w}),{create:K,createStream:X,destroyStream:re,clear:function(){ft(R).forEach(oe),q.forEach(oe)},getBuffer:function(w){return w&&w._buffer instanceof I?w._buffer:null},restore:ee,_initBuffer:te}}var Id=0,Md=0,Gd=1,Bd=1,Pd=4,Ud=4,Vt={points:Id,point:Md,lines:Gd,line:Bd,triangles:Pd,triangle:Ud,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},$d=0,Hd=1,ai=4,zd=5120,On=5121,tl=5122,Rn=5123,nl=5124,ln=5125,go=34963,jd=35040,Yd=35044;function Vd(a,s,_,D){var H={},R=0,I={uint8:On,uint16:Rn};s.oes_element_index_uint&&(I.uint32=ln);function q(ee){this.id=R++,H[this.id]=this,this.buffer=ee,this.primType=ai,this.vertCount=0,this.type=0}q.prototype.bind=function(){this.buffer.bind()};var X=[];function re(ee){var w=X.pop();return w||(w=new q(_.create(null,go,!0,!1)._buffer)),te(w,ee,jd,-1,-1,0,0),w}function ne(ee){X.push(ee)}function te(ee,w,N,Z,me,V,he){ee.buffer.bind();var se;if(w){var Le=he;!he&&(!t(w)||bt(w)&&!t(w.data))&&(Le=s.oes_element_index_uint?ln:Rn),_._initBuffer(ee.buffer,w,N,Le,3)}else a.bufferData(go,V,N),ee.buffer.dtype=se||On,ee.buffer.usage=N,ee.buffer.dimension=3,ee.buffer.byteLength=V;if(se=he,!he){switch(ee.buffer.dtype){case On:case zd:se=On;break;case Rn:case tl:se=Rn;break;case ln:case nl:se=ln;break;default:c.raise("unsupported type for element array")}ee.buffer.dtype=se}ee.type=se,c(se!==ln||!!s.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var z=me;z<0&&(z=ee.buffer.byteLength,se===Rn?z>>=1:se===ln&&(z>>=2)),ee.vertCount=z;var $=Z;if(Z<0){$=ai;var be=ee.buffer.dimension;be===1&&($=$d),be===2&&($=Hd),be===3&&($=ai)}ee.primType=$}function oe(ee){D.elementsCount--,c(ee.buffer!==null,"must not double destroy elements"),delete H[ee.id],ee.buffer.destroy(),ee.buffer=null}function K(ee,w){var N=_.create(null,go,!0),Z=new q(N._buffer);D.elementsCount++;function me(V){if(!V)N(),Z.primType=ai,Z.vertCount=0,Z.type=On;else if(typeof V=="number")N(V),Z.primType=ai,Z.vertCount=V|0,Z.type=On;else{var he=null,se=Yd,Le=-1,z=-1,$=0,be=0;Array.isArray(V)||t(V)||bt(V)?he=V:(c.type(V,"object","invalid arguments for elements"),"data"in V&&(he=V.data,c(Array.isArray(he)||t(he)||bt(he),"invalid data for element buffer")),"usage"in V&&(c.parameter(V.usage,oa,"invalid element buffer usage"),se=oa[V.usage]),"primitive"in V&&(c.parameter(V.primitive,Vt,"invalid element buffer primitive"),Le=Vt[V.primitive]),"count"in V&&(c(typeof V.count=="number"&&V.count>=0,"invalid vertex count for elements"),z=V.count|0),"type"in V&&(c.parameter(V.type,I,"invalid buffer type"),be=I[V.type]),"length"in V?$=V.length|0:($=z,be===Rn||be===tl?$*=2:(be===ln||be===nl)&&($*=4))),te(Z,he,se,Le,z,$,be)}return me}return me(ee),me._reglType="elements",me._elements=Z,me.subdata=function(V,he){return N.subdata(V,he),me},me.destroy=function(){oe(Z)},me}return{create:K,createStream:re,destroyStream:ne,getElements:function(ee){return typeof ee=="function"&&ee._elements instanceof q?ee._elements:null},clear:function(){ft(H).forEach(oe)}}}var il=new Float32Array(1),Wd=new Uint32Array(il.buffer),Xd=5123;function al(a){for(var s=Ae.allocType(Xd,a.length),_=0;_<a.length;++_)if(isNaN(a[_]))s[_]=65535;else if(a[_]===1/0)s[_]=31744;else if(a[_]===-1/0)s[_]=64512;else{il[0]=a[_];var D=Wd[0],H=D>>>31<<15,R=(D<<1>>>24)-127,I=D>>13&(1<<10)-1;if(R<-24)s[_]=H;else if(R<-14){var q=-14-R;s[_]=H+(I+(1<<10)>>q)}else R>15?s[_]=H+31744:s[_]=H+(R+15<<10)+I}return s}function cr(a){return Array.isArray(a)||t(a)}var ol=function(a){return!(a&a-1)&&!!a},qd=34467,wt=3553,_o=34067,la=34069,un=6408,yo=6406,ua=6407,oi=6409,sa=6410,fl=32854,bo=32855,ll=36194,Kd=32819,Qd=32820,Zd=33635,Jd=34042,xo=6402,ca=34041,Ao=35904,Eo=35906,Dn=36193,To=33776,wo=33777,So=33778,Co=33779,ul=35986,sl=35987,cl=34798,dl=35840,hl=35841,pl=35842,ml=35843,vl=36196,Fn=5121,ko=5123,Lo=5125,fi=5126,eh=10242,rh=10243,th=10497,Oo=33071,nh=33648,ih=10240,ah=10241,Ro=9728,oh=9729,Do=9984,gl=9985,_l=9986,Fo=9987,fh=33170,da=4352,lh=4353,uh=4354,sh=34046,ch=3317,dh=37440,hh=37441,ph=37443,yl=37444,li=33984,mh=[Do,_l,gl,Fo],ha=[0,oi,sa,ua,un],pt={};pt[oi]=pt[yo]=pt[xo]=1,pt[ca]=pt[sa]=2,pt[ua]=pt[Ao]=3,pt[un]=pt[Eo]=4;function Nn(a){return"[object "+a+"]"}var bl=Nn("HTMLCanvasElement"),xl=Nn("OffscreenCanvas"),Al=Nn("CanvasRenderingContext2D"),El=Nn("ImageBitmap"),Tl=Nn("HTMLImageElement"),wl=Nn("HTMLVideoElement"),vh=Object.keys(ho).concat([bl,xl,Al,El,Tl,wl]),In=[];In[Fn]=1,In[fi]=4,In[Dn]=2,In[ko]=2,In[Lo]=4;var Br=[];Br[fl]=2,Br[bo]=2,Br[ll]=2,Br[ca]=4,Br[To]=.5,Br[wo]=.5,Br[So]=1,Br[Co]=1,Br[ul]=.5,Br[sl]=1,Br[cl]=1,Br[dl]=.5,Br[hl]=.25,Br[pl]=.5,Br[ml]=.25,Br[vl]=.5;function Sl(a){return Array.isArray(a)&&(a.length===0||typeof a[0]=="number")}function Cl(a){if(!Array.isArray(a))return!1;var s=a.length;return!(s===0||!cr(a[0]))}function sn(a){return Object.prototype.toString.call(a)}function kl(a){return sn(a)===bl}function Ll(a){return sn(a)===xl}function gh(a){return sn(a)===Al}function _h(a){return sn(a)===El}function yh(a){return sn(a)===Tl}function bh(a){return sn(a)===wl}function No(a){if(!a)return!1;var s=sn(a);return vh.indexOf(s)>=0?!0:Sl(a)||Cl(a)||bt(a)}function Ol(a){return ho[Object.prototype.toString.call(a)]|0}function xh(a,s){var _=s.length;switch(a.type){case Fn:case ko:case Lo:case fi:var D=Ae.allocType(a.type,_);D.set(s),a.data=D;break;case Dn:a.data=al(s);break;default:c.raise("unsupported texture type, must specify a typed array")}}function Rl(a,s){return Ae.allocType(a.type===Dn?fi:a.type,s)}function Dl(a,s){a.type===Dn?(a.data=al(s),Ae.freeType(s)):a.data=s}function Ah(a,s,_,D,H,R){for(var I=a.width,q=a.height,X=a.channels,re=I*q*X,ne=Rl(a,re),te=0,oe=0;oe<q;++oe)for(var K=0;K<I;++K)for(var ee=0;ee<X;++ee)ne[te++]=s[_*K+D*oe+H*ee+R];Dl(a,ne)}function pa(a,s,_,D,H,R){var I;if(typeof Br[a]!="undefined"?I=Br[a]:I=pt[a]*In[s],R&&(I*=6),H){for(var q=0,X=_;X>=1;)q+=I*X*X,X/=2;return q}else return I*_*D}function Eh(a,s,_,D,H,R,I){var q={"don't care":da,"dont care":da,nice:uh,fast:lh},X={repeat:th,clamp:Oo,mirror:nh},re={nearest:Ro,linear:oh},ne=n({mipmap:Fo,"nearest mipmap nearest":Do,"linear mipmap nearest":gl,"nearest mipmap linear":_l,"linear mipmap linear":Fo},re),te={none:0,browser:yl},oe={uint8:Fn,rgba4:Kd,rgb565:Zd,"rgb5 a1":Qd},K={alpha:yo,luminance:oi,"luminance alpha":sa,rgb:ua,rgba:un,rgba4:fl,"rgb5 a1":bo,rgb565:ll},ee={};s.ext_srgb&&(K.srgb=Ao,K.srgba=Eo),s.oes_texture_float&&(oe.float32=oe.float=fi),s.oes_texture_half_float&&(oe.float16=oe["half float"]=Dn),s.webgl_depth_texture&&(n(K,{depth:xo,"depth stencil":ca}),n(oe,{uint16:ko,uint32:Lo,"depth stencil":Jd})),s.webgl_compressed_texture_s3tc&&n(ee,{"rgb s3tc dxt1":To,"rgba s3tc dxt1":wo,"rgba s3tc dxt3":So,"rgba s3tc dxt5":Co}),s.webgl_compressed_texture_atc&&n(ee,{"rgb atc":ul,"rgba atc explicit alpha":sl,"rgba atc interpolated alpha":cl}),s.webgl_compressed_texture_pvrtc&&n(ee,{"rgb pvrtc 4bppv1":dl,"rgb pvrtc 2bppv1":hl,"rgba pvrtc 4bppv1":pl,"rgba pvrtc 2bppv1":ml}),s.webgl_compressed_texture_etc1&&(ee["rgb etc1"]=vl);var w=Array.prototype.slice.call(a.getParameter(qd));Object.keys(ee).forEach(function(m){var F=ee[m];w.indexOf(F)>=0&&(K[m]=F)});var N=Object.keys(K);_.textureFormats=N;var Z=[];Object.keys(K).forEach(function(m){var F=K[m];Z[F]=m});var me=[];Object.keys(oe).forEach(function(m){var F=oe[m];me[F]=m});var V=[];Object.keys(re).forEach(function(m){var F=re[m];V[F]=m});var he=[];Object.keys(ne).forEach(function(m){var F=ne[m];he[F]=m});var se=[];Object.keys(X).forEach(function(m){var F=X[m];se[F]=m});var Le=N.reduce(function(m,F){var O=K[F];return O===oi||O===yo||O===oi||O===sa||O===xo||O===ca||s.ext_srgb&&(O===Ao||O===Eo)?m[O]=O:O===bo||F.indexOf("rgba")>=0?m[O]=un:m[O]=ua,m},{});function z(){this.internalformat=un,this.format=un,this.type=Fn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yl,this.width=0,this.height=0,this.channels=0}function $(m,F){m.internalformat=F.internalformat,m.format=F.format,m.type=F.type,m.compressed=F.compressed,m.premultiplyAlpha=F.premultiplyAlpha,m.flipY=F.flipY,m.unpackAlignment=F.unpackAlignment,m.colorSpace=F.colorSpace,m.width=F.width,m.height=F.height,m.channels=F.channels}function be(m,F){if(!(typeof F!="object"||!F)){if("premultiplyAlpha"in F&&(c.type(F.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),m.premultiplyAlpha=F.premultiplyAlpha),"flipY"in F&&(c.type(F.flipY,"boolean","invalid texture flip"),m.flipY=F.flipY),"alignment"in F&&(c.oneOf(F.alignment,[1,2,4,8],"invalid texture unpack alignment"),m.unpackAlignment=F.alignment),"colorSpace"in F&&(c.parameter(F.colorSpace,te,"invalid colorSpace"),m.colorSpace=te[F.colorSpace]),"type"in F){var O=F.type;c(s.oes_texture_float||!(O==="float"||O==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),c(s.oes_texture_half_float||!(O==="half float"||O==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),c(s.webgl_depth_texture||!(O==="uint16"||O==="uint32"||O==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(O,oe,"invalid texture type"),m.type=oe[O]}var ye=m.width,Ye=m.height,d=m.channels,l=!1;"shape"in F?(c(Array.isArray(F.shape)&&F.shape.length>=2,"shape must be an array"),ye=F.shape[0],Ye=F.shape[1],F.shape.length===3&&(d=F.shape[2],c(d>0&&d<=4,"invalid number of channels"),l=!0),c(ye>=0&&ye<=_.maxTextureSize,"invalid width"),c(Ye>=0&&Ye<=_.maxTextureSize,"invalid height")):("radius"in F&&(ye=Ye=F.radius,c(ye>=0&&ye<=_.maxTextureSize,"invalid radius")),"width"in F&&(ye=F.width,c(ye>=0&&ye<=_.maxTextureSize,"invalid width")),"height"in F&&(Ye=F.height,c(Ye>=0&&Ye<=_.maxTextureSize,"invalid height")),"channels"in F&&(d=F.channels,c(d>0&&d<=4,"invalid number of channels"),l=!0)),m.width=ye|0,m.height=Ye|0,m.channels=d|0;var y=!1;if("format"in F){var T=F.format;c(s.webgl_depth_texture||!(T==="depth"||T==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),c.parameter(T,K,"invalid texture format");var S=m.internalformat=K[T];m.format=Le[S],T in oe&&("type"in F||(m.type=oe[T])),T in ee&&(m.compressed=!0),y=!0}!l&&y?m.channels=pt[m.format]:l&&!y?m.channels!==ha[m.format]&&(m.format=m.internalformat=ha[m.channels]):y&&l&&c(m.channels===pt[m.format],"number of channels inconsistent with specified format")}}function fe(m){a.pixelStorei(dh,m.flipY),a.pixelStorei(hh,m.premultiplyAlpha),a.pixelStorei(ph,m.colorSpace),a.pixelStorei(ch,m.unpackAlignment)}function Q(){z.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function le(m,F){var O=null;if(No(F)?O=F:F&&(c.type(F,"object","invalid pixel data type"),be(m,F),"x"in F&&(m.xOffset=F.x|0),"y"in F&&(m.yOffset=F.y|0),No(F.data)&&(O=F.data)),c(!m.compressed||O instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),F.copy){c(!O,"can not specify copy and data field for the same texture");var ye=H.viewportWidth,Ye=H.viewportHeight;m.width=m.width||ye-m.xOffset,m.height=m.height||Ye-m.yOffset,m.needsCopy=!0,c(m.xOffset>=0&&m.xOffset<ye&&m.yOffset>=0&&m.yOffset<Ye&&m.width>0&&m.width<=ye&&m.height>0&&m.height<=Ye,"copy texture read out of bounds")}else if(!O)m.width=m.width||1,m.height=m.height||1,m.channels=m.channels||4;else if(t(O))m.channels=m.channels||4,m.data=O,!("type"in F)&&m.type===Fn&&(m.type=Ol(O));else if(Sl(O))m.channels=m.channels||4,xh(m,O),m.alignment=1,m.needsFree=!0;else if(bt(O)){var d=O.data;!Array.isArray(d)&&m.type===Fn&&(m.type=Ol(d));var l=O.shape,y=O.stride,T,S,x,b,E,h;l.length===3?(x=l[2],h=y[2]):(c(l.length===2,"invalid ndarray pixel data, must be 2 or 3D"),x=1,h=1),T=l[0],S=l[1],b=y[0],E=y[1],m.alignment=1,m.width=T,m.height=S,m.channels=x,m.format=m.internalformat=ha[x],m.needsFree=!0,Ah(m,d,b,E,h,O.offset)}else if(kl(O)||Ll(O)||gh(O))kl(O)||Ll(O)?m.element=O:m.element=O.canvas,m.width=m.element.width,m.height=m.element.height,m.channels=4;else if(_h(O))m.element=O,m.width=O.width,m.height=O.height,m.channels=4;else if(yh(O))m.element=O,m.width=O.naturalWidth,m.height=O.naturalHeight,m.channels=4;else if(bh(O))m.element=O,m.width=O.videoWidth,m.height=O.videoHeight,m.channels=4;else if(Cl(O)){var g=m.width||O[0].length,p=m.height||O.length,L=m.channels;cr(O[0][0])?L=L||O[0][0].length:L=L||1;for(var C=aa.shape(O),U=1,j=0;j<C.length;++j)U*=C[j];var ie=Rl(m,U);aa.flatten(O,C,"",ie),Dl(m,ie),m.alignment=1,m.width=g,m.height=p,m.channels=L,m.format=m.internalformat=ha[L],m.needsFree=!0}m.type===fi?c(_.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):m.type===Dn&&c(_.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function ue(m,F,O){var ye=m.element,Ye=m.data,d=m.internalformat,l=m.format,y=m.type,T=m.width,S=m.height;fe(m),ye?a.texImage2D(F,O,l,l,y,ye):m.compressed?a.compressedTexImage2D(F,O,d,T,S,0,Ye):m.needsCopy?(D(),a.copyTexImage2D(F,O,l,m.xOffset,m.yOffset,T,S,0)):a.texImage2D(F,O,l,T,S,0,l,y,Ye||null)}function Ue(m,F,O,ye,Ye){var d=m.element,l=m.data,y=m.internalformat,T=m.format,S=m.type,x=m.width,b=m.height;fe(m),d?a.texSubImage2D(F,Ye,O,ye,T,S,d):m.compressed?a.compressedTexSubImage2D(F,Ye,O,ye,y,x,b,l):m.needsCopy?(D(),a.copyTexSubImage2D(F,Ye,O,ye,m.xOffset,m.yOffset,x,b)):a.texSubImage2D(F,Ye,O,ye,x,b,T,S,l)}var Be=[];function ce(){return Be.pop()||new Q}function pe(m){m.needsFree&&Ae.freeType(m.data),Q.call(m),Be.push(m)}function Ne(){z.call(this),this.genMipmaps=!1,this.mipmapHint=da,this.mipmask=0,this.images=Array(16)}function $e(m,F,O){var ye=m.images[0]=ce();m.mipmask=1,ye.width=m.width=F,ye.height=m.height=O,ye.channels=m.channels=4}function Ve(m,F){var O=null;if(No(F))O=m.images[0]=ce(),$(O,m),le(O,F),m.mipmask=1;else if(be(m,F),Array.isArray(F.mipmap))for(var ye=F.mipmap,Ye=0;Ye<ye.length;++Ye)O=m.images[Ye]=ce(),$(O,m),O.width>>=Ye,O.height>>=Ye,le(O,ye[Ye]),m.mipmask|=1<<Ye;else O=m.images[0]=ce(),$(O,m),le(O,F),m.mipmask=1;$(m,m.images[0]),m.compressed&&(m.internalformat===To||m.internalformat===wo||m.internalformat===So||m.internalformat===Co)&&c(m.width%4==0&&m.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function dr(m,F){for(var O=m.images,ye=0;ye<O.length;++ye){if(!O[ye])return;ue(O[ye],F,ye)}}var hr=[];function Xe(){var m=hr.pop()||new Ne;z.call(m),m.mipmask=0;for(var F=0;F<16;++F)m.images[F]=null;return m}function Sr(m){for(var F=m.images,O=0;O<F.length;++O)F[O]&&pe(F[O]),F[O]=null;hr.push(m)}function fr(){this.minFilter=Ro,this.magFilter=Ro,this.wrapS=Oo,this.wrapT=Oo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=da}function Ar(m,F){if("min"in F){var O=F.min;c.parameter(O,ne),m.minFilter=ne[O],mh.indexOf(m.minFilter)>=0&&!("faces"in F)&&(m.genMipmaps=!0)}if("mag"in F){var ye=F.mag;c.parameter(ye,re),m.magFilter=re[ye]}var Ye=m.wrapS,d=m.wrapT;if("wrap"in F){var l=F.wrap;typeof l=="string"?(c.parameter(l,X),Ye=d=X[l]):Array.isArray(l)&&(c.parameter(l[0],X),c.parameter(l[1],X),Ye=X[l[0]],d=X[l[1]])}else{if("wrapS"in F){var y=F.wrapS;c.parameter(y,X),Ye=X[y]}if("wrapT"in F){var T=F.wrapT;c.parameter(T,X),d=X[T]}}if(m.wrapS=Ye,m.wrapT=d,"anisotropic"in F){var S=F.anisotropic;c(typeof S=="number"&&S>=1&&S<=_.maxAnisotropic,"aniso samples must be between 1 and "),m.anisotropic=F.anisotropic}if("mipmap"in F){var x=!1;switch(typeof F.mipmap){case"string":c.parameter(F.mipmap,q,"invalid mipmap hint"),m.mipmapHint=q[F.mipmap],m.genMipmaps=!0,x=!0;break;case"boolean":x=m.genMipmaps=F.mipmap;break;case"object":c(Array.isArray(F.mipmap),"invalid mipmap type"),m.genMipmaps=!1,x=!0;break;default:c.raise("invalid mipmap type")}x&&!("min"in F)&&(m.minFilter=Do)}}function Cr(m,F){a.texParameteri(F,ah,m.minFilter),a.texParameteri(F,ih,m.magFilter),a.texParameteri(F,eh,m.wrapS),a.texParameteri(F,rh,m.wrapT),s.ext_texture_filter_anisotropic&&a.texParameteri(F,sh,m.anisotropic),m.genMipmaps&&(a.hint(fh,m.mipmapHint),a.generateMipmap(F))}var kr=0,Nr={},Pr=_.maxTextureUnits,yr=Array(Pr).map(function(){return null});function je(m){z.call(this),this.mipmask=0,this.internalformat=un,this.id=kr++,this.refCount=1,this.target=m,this.texture=a.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new fr,I.profile&&(this.stats={size:0})}function Ur(m){a.activeTexture(li),a.bindTexture(m.target,m.texture)}function rr(){var m=yr[0];m?a.bindTexture(m.target,m.texture):a.bindTexture(wt,null)}function De(m){var F=m.texture;c(F,"must not double destroy texture");var O=m.unit,ye=m.target;O>=0&&(a.activeTexture(li+O),a.bindTexture(ye,null),yr[O]=null),a.deleteTexture(F),m.texture=null,m.params=null,m.pixels=null,m.refCount=0,delete Nr[m.id],R.textureCount--}n(je.prototype,{bind:function(){var m=this;m.bindCount+=1;var F=m.unit;if(F<0){for(var O=0;O<Pr;++O){var ye=yr[O];if(ye){if(ye.bindCount>0)continue;ye.unit=-1}yr[O]=m,F=O;break}F>=Pr&&c.raise("insufficient number of texture units"),I.profile&&R.maxTextureUnits<F+1&&(R.maxTextureUnits=F+1),m.unit=F,a.activeTexture(li+F),a.bindTexture(m.target,m.texture)}return F},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&De(this)}});function We(m,F){var O=new je(wt);Nr[O.id]=O,R.textureCount++;function ye(l,y){var T=O.texInfo;fr.call(T);var S=Xe();return typeof l=="number"?typeof y=="number"?$e(S,l|0,y|0):$e(S,l|0,l|0):l?(c.type(l,"object","invalid arguments to regl.texture"),Ar(T,l),Ve(S,l)):$e(S,1,1),T.genMipmaps&&(S.mipmask=(S.width<<1)-1),O.mipmask=S.mipmask,$(O,S),c.texture2D(T,S,_),O.internalformat=S.internalformat,ye.width=S.width,ye.height=S.height,Ur(O),dr(S,wt),Cr(T,wt),rr(),Sr(S),I.profile&&(O.stats.size=pa(O.internalformat,O.type,S.width,S.height,T.genMipmaps,!1)),ye.format=Z[O.internalformat],ye.type=me[O.type],ye.mag=V[T.magFilter],ye.min=he[T.minFilter],ye.wrapS=se[T.wrapS],ye.wrapT=se[T.wrapT],ye}function Ye(l,y,T,S){c(!!l,"must specify image data");var x=y|0,b=T|0,E=S|0,h=ce();return $(h,O),h.width=0,h.height=0,le(h,l),h.width=h.width||(O.width>>E)-x,h.height=h.height||(O.height>>E)-b,c(O.type===h.type&&O.format===h.format&&O.internalformat===h.internalformat,"incompatible format for texture.subimage"),c(x>=0&&b>=0&&x+h.width<=O.width&&b+h.height<=O.height,"texture.subimage write out of bounds"),c(O.mipmask&1<<E,"missing mipmap data"),c(h.data||h.element||h.needsCopy,"missing image data"),Ur(O),Ue(h,wt,x,b,E),rr(),pe(h),ye}function d(l,y){var T=l|0,S=y|0||T;if(T===O.width&&S===O.height)return ye;ye.width=O.width=T,ye.height=O.height=S,Ur(O);for(var x=0;O.mipmask>>x;++x){var b=T>>x,E=S>>x;if(!b||!E)break;a.texImage2D(wt,x,O.format,b,E,0,O.format,O.type,null)}return rr(),I.profile&&(O.stats.size=pa(O.internalformat,O.type,T,S,!1,!1)),ye}return ye(m,F),ye.subimage=Ye,ye.resize=d,ye._reglType="texture2d",ye._texture=O,I.profile&&(ye.stats=O.stats),ye.destroy=function(){O.decRef()},ye}function Ze(m,F,O,ye,Ye,d){var l=new je(_o);Nr[l.id]=l,R.cubeCount++;var y=new Array(6);function T(b,E,h,g,p,L){var C,U=l.texInfo;for(fr.call(U),C=0;C<6;++C)y[C]=Xe();if(typeof b=="number"||!b){var j=b|0||1;for(C=0;C<6;++C)$e(y[C],j,j)}else if(typeof b=="object")if(E)Ve(y[0],b),Ve(y[1],E),Ve(y[2],h),Ve(y[3],g),Ve(y[4],p),Ve(y[5],L);else if(Ar(U,b),be(l,b),"faces"in b){var ie=b.faces;for(c(Array.isArray(ie)&&ie.length===6,"cube faces must be a length 6 array"),C=0;C<6;++C)c(typeof ie[C]=="object"&&!!ie[C],"invalid input for cube map face"),$(y[C],l),Ve(y[C],ie[C])}else for(C=0;C<6;++C)Ve(y[C],b);else c.raise("invalid arguments to cube map");for($(l,y[0]),c.optional(function(){_.npotTextureCube||c(ol(l.width)&&ol(l.height),"your browser does not support non power or two texture dimensions")}),U.genMipmaps?l.mipmask=(y[0].width<<1)-1:l.mipmask=y[0].mipmask,c.textureCube(l,U,y,_),l.internalformat=y[0].internalformat,T.width=y[0].width,T.height=y[0].height,Ur(l),C=0;C<6;++C)dr(y[C],la+C);for(Cr(U,_o),rr(),I.profile&&(l.stats.size=pa(l.internalformat,l.type,T.width,T.height,U.genMipmaps,!0)),T.format=Z[l.internalformat],T.type=me[l.type],T.mag=V[U.magFilter],T.min=he[U.minFilter],T.wrapS=se[U.wrapS],T.wrapT=se[U.wrapT],C=0;C<6;++C)Sr(y[C]);return T}function S(b,E,h,g,p){c(!!E,"must specify image data"),c(typeof b=="number"&&b===(b|0)&&b>=0&&b<6,"invalid face");var L=h|0,C=g|0,U=p|0,j=ce();return $(j,l),j.width=0,j.height=0,le(j,E),j.width=j.width||(l.width>>U)-L,j.height=j.height||(l.height>>U)-C,c(l.type===j.type&&l.format===j.format&&l.internalformat===j.internalformat,"incompatible format for texture.subimage"),c(L>=0&&C>=0&&L+j.width<=l.width&&C+j.height<=l.height,"texture.subimage write out of bounds"),c(l.mipmask&1<<U,"missing mipmap data"),c(j.data||j.element||j.needsCopy,"missing image data"),Ur(l),Ue(j,la+b,L,C,U),rr(),pe(j),T}function x(b){var E=b|0;if(E!==l.width){T.width=l.width=E,T.height=l.height=E,Ur(l);for(var h=0;h<6;++h)for(var g=0;l.mipmask>>g;++g)a.texImage2D(la+h,g,l.format,E>>g,E>>g,0,l.format,l.type,null);return rr(),I.profile&&(l.stats.size=pa(l.internalformat,l.type,T.width,T.height,!1,!0)),T}}return T(m,F,O,ye,Ye,d),T.subimage=S,T.resize=x,T._reglType="textureCube",T._texture=l,I.profile&&(T.stats=l.stats),T.destroy=function(){l.decRef()},T}function br(){for(var m=0;m<Pr;++m)a.activeTexture(li+m),a.bindTexture(wt,null),yr[m]=null;ft(Nr).forEach(De),R.cubeCount=0,R.textureCount=0}I.profile&&(R.getTotalTextureSize=function(){var m=0;return Object.keys(Nr).forEach(function(F){m+=Nr[F].stats.size}),m});function Ct(){for(var m=0;m<Pr;++m){var F=yr[m];F&&(F.bindCount=0,F.unit=-1,yr[m]=null)}ft(Nr).forEach(function(O){O.texture=a.createTexture(),a.bindTexture(O.target,O.texture);for(var ye=0;ye<32;++ye)if((O.mipmask&1<<ye)!=0)if(O.target===wt)a.texImage2D(wt,ye,O.internalformat,O.width>>ye,O.height>>ye,0,O.internalformat,O.type,null);else for(var Ye=0;Ye<6;++Ye)a.texImage2D(la+Ye,ye,O.internalformat,O.width>>ye,O.height>>ye,0,O.internalformat,O.type,null);Cr(O.texInfo,O.target)})}function gn(){for(var m=0;m<Pr;++m){var F=yr[m];F&&(F.bindCount=0,F.unit=-1,yr[m]=null),a.activeTexture(li+m),a.bindTexture(wt,null),a.bindTexture(_o,null)}}return{create2D:We,createCube:Ze,clear:br,getTexture:function(m){return null},restore:Ct,refresh:gn}}var Wt=36161,ma=32854,Fl=32855,Nl=36194,Il=33189,Ml=36168,Gl=34041,Bl=35907,Pl=34836,Ul=34842,$l=34843,xt=[];xt[ma]=2,xt[Fl]=2,xt[Nl]=2,xt[Il]=2,xt[Ml]=1,xt[Gl]=4,xt[Bl]=4,xt[Pl]=16,xt[Ul]=8,xt[$l]=6;function Hl(a,s,_){return xt[a]*s*_}var Th=function(a,s,_,D,H){var R={rgba4:ma,rgb565:Nl,"rgb5 a1":Fl,depth:Il,stencil:Ml,"depth stencil":Gl};s.ext_srgb&&(R.srgba=Bl),s.ext_color_buffer_half_float&&(R.rgba16f=Ul,R.rgb16f=$l),s.webgl_color_buffer_float&&(R.rgba32f=Pl);var I=[];Object.keys(R).forEach(function(K){var ee=R[K];I[ee]=K});var q=0,X={};function re(K){this.id=q++,this.refCount=1,this.renderbuffer=K,this.format=ma,this.width=0,this.height=0,H.profile&&(this.stats={size:0})}re.prototype.decRef=function(){--this.refCount<=0&&ne(this)};function ne(K){var ee=K.renderbuffer;c(ee,"must not double destroy renderbuffer"),a.bindRenderbuffer(Wt,null),a.deleteRenderbuffer(ee),K.renderbuffer=null,K.refCount=0,delete X[K.id],D.renderbufferCount--}function te(K,ee){var w=new re(a.createRenderbuffer());X[w.id]=w,D.renderbufferCount++;function N(me,V){var he=0,se=0,Le=ma;if(typeof me=="object"&&me){var z=me;if("shape"in z){var $=z.shape;c(Array.isArray($)&&$.length>=2,"invalid renderbuffer shape"),he=$[0]|0,se=$[1]|0}else"radius"in z&&(he=se=z.radius|0),"width"in z&&(he=z.width|0),"height"in z&&(se=z.height|0);"format"in z&&(c.parameter(z.format,R,"invalid renderbuffer format"),Le=R[z.format])}else typeof me=="number"?(he=me|0,typeof V=="number"?se=V|0:se=he):me?c.raise("invalid arguments to renderbuffer constructor"):he=se=1;if(c(he>0&&se>0&&he<=_.maxRenderbufferSize&&se<=_.maxRenderbufferSize,"invalid renderbuffer size"),!(he===w.width&&se===w.height&&Le===w.format))return N.width=w.width=he,N.height=w.height=se,w.format=Le,a.bindRenderbuffer(Wt,w.renderbuffer),a.renderbufferStorage(Wt,Le,he,se),c(a.getError()===0,"invalid render buffer format"),H.profile&&(w.stats.size=Hl(w.format,w.width,w.height)),N.format=I[w.format],N}function Z(me,V){var he=me|0,se=V|0||he;return he===w.width&&se===w.height||(c(he>0&&se>0&&he<=_.maxRenderbufferSize&&se<=_.maxRenderbufferSize,"invalid renderbuffer size"),N.width=w.width=he,N.height=w.height=se,a.bindRenderbuffer(Wt,w.renderbuffer),a.renderbufferStorage(Wt,w.format,he,se),c(a.getError()===0,"invalid render buffer format"),H.profile&&(w.stats.size=Hl(w.format,w.width,w.height))),N}return N(K,ee),N.resize=Z,N._reglType="renderbuffer",N._renderbuffer=w,H.profile&&(N.stats=w.stats),N.destroy=function(){w.decRef()},N}H.profile&&(D.getTotalRenderbufferSize=function(){var K=0;return Object.keys(X).forEach(function(ee){K+=X[ee].stats.size}),K});function oe(){ft(X).forEach(function(K){K.renderbuffer=a.createRenderbuffer(),a.bindRenderbuffer(Wt,K.renderbuffer),a.renderbufferStorage(Wt,K.format,K.width,K.height)}),a.bindRenderbuffer(Wt,null)}return{create:te,clear:function(){ft(X).forEach(ne)},restore:oe}},Ft=36160,Io=36161,cn=3553,va=34069,zl=36064,jl=36096,Yl=36128,Vl=33306,Wl=36053,wh=36054,Sh=36055,Ch=36057,kh=36061,Lh=36193,Oh=5121,Rh=5126,Xl=6407,ql=6408,Dh=6402,Fh=[Xl,ql],Mo=[];Mo[ql]=4,Mo[Xl]=3;var ga=[];ga[Oh]=1,ga[Rh]=4,ga[Lh]=2;var Nh=32854,Ih=32855,Mh=36194,Gh=33189,Bh=36168,Kl=34041,Ph=35907,Uh=34836,$h=34842,Hh=34843,zh=[Nh,Ih,Mh,Ph,$h,Hh,Uh],Mn={};Mn[Wl]="complete",Mn[wh]="incomplete attachment",Mn[Ch]="incomplete dimensions",Mn[Sh]="incomplete, missing attachment",Mn[kh]="unsupported";function jh(a,s,_,D,H,R){var I={cur:null,next:null,dirty:!1,setFBO:null},q=["rgba"],X=["rgba4","rgb565","rgb5 a1"];s.ext_srgb&&X.push("srgba"),s.ext_color_buffer_half_float&&X.push("rgba16f","rgb16f"),s.webgl_color_buffer_float&&X.push("rgba32f");var re=["uint8"];s.oes_texture_half_float&&re.push("half float","float16"),s.oes_texture_float&&re.push("float","float32");function ne(Q,le,ue){this.target=Q,this.texture=le,this.renderbuffer=ue;var Ue=0,Be=0;le?(Ue=le.width,Be=le.height):ue&&(Ue=ue.width,Be=ue.height),this.width=Ue,this.height=Be}function te(Q){Q&&(Q.texture&&Q.texture._texture.decRef(),Q.renderbuffer&&Q.renderbuffer._renderbuffer.decRef())}function oe(Q,le,ue){if(!!Q)if(Q.texture){var Ue=Q.texture._texture,Be=Math.max(1,Ue.width),ce=Math.max(1,Ue.height);c(Be===le&&ce===ue,"inconsistent width/height for supplied texture"),Ue.refCount+=1}else{var pe=Q.renderbuffer._renderbuffer;c(pe.width===le&&pe.height===ue,"inconsistent width/height for renderbuffer"),pe.refCount+=1}}function K(Q,le){le&&(le.texture?a.framebufferTexture2D(Ft,Q,le.target,le.texture._texture.texture,0):a.framebufferRenderbuffer(Ft,Q,Io,le.renderbuffer._renderbuffer.renderbuffer))}function ee(Q){var le=cn,ue=null,Ue=null,Be=Q;typeof Q=="object"&&(Be=Q.data,"target"in Q&&(le=Q.target|0)),c.type(Be,"function","invalid attachment data");var ce=Be._reglType;return ce==="texture2d"?(ue=Be,c(le===cn)):ce==="textureCube"?(ue=Be,c(le>=va&&le<va+6,"invalid cube map target")):ce==="renderbuffer"?(Ue=Be,le=Io):c.raise("invalid regl object for attachment"),new ne(le,ue,Ue)}function w(Q,le,ue,Ue,Be){if(ue){var ce=D.create2D({width:Q,height:le,format:Ue,type:Be});return ce._texture.refCount=0,new ne(cn,ce,null)}else{var pe=H.create({width:Q,height:le,format:Ue});return pe._renderbuffer.refCount=0,new ne(Io,null,pe)}}function N(Q){return Q&&(Q.texture||Q.renderbuffer)}function Z(Q,le,ue){Q&&(Q.texture?Q.texture.resize(le,ue):Q.renderbuffer&&Q.renderbuffer.resize(le,ue),Q.width=le,Q.height=ue)}var me=0,V={};function he(){this.id=me++,V[this.id]=this,this.framebuffer=a.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function se(Q){Q.colorAttachments.forEach(te),te(Q.depthAttachment),te(Q.stencilAttachment),te(Q.depthStencilAttachment)}function Le(Q){var le=Q.framebuffer;c(le,"must not double destroy framebuffer"),a.deleteFramebuffer(le),Q.framebuffer=null,R.framebufferCount--,delete V[Q.id]}function z(Q){var le;a.bindFramebuffer(Ft,Q.framebuffer);var ue=Q.colorAttachments;for(le=0;le<ue.length;++le)K(zl+le,ue[le]);for(le=ue.length;le<_.maxColorAttachments;++le)a.framebufferTexture2D(Ft,zl+le,cn,null,0);a.framebufferTexture2D(Ft,Vl,cn,null,0),a.framebufferTexture2D(Ft,jl,cn,null,0),a.framebufferTexture2D(Ft,Yl,cn,null,0),K(jl,Q.depthAttachment),K(Yl,Q.stencilAttachment),K(Vl,Q.depthStencilAttachment);var Ue=a.checkFramebufferStatus(Ft);!a.isContextLost()&&Ue!==Wl&&c.raise("framebuffer configuration not supported, status = "+Mn[Ue]),a.bindFramebuffer(Ft,I.next?I.next.framebuffer:null),I.cur=I.next,a.getError()}function $(Q,le){var ue=new he;R.framebufferCount++;function Ue(ce,pe){var Ne;c(I.next!==ue,"can not update framebuffer which is currently in use");var $e=0,Ve=0,dr=!0,hr=!0,Xe=null,Sr=!0,fr="rgba",Ar="uint8",Cr=1,kr=null,Nr=null,Pr=null,yr=!1;if(typeof ce=="number")$e=ce|0,Ve=pe|0||$e;else if(!ce)$e=Ve=1;else{c.type(ce,"object","invalid arguments for framebuffer");var je=ce;if("shape"in je){var Ur=je.shape;c(Array.isArray(Ur)&&Ur.length>=2,"invalid shape for framebuffer"),$e=Ur[0],Ve=Ur[1]}else"radius"in je&&($e=Ve=je.radius),"width"in je&&($e=je.width),"height"in je&&(Ve=je.height);("color"in je||"colors"in je)&&(Xe=je.color||je.colors,Array.isArray(Xe)&&c(Xe.length===1||s.webgl_draw_buffers,"multiple render targets not supported")),Xe||("colorCount"in je&&(Cr=je.colorCount|0,c(Cr>0,"invalid color buffer count")),"colorTexture"in je&&(Sr=!!je.colorTexture,fr="rgba4"),"colorType"in je&&(Ar=je.colorType,Sr?(c(s.oes_texture_float||!(Ar==="float"||Ar==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),c(s.oes_texture_half_float||!(Ar==="half float"||Ar==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Ar==="half float"||Ar==="float16"?(c(s.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),fr="rgba16f"):(Ar==="float"||Ar==="float32")&&(c(s.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),fr="rgba32f"),c.oneOf(Ar,re,"invalid color type")),"colorFormat"in je&&(fr=je.colorFormat,q.indexOf(fr)>=0?Sr=!0:X.indexOf(fr)>=0?Sr=!1:c.optional(function(){Sr?c.oneOf(je.colorFormat,q,"invalid color format for texture"):c.oneOf(je.colorFormat,X,"invalid color format for renderbuffer")}))),("depthTexture"in je||"depthStencilTexture"in je)&&(yr=!!(je.depthTexture||je.depthStencilTexture),c(!yr||s.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in je&&(typeof je.depth=="boolean"?dr=je.depth:(kr=je.depth,hr=!1)),"stencil"in je&&(typeof je.stencil=="boolean"?hr=je.stencil:(Nr=je.stencil,dr=!1)),"depthStencil"in je&&(typeof je.depthStencil=="boolean"?dr=hr=je.depthStencil:(Pr=je.depthStencil,dr=!1,hr=!1))}var rr=null,De=null,We=null,Ze=null;if(Array.isArray(Xe))rr=Xe.map(ee);else if(Xe)rr=[ee(Xe)];else for(rr=new Array(Cr),Ne=0;Ne<Cr;++Ne)rr[Ne]=w($e,Ve,Sr,fr,Ar);c(s.webgl_draw_buffers||rr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),c(rr.length<=_.maxColorAttachments,"too many color attachments, not supported"),$e=$e||rr[0].width,Ve=Ve||rr[0].height,kr?De=ee(kr):dr&&!hr&&(De=w($e,Ve,yr,"depth","uint32")),Nr?We=ee(Nr):hr&&!dr&&(We=w($e,Ve,!1,"stencil","uint8")),Pr?Ze=ee(Pr):!kr&&!Nr&&hr&&dr&&(Ze=w($e,Ve,yr,"depth stencil","depth stencil")),c(!!kr+!!Nr+!!Pr<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var br=null;for(Ne=0;Ne<rr.length;++Ne)if(oe(rr[Ne],$e,Ve),c(!rr[Ne]||rr[Ne].texture&&Fh.indexOf(rr[Ne].texture._texture.format)>=0||rr[Ne].renderbuffer&&zh.indexOf(rr[Ne].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ne+" is invalid"),rr[Ne]&&rr[Ne].texture){var Ct=Mo[rr[Ne].texture._texture.format]*ga[rr[Ne].texture._texture.type];br===null?br=Ct:c(br===Ct,"all color attachments much have the same number of bits per pixel.")}return oe(De,$e,Ve),c(!De||De.texture&&De.texture._texture.format===Dh||De.renderbuffer&&De.renderbuffer._renderbuffer.format===Gh,"invalid depth attachment for framebuffer object"),oe(We,$e,Ve),c(!We||We.renderbuffer&&We.renderbuffer._renderbuffer.format===Bh,"invalid stencil attachment for framebuffer object"),oe(Ze,$e,Ve),c(!Ze||Ze.texture&&Ze.texture._texture.format===Kl||Ze.renderbuffer&&Ze.renderbuffer._renderbuffer.format===Kl,"invalid depth-stencil attachment for framebuffer object"),se(ue),ue.width=$e,ue.height=Ve,ue.colorAttachments=rr,ue.depthAttachment=De,ue.stencilAttachment=We,ue.depthStencilAttachment=Ze,Ue.color=rr.map(N),Ue.depth=N(De),Ue.stencil=N(We),Ue.depthStencil=N(Ze),Ue.width=ue.width,Ue.height=ue.height,z(ue),Ue}function Be(ce,pe){c(I.next!==ue,"can not resize a framebuffer which is currently in use");var Ne=Math.max(ce|0,1),$e=Math.max(pe|0||Ne,1);if(Ne===ue.width&&$e===ue.height)return Ue;for(var Ve=ue.colorAttachments,dr=0;dr<Ve.length;++dr)Z(Ve[dr],Ne,$e);return Z(ue.depthAttachment,Ne,$e),Z(ue.stencilAttachment,Ne,$e),Z(ue.depthStencilAttachment,Ne,$e),ue.width=Ue.width=Ne,ue.height=Ue.height=$e,z(ue),Ue}return Ue(Q,le),n(Ue,{resize:Be,_reglType:"framebuffer",_framebuffer:ue,destroy:function(){Le(ue),se(ue)},use:function(ce){I.setFBO({framebuffer:Ue},ce)}})}function be(Q){var le=Array(6);function ue(Be){var ce;c(le.indexOf(I.next)<0,"can not update framebuffer which is currently in use");var pe={color:null},Ne=0,$e=null,Ve="rgba",dr="uint8",hr=1;if(typeof Be=="number")Ne=Be|0;else if(!Be)Ne=1;else{c.type(Be,"object","invalid arguments for framebuffer");var Xe=Be;if("shape"in Xe){var Sr=Xe.shape;c(Array.isArray(Sr)&&Sr.length>=2,"invalid shape for framebuffer"),c(Sr[0]===Sr[1],"cube framebuffer must be square"),Ne=Sr[0]}else"radius"in Xe&&(Ne=Xe.radius|0),"width"in Xe?(Ne=Xe.width|0,"height"in Xe&&c(Xe.height===Ne,"must be square")):"height"in Xe&&(Ne=Xe.height|0);("color"in Xe||"colors"in Xe)&&($e=Xe.color||Xe.colors,Array.isArray($e)&&c($e.length===1||s.webgl_draw_buffers,"multiple render targets not supported")),$e||("colorCount"in Xe&&(hr=Xe.colorCount|0,c(hr>0,"invalid color buffer count")),"colorType"in Xe&&(c.oneOf(Xe.colorType,re,"invalid color type"),dr=Xe.colorType),"colorFormat"in Xe&&(Ve=Xe.colorFormat,c.oneOf(Xe.colorFormat,q,"invalid color format for texture"))),"depth"in Xe&&(pe.depth=Xe.depth),"stencil"in Xe&&(pe.stencil=Xe.stencil),"depthStencil"in Xe&&(pe.depthStencil=Xe.depthStencil)}var fr;if($e)if(Array.isArray($e))for(fr=[],ce=0;ce<$e.length;++ce)fr[ce]=$e[ce];else fr=[$e];else{fr=Array(hr);var Ar={radius:Ne,format:Ve,type:dr};for(ce=0;ce<hr;++ce)fr[ce]=D.createCube(Ar)}for(pe.color=Array(fr.length),ce=0;ce<fr.length;++ce){var Cr=fr[ce];c(typeof Cr=="function"&&Cr._reglType==="textureCube","invalid cube map"),Ne=Ne||Cr.width,c(Cr.width===Ne&&Cr.height===Ne,"invalid cube map shape"),pe.color[ce]={target:va,data:fr[ce]}}for(ce=0;ce<6;++ce){for(var kr=0;kr<fr.length;++kr)pe.color[kr].target=va+ce;ce>0&&(pe.depth=le[0].depth,pe.stencil=le[0].stencil,pe.depthStencil=le[0].depthStencil),le[ce]?le[ce](pe):le[ce]=$(pe)}return n(ue,{width:Ne,height:Ne,color:fr})}function Ue(Be){var ce,pe=Be|0;if(c(pe>0&&pe<=_.maxCubeMapSize,"invalid radius for cube fbo"),pe===ue.width)return ue;var Ne=ue.color;for(ce=0;ce<Ne.length;++ce)Ne[ce].resize(pe);for(ce=0;ce<6;++ce)le[ce].resize(pe);return ue.width=ue.height=pe,ue}return ue(Q),n(ue,{faces:le,resize:Ue,_reglType:"framebufferCube",destroy:function(){le.forEach(function(Be){Be.destroy()})}})}function fe(){I.cur=null,I.next=null,I.dirty=!0,ft(V).forEach(function(Q){Q.framebuffer=a.createFramebuffer(),z(Q)})}return n(I,{getFramebuffer:function(Q){if(typeof Q=="function"&&Q._reglType==="framebuffer"){var le=Q._framebuffer;if(le instanceof he)return le}return null},create:$,createCube:be,clear:function(){ft(V).forEach(Le)},restore:fe})}var Yh=5126,Ql=34962,_a=34963,Zl=["attributes","elements","offset","count","primitive","instances"];function Go(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Yh,this.offset=0,this.stride=0,this.divisor=0}function Vh(a,s,_,D,H,R,I){for(var q=_.maxAttributes,X=new Array(q),re=0;re<q;++re)X[re]=new Go;var ne=0,te={},oe={Record:Go,scope:{},state:X,currentVAO:null,targetVAO:null,restore:ee()?se:function(){},createVAO:Le,getVAO:N,destroyBuffer:K,setVAO:ee()?Z:me,clear:ee()?V:function(){}};function K(z){for(var $=0;$<X.length;++$){var be=X[$];be.buffer===z&&(a.disableVertexAttribArray($),be.buffer=null)}}function ee(){return s.oes_vertex_array_object}function w(){return s.angle_instanced_arrays}function N(z){return typeof z=="function"&&z._vao?z._vao:null}function Z(z){if(z!==oe.currentVAO){var $=ee();z?$.bindVertexArrayOES(z.vao):$.bindVertexArrayOES(null),oe.currentVAO=z}}function me(z){if(z!==oe.currentVAO){if(z)z.bindAttrs();else{for(var $=w(),be=0;be<X.length;++be){var fe=X[be];fe.buffer?(a.enableVertexAttribArray(be),fe.buffer.bind(),a.vertexAttribPointer(be,fe.size,fe.type,fe.normalized,fe.stride,fe.offfset),$&&fe.divisor&&$.vertexAttribDivisorANGLE(be,fe.divisor)):(a.disableVertexAttribArray(be),a.vertexAttrib4f(be,fe.x,fe.y,fe.z,fe.w))}I.elements?a.bindBuffer(_a,I.elements.buffer.buffer):a.bindBuffer(_a,null)}oe.currentVAO=z}}function V(){ft(te).forEach(function(z){z.destroy()})}function he(){this.id=++ne,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var z=ee();z?this.vao=z.createVertexArrayOES():this.vao=null,te[this.id]=this,this.buffers=[]}he.prototype.bindAttrs=function(){for(var z=w(),$=this.attributes,be=0;be<$.length;++be){var fe=$[be];fe.buffer?(a.enableVertexAttribArray(be),a.bindBuffer(Ql,fe.buffer.buffer),a.vertexAttribPointer(be,fe.size,fe.type,fe.normalized,fe.stride,fe.offset),z&&fe.divisor&&z.vertexAttribDivisorANGLE(be,fe.divisor)):(a.disableVertexAttribArray(be),a.vertexAttrib4f(be,fe.x,fe.y,fe.z,fe.w))}for(var Q=$.length;Q<q;++Q)a.disableVertexAttribArray(Q);var le=R.getElements(this.elements);le?a.bindBuffer(_a,le.buffer.buffer):a.bindBuffer(_a,null)},he.prototype.refresh=function(){var z=ee();z&&(z.bindVertexArrayOES(this.vao),this.bindAttrs(),oe.currentVAO=null,z.bindVertexArrayOES(null))},he.prototype.destroy=function(){if(this.vao){var z=ee();this===oe.currentVAO&&(oe.currentVAO=null,z.bindVertexArrayOES(null)),z.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),te[this.id]&&(delete te[this.id],D.vaoCount-=1)};function se(){var z=ee();z&&ft(te).forEach(function($){$.refresh()})}function Le(z){var $=new he;D.vaoCount+=1;function be(fe){var Q;if(Array.isArray(fe))Q=fe,$.elements&&$.ownsElements&&$.elements.destroy(),$.elements=null,$.ownsElements=!1,$.offset=0,$.count=0,$.instances=-1,$.primitive=4;else{if(c(typeof fe=="object","invalid arguments for create vao"),c("attributes"in fe,"must specify attributes for vao"),fe.elements){var le=fe.elements;$.ownsElements?typeof le=="function"&&le._reglType==="elements"?($.elements.destroy(),$.ownsElements=!1):($.elements(le),$.ownsElements=!1):R.getElements(fe.elements)?($.elements=fe.elements,$.ownsElements=!1):($.elements=R.create(fe.elements),$.ownsElements=!0)}else $.elements=null,$.ownsElements=!1;Q=fe.attributes,$.offset=0,$.count=-1,$.instances=-1,$.primitive=4,$.elements&&($.count=$.elements._elements.vertCount,$.primitive=$.elements._elements.primType),"offset"in fe&&($.offset=fe.offset|0),"count"in fe&&($.count=fe.count|0),"instances"in fe&&($.instances=fe.instances|0),"primitive"in fe&&(c(fe.primitive in Vt,"bad primitive type: "+fe.primitive),$.primitive=Vt[fe.primitive]),c.optional(()=>{for(var dr=Object.keys(fe),hr=0;hr<dr.length;++hr)c(Zl.indexOf(dr[hr])>=0,'invalid option for vao: "'+dr[hr]+'" valid options are '+Zl)}),c(Array.isArray(Q),"attributes must be an array")}c(Q.length<q,"too many attributes"),c(Q.length>0,"must specify at least one attribute");var ue={},Ue=$.attributes;Ue.length=Q.length;for(var Be=0;Be<Q.length;++Be){var ce=Q[Be],pe=Ue[Be]=new Go,Ne=ce.data||ce;if(Array.isArray(Ne)||t(Ne)||bt(Ne)){var $e;$.buffers[Be]&&($e=$.buffers[Be],t(Ne)&&$e._buffer.byteLength>=Ne.byteLength?$e.subdata(Ne):($e.destroy(),$.buffers[Be]=null)),$.buffers[Be]||($e=$.buffers[Be]=H.create(ce,Ql,!1,!0)),pe.buffer=H.getBuffer($e),pe.size=pe.buffer.dimension|0,pe.normalized=!1,pe.type=pe.buffer.dtype,pe.offset=0,pe.stride=0,pe.divisor=0,pe.state=1,ue[Be]=1}else H.getBuffer(ce)?(pe.buffer=H.getBuffer(ce),pe.size=pe.buffer.dimension|0,pe.normalized=!1,pe.type=pe.buffer.dtype,pe.offset=0,pe.stride=0,pe.divisor=0,pe.state=1):H.getBuffer(ce.buffer)?(pe.buffer=H.getBuffer(ce.buffer),pe.size=(+ce.size||pe.buffer.dimension)|0,pe.normalized=!!ce.normalized||!1,"type"in ce?(c.parameter(ce.type,fn,"invalid buffer type"),pe.type=fn[ce.type]):pe.type=pe.buffer.dtype,pe.offset=(ce.offset||0)|0,pe.stride=(ce.stride||0)|0,pe.divisor=(ce.divisor||0)|0,pe.state=1,c(pe.size>=1&&pe.size<=4,"size must be between 1 and 4"),c(pe.offset>=0,"invalid offset"),c(pe.stride>=0&&pe.stride<=255,"stride must be between 0 and 255"),c(pe.divisor>=0,"divisor must be positive"),c(!pe.divisor||!!s.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in ce?(c(Be>0,"first attribute must not be a constant"),pe.x=+ce.x||0,pe.y=+ce.y||0,pe.z=+ce.z||0,pe.w=+ce.w||0,pe.state=2):c(!1,"invalid attribute spec for location "+Be)}for(var Ve=0;Ve<$.buffers.length;++Ve)!ue[Ve]&&$.buffers[Ve]&&($.buffers[Ve].destroy(),$.buffers[Ve]=null);return $.refresh(),be}return be.destroy=function(){for(var fe=0;fe<$.buffers.length;++fe)$.buffers[fe]&&$.buffers[fe].destroy();$.buffers.length=0,$.ownsElements&&($.elements.destroy(),$.elements=null,$.ownsElements=!1),$.destroy()},be._vao=$,be._reglType="vao",be(z)}return oe}var Jl=35632,Wh=35633,Xh=35718,qh=35721;function Kh(a,s,_,D){var H={},R={};function I(w,N,Z,me){this.name=w,this.id=N,this.location=Z,this.info=me}function q(w,N){for(var Z=0;Z<w.length;++Z)if(w[Z].id===N.id){w[Z].location=N.location;return}w.push(N)}function X(w,N,Z){var me=w===Jl?H:R,V=me[N];if(!V){var he=s.str(N);V=a.createShader(w),a.shaderSource(V,he),a.compileShader(V),c.shaderError(a,V,he,w,Z),me[N]=V}return V}var re={},ne=[],te=0;function oe(w,N){this.id=te++,this.fragId=w,this.vertId=N,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,D.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function K(w,N,Z){var me,V,he=X(Jl,w.fragId),se=X(Wh,w.vertId),Le=w.program=a.createProgram();if(a.attachShader(Le,he),a.attachShader(Le,se),Z)for(me=0;me<Z.length;++me){var z=Z[me];a.bindAttribLocation(Le,z[0],z[1])}a.linkProgram(Le),c.linkError(a,Le,s.str(w.fragId),s.str(w.vertId),N);var $=a.getProgramParameter(Le,Xh);D.profile&&(w.stats.uniformsCount=$);var be=w.uniforms;for(me=0;me<$;++me)if(V=a.getActiveUniform(Le,me),V){if(V.size>1)for(var fe=0;fe<V.size;++fe){var Q=V.name.replace("[0]","["+fe+"]");q(be,new I(Q,s.id(Q),a.getUniformLocation(Le,Q),V))}var le=V.name;V.size>1&&(le=le.replace("[0]","")),q(be,new I(le,s.id(le),a.getUniformLocation(Le,le),V))}var ue=a.getProgramParameter(Le,qh);D.profile&&(w.stats.attributesCount=ue);var Ue=w.attributes;for(me=0;me<ue;++me)V=a.getActiveAttrib(Le,me),V&&q(Ue,new I(V.name,s.id(V.name),a.getAttribLocation(Le,V.name),V))}D.profile&&(_.getMaxUniformsCount=function(){var w=0;return ne.forEach(function(N){N.stats.uniformsCount>w&&(w=N.stats.uniformsCount)}),w},_.getMaxAttributesCount=function(){var w=0;return ne.forEach(function(N){N.stats.attributesCount>w&&(w=N.stats.attributesCount)}),w});function ee(){H={},R={};for(var w=0;w<ne.length;++w)K(ne[w],null,ne[w].attributes.map(function(N){return[N.location,N.name]}))}return{clear:function(){var w=a.deleteShader.bind(a);ft(H).forEach(w),H={},ft(R).forEach(w),R={},ne.forEach(function(N){a.deleteProgram(N.program)}),ne.length=0,re={},_.shaderCount=0},program:function(w,N,Z,me){c.command(w>=0,"missing vertex shader",Z),c.command(N>=0,"missing fragment shader",Z);var V=re[N];V||(V=re[N]={});var he=V[w];if(he&&(he.refCount++,!me))return he;var se=new oe(N,w);return _.shaderCount++,K(se,Z,me),he||(V[w]=se),ne.push(se),n(se,{destroy:function(){if(se.refCount--,se.refCount<=0){a.deleteProgram(se.program);var Le=ne.indexOf(se);ne.splice(Le,1),_.shaderCount--}V[se.vertId].refCount<=0&&(a.deleteShader(R[se.vertId]),delete R[se.vertId],delete re[se.fragId][se.vertId]),Object.keys(re[se.fragId]).length||(a.deleteShader(H[se.fragId]),delete H[se.fragId],delete re[se.fragId])}})},restore:ee,shader:X,frag:-1,vert:-1}}var Qh=6408,ui=5121,Zh=3333,ya=5126;function Jh(a,s,_,D,H,R,I){function q(ne){var te;s.next===null?(c(H.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),te=ui):(c(s.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),te=s.next.colorAttachments[0].texture._texture.type,c.optional(function(){R.oes_texture_float?(c(te===ui||te===ya,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),te===ya&&c(I.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):c(te===ui,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var oe=0,K=0,ee=D.framebufferWidth,w=D.framebufferHeight,N=null;t(ne)?N=ne:ne&&(c.type(ne,"object","invalid arguments to regl.read()"),oe=ne.x|0,K=ne.y|0,c(oe>=0&&oe<D.framebufferWidth,"invalid x offset for regl.read"),c(K>=0&&K<D.framebufferHeight,"invalid y offset for regl.read"),ee=(ne.width||D.framebufferWidth-oe)|0,w=(ne.height||D.framebufferHeight-K)|0,N=ne.data||null),N&&(te===ui?c(N instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):te===ya&&c(N instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),c(ee>0&&ee+oe<=D.framebufferWidth,"invalid width for read pixels"),c(w>0&&w+K<=D.framebufferHeight,"invalid height for read pixels"),_();var Z=ee*w*4;return N||(te===ui?N=new Uint8Array(Z):te===ya&&(N=N||new Float32Array(Z))),c.isTypedArray(N,"data buffer for regl.read() must be a typedarray"),c(N.byteLength>=Z,"data buffer for regl.read() too small"),a.pixelStorei(Zh,4),a.readPixels(oe,K,ee,w,Qh,te,N),N}function X(ne){var te;return s.setFBO({framebuffer:ne.framebuffer},function(){te=q(ne)}),te}function re(ne){return!ne||!("framebuffer"in ne)?q(ne):X(ne)}return re}function Gn(a){return Array.prototype.slice.call(a)}function Bn(a){return Gn(a).join("")}function ep(){var a=0,s=[],_=[];function D(te){for(var oe=0;oe<_.length;++oe)if(_[oe]===te)return s[oe];var K="g"+a++;return s.push(K),_.push(te),K}function H(){var te=[];function oe(){te.push.apply(te,Gn(arguments))}var K=[];function ee(){var w="v"+a++;return K.push(w),arguments.length>0&&(te.push(w,"="),te.push.apply(te,Gn(arguments)),te.push(";")),w}return n(oe,{def:ee,toString:function(){return Bn([K.length>0?"var "+K.join(",")+";":"",Bn(te)])}})}function R(){var te=H(),oe=H(),K=te.toString,ee=oe.toString;function w(N,Z){oe(N,Z,"=",te.def(N,Z),";")}return n(function(){te.apply(te,Gn(arguments))},{def:te.def,entry:te,exit:oe,save:w,set:function(N,Z,me){w(N,Z),te(N,Z,"=",me,";")},toString:function(){return K()+ee()}})}function I(){var te=Bn(arguments),oe=R(),K=R(),ee=oe.toString,w=K.toString;return n(oe,{then:function(){return oe.apply(oe,Gn(arguments)),this},else:function(){return K.apply(K,Gn(arguments)),this},toString:function(){var N=w();return N&&(N="else{"+N+"}"),Bn(["if(",te,"){",ee(),"}",N])}})}var q=H(),X={};function re(te,oe){var K=[];function ee(){var V="a"+K.length;return K.push(V),V}oe=oe||0;for(var w=0;w<oe;++w)ee();var N=R(),Z=N.toString,me=X[te]=n(N,{arg:ee,toString:function(){return Bn(["function(",K.join(),"){",Z(),"}"])}});return me}function ne(){var te=['"use strict";',q,"return {"];Object.keys(X).forEach(function(ee){te.push('"',ee,'":',X[ee].toString(),",")}),te.push("}");var oe=Bn(te).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),K=Function.apply(null,s.concat(oe));return K.apply(null,_)}return{global:q,link:D,block:H,proc:re,scope:R,cond:I,compile:ne}}var Pn="xyzw".split(""),eu=5121,Un=1,Bo=2,Po=0,Uo=1,$o=2,Ho=3,ba=4,ru=5,tu=6,nu="dither",iu="blend.enable",au="blend.color",zo="blend.equation",jo="blend.func",ou="depth.enable",fu="depth.func",lu="depth.range",uu="depth.mask",Yo="colorMask",su="cull.enable",cu="cull.face",Vo="frontFace",Wo="lineWidth",du="polygonOffset.enable",Xo="polygonOffset.offset",hu="sample.alpha",pu="sample.enable",qo="sample.coverage",mu="stencil.enable",vu="stencil.mask",Ko="stencil.func",Qo="stencil.opFront",si="stencil.opBack",gu="scissor.enable",xa="scissor.box",Nt="viewport",ci="profile",dn="framebuffer",di="vert",hi="frag",hn="elements",pn="primitive",mn="count",Aa="offset",Ea="instances",pi="vao",Zo="Width",Jo="Height",$n=dn+Zo,Hn=dn+Jo,rp=Nt+Zo,tp=Nt+Jo,_u="drawingBuffer",yu=_u+Zo,bu=_u+Jo,np=[jo,zo,Ko,Qo,si,qo,Nt,xa,Xo],zn=34962,ef=34963,ip=35632,ap=35633,xu=3553,op=34067,fp=2884,lp=3042,up=3024,sp=2960,cp=2929,dp=3089,hp=32823,pp=32926,mp=32928,rf=5126,Ta=35664,wa=35665,Sa=35666,tf=5124,Ca=35667,ka=35668,La=35669,nf=35670,Oa=35671,Ra=35672,Da=35673,mi=35674,vi=35675,gi=35676,_i=35678,yi=35680,af=4,bi=1028,vn=1029,Au=2304,of=2305,vp=32775,gp=32776,_p=519,Xt=7680,Eu=0,Tu=1,wu=32774,yp=513,Su=36160,bp=36064,St={"0":0,"1":1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Cu=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],jn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},qt={"0":0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ku={frag:ip,vert:ap},ff={cw:Au,ccw:of};function Fa(a){return Array.isArray(a)||t(a)||bt(a)}function Lu(a){return a.sort(function(s,_){return s===Nt?-1:_===Nt?1:s<_?-1:1})}function Or(a,s,_,D){this.thisDep=a,this.contextDep=s,this.propDep=_,this.append=D}function Kt(a){return a&&!(a.thisDep||a.contextDep||a.propDep)}function xr(a){return new Or(!1,!1,!1,a)}function tt(a,s){var _=a.type;if(_===Po){var D=a.data.length;return new Or(!0,D>=1,D>=2,s)}else if(_===ba){var H=a.data;return new Or(H.thisDep,H.contextDep,H.propDep,s)}else{if(_===ru)return new Or(!1,!1,!1,s);if(_===tu){for(var R=!1,I=!1,q=!1,X=0;X<a.data.length;++X){var re=a.data[X];if(re.type===Uo)q=!0;else if(re.type===$o)I=!0;else if(re.type===Ho)R=!0;else if(re.type===Po){R=!0;var ne=re.data;ne>=1&&(I=!0),ne>=2&&(q=!0)}else re.type===ba&&(R=R||re.data.thisDep,I=I||re.data.contextDep,q=q||re.data.propDep)}return new Or(R,I,q,s)}else return new Or(_===Ho,_===$o,_===Uo,s)}}var Ou=new Or(!1,!1,!1,function(){});function xp(a,s,_,D,H,R,I,q,X,re,ne,te,oe,K,ee){var w=re.Record,N={add:32774,subtract:32778,"reverse subtract":32779};_.ext_blend_minmax&&(N.min=vp,N.max=gp);var Z=_.angle_instanced_arrays,me=_.webgl_draw_buffers,V=_.oes_vertex_array_object,he={dirty:!0,profile:ee.profile},se={},Le=[],z={},$={};function be(d){return d.replace(".","_")}function fe(d,l,y){var T=be(d);Le.push(d),se[T]=he[T]=!!y,z[T]=l}function Q(d,l,y){var T=be(d);Le.push(d),Array.isArray(y)?(he[T]=y.slice(),se[T]=y.slice()):he[T]=se[T]=y,$[T]=l}fe(nu,up),fe(iu,lp),Q(au,"blendColor",[0,0,0,0]),Q(zo,"blendEquationSeparate",[wu,wu]),Q(jo,"blendFuncSeparate",[Tu,Eu,Tu,Eu]),fe(ou,cp,!0),Q(fu,"depthFunc",yp),Q(lu,"depthRange",[0,1]),Q(uu,"depthMask",!0),Q(Yo,Yo,[!0,!0,!0,!0]),fe(su,fp),Q(cu,"cullFace",vn),Q(Vo,Vo,of),Q(Wo,Wo,1),fe(du,hp),Q(Xo,"polygonOffset",[0,0]),fe(hu,pp),fe(pu,mp),Q(qo,"sampleCoverage",[1,!1]),fe(mu,sp),Q(vu,"stencilMask",-1),Q(Ko,"stencilFunc",[_p,0,-1]),Q(Qo,"stencilOpSeparate",[bi,Xt,Xt,Xt]),Q(si,"stencilOpSeparate",[vn,Xt,Xt,Xt]),fe(gu,dp),Q(xa,"scissor",[0,0,a.drawingBufferWidth,a.drawingBufferHeight]),Q(Nt,Nt,[0,0,a.drawingBufferWidth,a.drawingBufferHeight]);var le={gl:a,context:oe,strings:s,next:se,current:he,draw:te,elements:R,buffer:H,shader:ne,attributes:re.state,vao:re,uniforms:X,framebuffer:q,extensions:_,timer:K,isBufferArgs:Fa},ue={primTypes:Vt,compareFuncs:jn,blendFuncs:St,blendEquations:N,stencilOps:qt,glTypes:fn,orientationType:ff};c.optional(function(){le.isArrayLike=cr}),me&&(ue.backBuffer=[vn],ue.drawBuffer=Wr(D.maxDrawbuffers,function(d){return d===0?[0]:Wr(d,function(l){return bp+l})}));var Ue=0;function Be(){var d=ep(),l=d.link,y=d.global;d.id=Ue++,d.batchId="0";var T=l(le),S=d.shared={props:"a0"};Object.keys(le).forEach(function(g){S[g]=y.def(T,".",g)}),c.optional(function(){d.CHECK=l(c),d.commandStr=c.guessCommand(),d.command=l(d.commandStr),d.assert=function(g,p,L){g("if(!(",p,"))",this.CHECK,".commandRaise(",l(L),",",this.command,");")},ue.invalidBlendCombinations=Cu});var x=d.next={},b=d.current={};Object.keys($).forEach(function(g){Array.isArray(he[g])&&(x[g]=y.def(S.next,".",g),b[g]=y.def(S.current,".",g))});var E=d.constants={};Object.keys(ue).forEach(function(g){E[g]=y.def(JSON.stringify(ue[g]))}),d.invoke=function(g,p){switch(p.type){case Po:var L=["this",S.context,S.props,d.batchId];return g.def(l(p.data),".call(",L.slice(0,Math.max(p.data.length+1,4)),")");case Uo:return g.def(S.props,p.data);case $o:return g.def(S.context,p.data);case Ho:return g.def("this",p.data);case ba:return p.data.append(d,g),p.data.ref;case ru:return p.data.toString();case tu:return p.data.map(function(C){return d.invoke(g,C)})}},d.attribCache={};var h={};return d.scopeAttrib=function(g){var p=s.id(g);if(p in h)return h[p];var L=re.scope[p];L||(L=re.scope[p]=new w);var C=h[p]=l(L);return C},d}function ce(d){var l=d.static,y=d.dynamic,T;if(ci in l){var S=!!l[ci];T=xr(function(b,E){return S}),T.enable=S}else if(ci in y){var x=y[ci];T=tt(x,function(b,E){return b.invoke(E,x)})}return T}function pe(d,l){var y=d.static,T=d.dynamic;if(dn in y){var S=y[dn];return S?(S=q.getFramebuffer(S),c.command(S,"invalid framebuffer object"),xr(function(b,E){var h=b.link(S),g=b.shared;E.set(g.framebuffer,".next",h);var p=g.context;return E.set(p,"."+$n,h+".width"),E.set(p,"."+Hn,h+".height"),h})):xr(function(b,E){var h=b.shared;E.set(h.framebuffer,".next","null");var g=h.context;return E.set(g,"."+$n,g+"."+yu),E.set(g,"."+Hn,g+"."+bu),"null"})}else if(dn in T){var x=T[dn];return tt(x,function(b,E){var h=b.invoke(E,x),g=b.shared,p=g.framebuffer,L=E.def(p,".getFramebuffer(",h,")");c.optional(function(){b.assert(E,"!"+h+"||"+L,"invalid framebuffer object")}),E.set(p,".next",L);var C=g.context;return E.set(C,"."+$n,L+"?"+L+".width:"+C+"."+yu),E.set(C,"."+Hn,L+"?"+L+".height:"+C+"."+bu),L})}else return null}function Ne(d,l,y){var T=d.static,S=d.dynamic;function x(h){if(h in T){var g=T[h];c.commandType(g,"object","invalid "+h,y.commandStr);var p=!0,L=g.x|0,C=g.y|0,U,j;return"width"in g?(U=g.width|0,c.command(U>=0,"invalid "+h,y.commandStr)):p=!1,"height"in g?(j=g.height|0,c.command(j>=0,"invalid "+h,y.commandStr)):p=!1,new Or(!p&&l&&l.thisDep,!p&&l&&l.contextDep,!p&&l&&l.propDep,function(ke,_e){var Y=ke.shared.context,P=U;"width"in g||(P=_e.def(Y,".",$n,"-",L));var Te=j;return"height"in g||(Te=_e.def(Y,".",Hn,"-",C)),[L,C,P,Te]})}else if(h in S){var ie=S[h],Me=tt(ie,function(ke,_e){var Y=ke.invoke(_e,ie);c.optional(function(){ke.assert(_e,Y+"&&typeof "+Y+'==="object"',"invalid "+h)});var P=ke.shared.context,Te=_e.def(Y,".x|0"),xe=_e.def(Y,".y|0"),Ie=_e.def('"width" in ',Y,"?",Y,".width|0:","(",P,".",$n,"-",Te,")"),tr=_e.def('"height" in ',Y,"?",Y,".height|0:","(",P,".",Hn,"-",xe,")");return c.optional(function(){ke.assert(_e,Ie+">=0&&"+tr+">=0","invalid "+h)}),[Te,xe,Ie,tr]});return l&&(Me.thisDep=Me.thisDep||l.thisDep,Me.contextDep=Me.contextDep||l.contextDep,Me.propDep=Me.propDep||l.propDep),Me}else return l?new Or(l.thisDep,l.contextDep,l.propDep,function(ke,_e){var Y=ke.shared.context;return[0,0,_e.def(Y,".",$n),_e.def(Y,".",Hn)]}):null}var b=x(Nt);if(b){var E=b;b=new Or(b.thisDep,b.contextDep,b.propDep,function(h,g){var p=E.append(h,g),L=h.shared.context;return g.set(L,"."+rp,p[2]),g.set(L,"."+tp,p[3]),p})}return{viewport:b,scissor_box:x(xa)}}function $e(d,l){var y=d.static,T=typeof y[hi]=="string"&&typeof y[di]=="string";if(T){if(Object.keys(l.dynamic).length>0)return null;var S=l.static,x=Object.keys(S);if(x.length>0&&typeof S[x[0]]=="number"){for(var b=[],E=0;E<x.length;++E)c(typeof S[x[E]]=="number","must specify all vertex attribute locations when using vaos"),b.push([S[x[E]]|0,x[E]]);return b}}return null}function Ve(d,l,y){var T=d.static,S=d.dynamic;function x(p){if(p in T){var L=s.id(T[p]);c.optional(function(){ne.shader(ku[p],L,c.guessCommand())});var C=xr(function(){return L});return C.id=L,C}else if(p in S){var U=S[p];return tt(U,function(j,ie){var Me=j.invoke(ie,U),ke=ie.def(j.shared.strings,".id(",Me,")");return c.optional(function(){ie(j.shared.shader,".shader(",ku[p],",",ke,",",j.command,");")}),ke})}return null}var b=x(hi),E=x(di),h=null,g;return Kt(b)&&Kt(E)?(h=ne.program(E.id,b.id,null,y),g=xr(function(p,L){return p.link(h)})):g=new Or(b&&b.thisDep||E&&E.thisDep,b&&b.contextDep||E&&E.contextDep,b&&b.propDep||E&&E.propDep,function(p,L){var C=p.shared.shader,U;b?U=b.append(p,L):U=L.def(C,".",hi);var j;E?j=E.append(p,L):j=L.def(C,".",di);var ie=C+".program("+j+","+U;return c.optional(function(){ie+=","+p.command}),L.def(ie+")")}),{frag:b,vert:E,progVar:g,program:h}}function dr(d,l){var y=d.static,T=d.dynamic,S={},x=!1;function b(){if(pi in y){var _e=y[pi];return _e!==null&&re.getVAO(_e)===null&&(_e=re.createVAO(_e)),x=!0,S.vao=_e,xr(function(P){var Te=re.getVAO(_e);return Te?P.link(Te):"null"})}else if(pi in T){x=!0;var Y=T[pi];return tt(Y,function(P,Te){var xe=P.invoke(Te,Y);return Te.def(P.shared.vao+".getVAO("+xe+")")})}return null}var E=b(),h=!1;function g(){if(hn in y){var _e=y[hn];if(S.elements=_e,Fa(_e)){var Y=S.elements=R.create(_e,!0);_e=R.getElements(Y),h=!0}else _e&&(_e=R.getElements(_e),h=!0,c.command(_e,"invalid elements",l.commandStr));var P=xr(function(xe,Ie){if(_e){var tr=xe.link(_e);return xe.ELEMENTS=tr,tr}return xe.ELEMENTS=null,null});return P.value=_e,P}else if(hn in T){h=!0;var Te=T[hn];return tt(Te,function(xe,Ie){var tr=xe.shared,$r=tr.isBufferArgs,_n=tr.elements,It=xe.invoke(Ie,Te),kt=Ie.def("null"),Qt=Ie.def($r,"(",It,")"),yn=xe.cond(Qt).then(kt,"=",_n,".createStream(",It,");").else(kt,"=",_n,".getElements(",It,");");return c.optional(function(){xe.assert(yn.else,"!"+It+"||"+kt,"invalid elements")}),Ie.entry(yn),Ie.exit(xe.cond(Qt).then(_n,".destroyStream(",kt,");")),xe.ELEMENTS=kt,kt})}else if(x)return new Or(E.thisDep,E.contextDep,E.propDep,function(xe,Ie){return Ie.def(xe.shared.vao+".currentVAO?"+xe.shared.elements+".getElements("+xe.shared.vao+".currentVAO.elements):null")});return null}var p=g();function L(){if(pn in y){var _e=y[pn];return S.primitive=_e,c.commandParameter(_e,Vt,"invalid primitve",l.commandStr),xr(function(P,Te){return Vt[_e]})}else if(pn in T){var Y=T[pn];return tt(Y,function(P,Te){var xe=P.constants.primTypes,Ie=P.invoke(Te,Y);return c.optional(function(){P.assert(Te,Ie+" in "+xe,"invalid primitive, must be one of "+Object.keys(Vt))}),Te.def(xe,"[",Ie,"]")})}else{if(h)return Kt(p)?p.value?xr(function(P,Te){return Te.def(P.ELEMENTS,".primType")}):xr(function(){return af}):new Or(p.thisDep,p.contextDep,p.propDep,function(P,Te){var xe=P.ELEMENTS;return Te.def(xe,"?",xe,".primType:",af)});if(x)return new Or(E.thisDep,E.contextDep,E.propDep,function(P,Te){return Te.def(P.shared.vao+".currentVAO?"+P.shared.vao+".currentVAO.primitive:"+af)})}return null}function C(_e,Y){if(_e in y){var P=y[_e]|0;return Y?S.offset=P:S.instances=P,c.command(!Y||P>=0,"invalid "+_e,l.commandStr),xr(function(xe,Ie){return Y&&(xe.OFFSET=P),P})}else if(_e in T){var Te=T[_e];return tt(Te,function(xe,Ie){var tr=xe.invoke(Ie,Te);return Y&&(xe.OFFSET=tr,c.optional(function(){xe.assert(Ie,tr+">=0","invalid "+_e)})),tr})}else if(Y){if(h)return xr(function(xe,Ie){return xe.OFFSET=0,0});if(x)return new Or(E.thisDep,E.contextDep,E.propDep,function(xe,Ie){return Ie.def(xe.shared.vao+".currentVAO?"+xe.shared.vao+".currentVAO.offset:0")})}else if(x)return new Or(E.thisDep,E.contextDep,E.propDep,function(xe,Ie){return Ie.def(xe.shared.vao+".currentVAO?"+xe.shared.vao+".currentVAO.instances:-1")});return null}var U=C(Aa,!0);function j(){if(mn in y){var _e=y[mn]|0;return S.count=_e,c.command(typeof _e=="number"&&_e>=0,"invalid vertex count",l.commandStr),xr(function(){return _e})}else if(mn in T){var Y=T[mn];return tt(Y,function(Ie,tr){var $r=Ie.invoke(tr,Y);return c.optional(function(){Ie.assert(tr,"typeof "+$r+'==="number"&&'+$r+">=0&&"+$r+"===("+$r+"|0)","invalid vertex count")}),$r})}else if(h)if(Kt(p)){if(p)return U?new Or(U.thisDep,U.contextDep,U.propDep,function(Ie,tr){var $r=tr.def(Ie.ELEMENTS,".vertCount-",Ie.OFFSET);return c.optional(function(){Ie.assert(tr,$r+">=0","invalid vertex offset/element buffer too small")}),$r}):xr(function(Ie,tr){return tr.def(Ie.ELEMENTS,".vertCount")});var P=xr(function(){return-1});return c.optional(function(){P.MISSING=!0}),P}else{var Te=new Or(p.thisDep||U.thisDep,p.contextDep||U.contextDep,p.propDep||U.propDep,function(Ie,tr){var $r=Ie.ELEMENTS;return Ie.OFFSET?tr.def($r,"?",$r,".vertCount-",Ie.OFFSET,":-1"):tr.def($r,"?",$r,".vertCount:-1")});return c.optional(function(){Te.DYNAMIC=!0}),Te}else if(x){var xe=new Or(E.thisDep,E.contextDep,E.propDep,function(Ie,tr){return tr.def(Ie.shared.vao,".currentVAO?",Ie.shared.vao,".currentVAO.count:-1")});return xe}return null}var ie=L(),Me=j(),ke=C(Ea,!1);return{elements:p,primitive:ie,count:Me,instances:ke,offset:U,vao:E,vaoActive:x,elementsActive:h,static:S}}function hr(d,l){var y=d.static,T=d.dynamic,S={};return Le.forEach(function(x){var b=be(x);function E(h,g){if(x in y){var p=h(y[x]);S[b]=xr(function(){return p})}else if(x in T){var L=T[x];S[b]=tt(L,function(C,U){return g(C,U,C.invoke(U,L))})}}switch(x){case su:case iu:case nu:case mu:case ou:case gu:case du:case hu:case pu:case uu:return E(function(h){return c.commandType(h,"boolean",x,l.commandStr),h},function(h,g,p){return c.optional(function(){h.assert(g,"typeof "+p+'==="boolean"',"invalid flag "+x,h.commandStr)}),p});case fu:return E(function(h){return c.commandParameter(h,jn,"invalid "+x,l.commandStr),jn[h]},function(h,g,p){var L=h.constants.compareFuncs;return c.optional(function(){h.assert(g,p+" in "+L,"invalid "+x+", must be one of "+Object.keys(jn))}),g.def(L,"[",p,"]")});case lu:return E(function(h){return c.command(cr(h)&&h.length===2&&typeof h[0]=="number"&&typeof h[1]=="number"&&h[0]<=h[1],"depth range is 2d array",l.commandStr),h},function(h,g,p){c.optional(function(){h.assert(g,h.shared.isArrayLike+"("+p+")&&"+p+".length===2&&typeof "+p+'[0]==="number"&&typeof '+p+'[1]==="number"&&'+p+"[0]<="+p+"[1]","depth range must be a 2d array")});var L=g.def("+",p,"[0]"),C=g.def("+",p,"[1]");return[L,C]});case jo:return E(function(h){c.commandType(h,"object","blend.func",l.commandStr);var g="srcRGB"in h?h.srcRGB:h.src,p="srcAlpha"in h?h.srcAlpha:h.src,L="dstRGB"in h?h.dstRGB:h.dst,C="dstAlpha"in h?h.dstAlpha:h.dst;return c.commandParameter(g,St,b+".srcRGB",l.commandStr),c.commandParameter(p,St,b+".srcAlpha",l.commandStr),c.commandParameter(L,St,b+".dstRGB",l.commandStr),c.commandParameter(C,St,b+".dstAlpha",l.commandStr),c.command(Cu.indexOf(g+", "+L)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+g+", "+L+")",l.commandStr),[St[g],St[L],St[p],St[C]]},function(h,g,p){var L=h.constants.blendFuncs;c.optional(function(){h.assert(g,p+"&&typeof "+p+'==="object"',"invalid blend func, must be an object")});function C(Y,P){var Te=g.def('"',Y,P,'" in ',p,"?",p,".",Y,P,":",p,".",Y);return c.optional(function(){h.assert(g,Te+" in "+L,"invalid "+x+"."+Y+P+", must be one of "+Object.keys(St))}),Te}var U=C("src","RGB"),j=C("dst","RGB");c.optional(function(){var Y=h.constants.invalidBlendCombinations;h.assert(g,Y+".indexOf("+U+'+", "+'+j+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var ie=g.def(L,"[",U,"]"),Me=g.def(L,"[",C("src","Alpha"),"]"),ke=g.def(L,"[",j,"]"),_e=g.def(L,"[",C("dst","Alpha"),"]");return[ie,ke,Me,_e]});case zo:return E(function(h){if(typeof h=="string")return c.commandParameter(h,N,"invalid "+x,l.commandStr),[N[h],N[h]];if(typeof h=="object")return c.commandParameter(h.rgb,N,x+".rgb",l.commandStr),c.commandParameter(h.alpha,N,x+".alpha",l.commandStr),[N[h.rgb],N[h.alpha]];c.commandRaise("invalid blend.equation",l.commandStr)},function(h,g,p){var L=h.constants.blendEquations,C=g.def(),U=g.def(),j=h.cond("typeof ",p,'==="string"');return c.optional(function(){function ie(Me,ke,_e){h.assert(Me,_e+" in "+L,"invalid "+ke+", must be one of "+Object.keys(N))}ie(j.then,x,p),h.assert(j.else,p+"&&typeof "+p+'==="object"',"invalid "+x),ie(j.else,x+".rgb",p+".rgb"),ie(j.else,x+".alpha",p+".alpha")}),j.then(C,"=",U,"=",L,"[",p,"];"),j.else(C,"=",L,"[",p,".rgb];",U,"=",L,"[",p,".alpha];"),g(j),[C,U]});case au:return E(function(h){return c.command(cr(h)&&h.length===4,"blend.color must be a 4d array",l.commandStr),Wr(4,function(g){return+h[g]})},function(h,g,p){return c.optional(function(){h.assert(g,h.shared.isArrayLike+"("+p+")&&"+p+".length===4","blend.color must be a 4d array")}),Wr(4,function(L){return g.def("+",p,"[",L,"]")})});case vu:return E(function(h){return c.commandType(h,"number",b,l.commandStr),h|0},function(h,g,p){return c.optional(function(){h.assert(g,"typeof "+p+'==="number"',"invalid stencil.mask")}),g.def(p,"|0")});case Ko:return E(function(h){c.commandType(h,"object",b,l.commandStr);var g=h.cmp||"keep",p=h.ref||0,L="mask"in h?h.mask:-1;return c.commandParameter(g,jn,x+".cmp",l.commandStr),c.commandType(p,"number",x+".ref",l.commandStr),c.commandType(L,"number",x+".mask",l.commandStr),[jn[g],p,L]},function(h,g,p){var L=h.constants.compareFuncs;c.optional(function(){function ie(){h.assert(g,Array.prototype.join.call(arguments,""),"invalid stencil.func")}ie(p+"&&typeof ",p,'==="object"'),ie('!("cmp" in ',p,")||(",p,".cmp in ",L,")")});var C=g.def('"cmp" in ',p,"?",L,"[",p,".cmp]",":",Xt),U=g.def(p,".ref|0"),j=g.def('"mask" in ',p,"?",p,".mask|0:-1");return[C,U,j]});case Qo:case si:return E(function(h){c.commandType(h,"object",b,l.commandStr);var g=h.fail||"keep",p=h.zfail||"keep",L=h.zpass||"keep";return c.commandParameter(g,qt,x+".fail",l.commandStr),c.commandParameter(p,qt,x+".zfail",l.commandStr),c.commandParameter(L,qt,x+".zpass",l.commandStr),[x===si?vn:bi,qt[g],qt[p],qt[L]]},function(h,g,p){var L=h.constants.stencilOps;c.optional(function(){h.assert(g,p+"&&typeof "+p+'==="object"',"invalid "+x)});function C(U){return c.optional(function(){h.assert(g,'!("'+U+'" in '+p+")||("+p+"."+U+" in "+L+")","invalid "+x+"."+U+", must be one of "+Object.keys(qt))}),g.def('"',U,'" in ',p,"?",L,"[",p,".",U,"]:",Xt)}return[x===si?vn:bi,C("fail"),C("zfail"),C("zpass")]});case Xo:return E(function(h){c.commandType(h,"object",b,l.commandStr);var g=h.factor|0,p=h.units|0;return c.commandType(g,"number",b+".factor",l.commandStr),c.commandType(p,"number",b+".units",l.commandStr),[g,p]},function(h,g,p){c.optional(function(){h.assert(g,p+"&&typeof "+p+'==="object"',"invalid "+x)});var L=g.def(p,".factor|0"),C=g.def(p,".units|0");return[L,C]});case cu:return E(function(h){var g=0;return h==="front"?g=bi:h==="back"&&(g=vn),c.command(!!g,b,l.commandStr),g},function(h,g,p){return c.optional(function(){h.assert(g,p+'==="front"||'+p+'==="back"',"invalid cull.face")}),g.def(p,'==="front"?',bi,":",vn)});case Wo:return E(function(h){return c.command(typeof h=="number"&&h>=D.lineWidthDims[0]&&h<=D.lineWidthDims[1],"invalid line width, must be a positive number between "+D.lineWidthDims[0]+" and "+D.lineWidthDims[1],l.commandStr),h},function(h,g,p){return c.optional(function(){h.assert(g,"typeof "+p+'==="number"&&'+p+">="+D.lineWidthDims[0]+"&&"+p+"<="+D.lineWidthDims[1],"invalid line width")}),p});case Vo:return E(function(h){return c.commandParameter(h,ff,b,l.commandStr),ff[h]},function(h,g,p){return c.optional(function(){h.assert(g,p+'==="cw"||'+p+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),g.def(p+'==="cw"?'+Au+":"+of)});case Yo:return E(function(h){return c.command(cr(h)&&h.length===4,"color.mask must be length 4 array",l.commandStr),h.map(function(g){return!!g})},function(h,g,p){return c.optional(function(){h.assert(g,h.shared.isArrayLike+"("+p+")&&"+p+".length===4","invalid color.mask")}),Wr(4,function(L){return"!!"+p+"["+L+"]"})});case qo:return E(function(h){c.command(typeof h=="object"&&h,b,l.commandStr);var g="value"in h?h.value:1,p=!!h.invert;return c.command(typeof g=="number"&&g>=0&&g<=1,"sample.coverage.value must be a number between 0 and 1",l.commandStr),[g,p]},function(h,g,p){c.optional(function(){h.assert(g,p+"&&typeof "+p+'==="object"',"invalid sample.coverage")});var L=g.def('"value" in ',p,"?+",p,".value:1"),C=g.def("!!",p,".invert");return[L,C]})}}),S}function Xe(d,l){var y=d.static,T=d.dynamic,S={};return Object.keys(y).forEach(function(x){var b=y[x],E;if(typeof b=="number"||typeof b=="boolean")E=xr(function(){return b});else if(typeof b=="function"){var h=b._reglType;h==="texture2d"||h==="textureCube"?E=xr(function(g){return g.link(b)}):h==="framebuffer"||h==="framebufferCube"?(c.command(b.color.length>0,'missing color attachment for framebuffer sent to uniform "'+x+'"',l.commandStr),E=xr(function(g){return g.link(b.color[0])})):c.commandRaise('invalid data for uniform "'+x+'"',l.commandStr)}else cr(b)?E=xr(function(g){var p=g.global.def("[",Wr(b.length,function(L){return c.command(typeof b[L]=="number"||typeof b[L]=="boolean","invalid uniform "+x,g.commandStr),b[L]}),"]");return p}):c.commandRaise('invalid or missing data for uniform "'+x+'"',l.commandStr);E.value=b,S[x]=E}),Object.keys(T).forEach(function(x){var b=T[x];S[x]=tt(b,function(E,h){return E.invoke(h,b)})}),S}function Sr(d,l){var y=d.static,T=d.dynamic,S={};return Object.keys(y).forEach(function(x){var b=y[x],E=s.id(x),h=new w;if(Fa(b))h.state=Un,h.buffer=H.getBuffer(H.create(b,zn,!1,!0)),h.type=0;else{var g=H.getBuffer(b);if(g)h.state=Un,h.buffer=g,h.type=0;else if(c.command(typeof b=="object"&&b,"invalid data for attribute "+x,l.commandStr),"constant"in b){var p=b.constant;h.buffer="null",h.state=Bo,typeof p=="number"?h.x=p:(c.command(cr(p)&&p.length>0&&p.length<=4,"invalid constant for attribute "+x,l.commandStr),Pn.forEach(function(ke,_e){_e<p.length&&(h[ke]=p[_e])}))}else{Fa(b.buffer)?g=H.getBuffer(H.create(b.buffer,zn,!1,!0)):g=H.getBuffer(b.buffer),c.command(!!g,'missing buffer for attribute "'+x+'"',l.commandStr);var L=b.offset|0;c.command(L>=0,'invalid offset for attribute "'+x+'"',l.commandStr);var C=b.stride|0;c.command(C>=0&&C<256,'invalid stride for attribute "'+x+'", must be integer betweeen [0, 255]',l.commandStr);var U=b.size|0;c.command(!("size"in b)||U>0&&U<=4,'invalid size for attribute "'+x+'", must be 1,2,3,4',l.commandStr);var j=!!b.normalized,ie=0;"type"in b&&(c.commandParameter(b.type,fn,"invalid type for attribute "+x,l.commandStr),ie=fn[b.type]);var Me=b.divisor|0;c.optional(function(){"divisor"in b&&(c.command(Me===0||Z,'cannot specify divisor for attribute "'+x+'", instancing not supported',l.commandStr),c.command(Me>=0,'invalid divisor for attribute "'+x+'"',l.commandStr));var ke=l.commandStr,_e=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(b).forEach(function(Y){c.command(_e.indexOf(Y)>=0,'unknown parameter "'+Y+'" for attribute pointer "'+x+'" (valid parameters are '+_e+")",ke)})}),h.buffer=g,h.state=Un,h.size=U,h.normalized=j,h.type=ie||g.dtype,h.offset=L,h.stride=C,h.divisor=Me}}S[x]=xr(function(ke,_e){var Y=ke.attribCache;if(E in Y)return Y[E];var P={isStream:!1};return Object.keys(h).forEach(function(Te){P[Te]=h[Te]}),h.buffer&&(P.buffer=ke.link(h.buffer),P.type=P.type||P.buffer+".dtype"),Y[E]=P,P})}),Object.keys(T).forEach(function(x){var b=T[x];function E(h,g){var p=h.invoke(g,b),L=h.shared,C=h.constants,U=L.isBufferArgs,j=L.buffer;c.optional(function(){h.assert(g,p+"&&(typeof "+p+'==="object"||typeof '+p+'==="function")&&('+U+"("+p+")||"+j+".getBuffer("+p+")||"+j+".getBuffer("+p+".buffer)||"+U+"("+p+'.buffer)||("constant" in '+p+"&&(typeof "+p+'.constant==="number"||'+L.isArrayLike+"("+p+".constant))))",'invalid dynamic attribute "'+x+'"')});var ie={isStream:g.def(!1)},Me=new w;Me.state=Un,Object.keys(Me).forEach(function(P){ie[P]=g.def(""+Me[P])});var ke=ie.buffer,_e=ie.type;g("if(",U,"(",p,")){",ie.isStream,"=true;",ke,"=",j,".createStream(",zn,",",p,");",_e,"=",ke,".dtype;","}else{",ke,"=",j,".getBuffer(",p,");","if(",ke,"){",_e,"=",ke,".dtype;",'}else if("constant" in ',p,"){",ie.state,"=",Bo,";","if(typeof "+p+'.constant === "number"){',ie[Pn[0]],"=",p,".constant;",Pn.slice(1).map(function(P){return ie[P]}).join("="),"=0;","}else{",Pn.map(function(P,Te){return ie[P]+"="+p+".constant.length>"+Te+"?"+p+".constant["+Te+"]:0;"}).join(""),"}}else{","if(",U,"(",p,".buffer)){",ke,"=",j,".createStream(",zn,",",p,".buffer);","}else{",ke,"=",j,".getBuffer(",p,".buffer);","}",_e,'="type" in ',p,"?",C.glTypes,"[",p,".type]:",ke,".dtype;",ie.normalized,"=!!",p,".normalized;");function Y(P){g(ie[P],"=",p,".",P,"|0;")}return Y("size"),Y("offset"),Y("stride"),Y("divisor"),g("}}"),g.exit("if(",ie.isStream,"){",j,".destroyStream(",ke,");","}"),ie}S[x]=tt(b,E)}),S}function fr(d){var l=d.static,y=d.dynamic,T={};return Object.keys(l).forEach(function(S){var x=l[S];T[S]=xr(function(b,E){return typeof x=="number"||typeof x=="boolean"?""+x:b.link(x)})}),Object.keys(y).forEach(function(S){var x=y[S];T[S]=tt(x,function(b,E){return b.invoke(E,x)})}),T}function Ar(d,l,y,T,S){var x=d.static,b=d.dynamic;c.optional(function(){var Y=[dn,di,hi,hn,pn,Aa,mn,Ea,ci,pi].concat(Le);function P(Te){Object.keys(Te).forEach(function(xe){c.command(Y.indexOf(xe)>=0,'unknown parameter "'+xe+'"',S.commandStr)})}P(x),P(b)});var E=$e(d,l),h=pe(d),g=Ne(d,h,S),p=dr(d,S),L=hr(d,S),C=Ve(d,S,E);function U(Y){var P=g[Y];P&&(L[Y]=P)}U(Nt),U(be(xa));var j=Object.keys(L).length>0,ie={framebuffer:h,draw:p,shader:C,state:L,dirty:j,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(ie.profile=ce(d),ie.uniforms=Xe(y,S),ie.drawVAO=ie.scopeVAO=p.vao,!ie.drawVAO&&C.program&&!E&&_.angle_instanced_arrays&&p.static.elements){var Me=!0,ke=C.program.attributes.map(function(Y){var P=l.static[Y];return Me=Me&&!!P,P});if(Me&&ke.length>0){var _e=re.getVAO(re.createVAO({attributes:ke,elements:p.static.elements}));ie.drawVAO=new Or(null,null,null,function(Y,P){return Y.link(_e)}),ie.useVAO=!0}}return E?ie.useVAO=!0:ie.attributes=Sr(l,S),ie.context=fr(T),ie}function Cr(d,l,y){var T=d.shared,S=T.context,x=d.scope();Object.keys(y).forEach(function(b){l.save(S,"."+b);var E=y[b],h=E.append(d,l);Array.isArray(h)?x(S,".",b,"=[",h.join(),"];"):x(S,".",b,"=",h,";")}),l(x)}function kr(d,l,y,T){var S=d.shared,x=S.gl,b=S.framebuffer,E;me&&(E=l.def(S.extensions,".webgl_draw_buffers"));var h=d.constants,g=h.drawBuffer,p=h.backBuffer,L;y?L=y.append(d,l):L=l.def(b,".next"),T||l("if(",L,"!==",b,".cur){"),l("if(",L,"){",x,".bindFramebuffer(",Su,",",L,".framebuffer);"),me&&l(E,".drawBuffersWEBGL(",g,"[",L,".colorAttachments.length]);"),l("}else{",x,".bindFramebuffer(",Su,",null);"),me&&l(E,".drawBuffersWEBGL(",p,");"),l("}",b,".cur=",L,";"),T||l("}")}function Nr(d,l,y){var T=d.shared,S=T.gl,x=d.current,b=d.next,E=T.current,h=T.next,g=d.cond(E,".dirty");Le.forEach(function(p){var L=be(p);if(!(L in y.state)){var C,U;if(L in b){C=b[L],U=x[L];var j=Wr(he[L].length,function(Me){return g.def(C,"[",Me,"]")});g(d.cond(j.map(function(Me,ke){return Me+"!=="+U+"["+ke+"]"}).join("||")).then(S,".",$[L],"(",j,");",j.map(function(Me,ke){return U+"["+ke+"]="+Me}).join(";"),";"))}else{C=g.def(h,".",L);var ie=d.cond(C,"!==",E,".",L);g(ie),L in z?ie(d.cond(C).then(S,".enable(",z[L],");").else(S,".disable(",z[L],");"),E,".",L,"=",C,";"):ie(S,".",$[L],"(",C,");",E,".",L,"=",C,";")}}}),Object.keys(y.state).length===0&&g(E,".dirty=false;"),l(g)}function Pr(d,l,y,T){var S=d.shared,x=d.current,b=S.current,E=S.gl;Lu(Object.keys(y)).forEach(function(h){var g=y[h];if(!(T&&!T(g))){var p=g.append(d,l);if(z[h]){var L=z[h];Kt(g)?p?l(E,".enable(",L,");"):l(E,".disable(",L,");"):l(d.cond(p).then(E,".enable(",L,");").else(E,".disable(",L,");")),l(b,".",h,"=",p,";")}else if(cr(p)){var C=x[h];l(E,".",$[h],"(",p,");",p.map(function(U,j){return C+"["+j+"]="+U}).join(";"),";")}else l(E,".",$[h],"(",p,");",b,".",h,"=",p,";")}})}function yr(d,l){Z&&(d.instancing=l.def(d.shared.extensions,".angle_instanced_arrays"))}function je(d,l,y,T,S){var x=d.shared,b=d.stats,E=x.current,h=x.timer,g=y.profile;function p(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var L,C;function U(Y){L=l.def(),Y(L,"=",p(),";"),typeof S=="string"?Y(b,".count+=",S,";"):Y(b,".count++;"),K&&(T?(C=l.def(),Y(C,"=",h,".getNumPendingQueries();")):Y(h,".beginQuery(",b,");"))}function j(Y){Y(b,".cpuTime+=",p(),"-",L,";"),K&&(T?Y(h,".pushScopeStats(",C,",",h,".getNumPendingQueries(),",b,");"):Y(h,".endQuery();"))}function ie(Y){var P=l.def(E,".profile");l(E,".profile=",Y,";"),l.exit(E,".profile=",P,";")}var Me;if(g){if(Kt(g)){g.enable?(U(l),j(l.exit),ie("true")):ie("false");return}Me=g.append(d,l),ie(Me)}else Me=l.def(E,".profile");var ke=d.block();U(ke),l("if(",Me,"){",ke,"}");var _e=d.block();j(_e),l.exit("if(",Me,"){",_e,"}")}function Ur(d,l,y,T,S){var x=d.shared;function b(h){switch(h){case Ta:case Ca:case Oa:return 2;case wa:case ka:case Ra:return 3;case Sa:case La:case Da:return 4;default:return 1}}function E(h,g,p){var L=x.gl,C=l.def(h,".location"),U=l.def(x.attributes,"[",C,"]"),j=p.state,ie=p.buffer,Me=[p.x,p.y,p.z,p.w],ke=["buffer","normalized","offset","stride"];function _e(){l("if(!",U,".buffer){",L,".enableVertexAttribArray(",C,");}");var P=p.type,Te;if(p.size?Te=l.def(p.size,"||",g):Te=g,l("if(",U,".type!==",P,"||",U,".size!==",Te,"||",ke.map(function(Ie){return U+"."+Ie+"!=="+p[Ie]}).join("||"),"){",L,".bindBuffer(",zn,",",ie,".buffer);",L,".vertexAttribPointer(",[C,Te,P,p.normalized,p.stride,p.offset],");",U,".type=",P,";",U,".size=",Te,";",ke.map(function(Ie){return U+"."+Ie+"="+p[Ie]+";"}).join(""),"}"),Z){var xe=p.divisor;l("if(",U,".divisor!==",xe,"){",d.instancing,".vertexAttribDivisorANGLE(",[C,xe],");",U,".divisor=",xe,";}")}}function Y(){l("if(",U,".buffer){",L,".disableVertexAttribArray(",C,");",U,".buffer=null;","}if(",Pn.map(function(P,Te){return U+"."+P+"!=="+Me[Te]}).join("||"),"){",L,".vertexAttrib4f(",C,",",Me,");",Pn.map(function(P,Te){return U+"."+P+"="+Me[Te]+";"}).join(""),"}")}j===Un?_e():j===Bo?Y():(l("if(",j,"===",Un,"){"),_e(),l("}else{"),Y(),l("}"))}T.forEach(function(h){var g=h.name,p=y.attributes[g],L;if(p){if(!S(p))return;L=p.append(d,l)}else{if(!S(Ou))return;var C=d.scopeAttrib(g);c.optional(function(){d.assert(l,C+".state","missing attribute "+g)}),L={},Object.keys(new w).forEach(function(U){L[U]=l.def(C,".",U)})}E(d.link(h),b(h.info.type),L)})}function rr(d,l,y,T,S,x){for(var b=d.shared,E=b.gl,h={},g,p=0;p<T.length;++p){var L=T[p],C=L.name,U=L.info.type,j=L.info.size,ie=y.uniforms[C];if(j>1){if(!ie)continue;var Me=C.replace("[0]","");if(h[Me])continue;h[Me]=1}var ke=d.link(L),_e=ke+".location",Y;if(ie){if(!S(ie))continue;if(Kt(ie)){var P=ie.value;if(c.command(P!==null&&typeof P!="undefined",'missing uniform "'+C+'"',d.commandStr),U===_i||U===yi){c.command(typeof P=="function"&&(U===_i&&(P._reglType==="texture2d"||P._reglType==="framebuffer")||U===yi&&(P._reglType==="textureCube"||P._reglType==="framebufferCube")),"invalid texture for uniform "+C,d.commandStr);var Te=d.link(P._texture||P.color[0]._texture);l(E,".uniform1i(",_e,",",Te+".bind());"),l.exit(Te,".unbind();")}else if(U===mi||U===vi||U===gi){c.optional(function(){c.command(cr(P),"invalid matrix for uniform "+C,d.commandStr),c.command(U===mi&&P.length===4||U===vi&&P.length===9||U===gi&&P.length===16,"invalid length for matrix uniform "+C,d.commandStr)});var xe=d.global.def("new Float32Array(["+Array.prototype.slice.call(P)+"])"),Ie=2;U===vi?Ie=3:U===gi&&(Ie=4),l(E,".uniformMatrix",Ie,"fv(",_e,",false,",xe,");")}else{switch(U){case rf:j===1?c.commandType(P,"number","uniform "+C,d.commandStr):c.command(cr(P)&&P.length===j,"uniform "+C,d.commandStr),g="1f";break;case Ta:c.command(cr(P)&&P.length&&P.length%2==0&&P.length<=j*2,"uniform "+C,d.commandStr),g="2f";break;case wa:c.command(cr(P)&&P.length&&P.length%3==0&&P.length<=j*3,"uniform "+C,d.commandStr),g="3f";break;case Sa:c.command(cr(P)&&P.length&&P.length%4==0&&P.length<=j*4,"uniform "+C,d.commandStr),g="4f";break;case nf:j===1?c.commandType(P,"boolean","uniform "+C,d.commandStr):c.command(cr(P)&&P.length===j,"uniform "+C,d.commandStr),g="1i";break;case tf:j===1?c.commandType(P,"number","uniform "+C,d.commandStr):c.command(cr(P)&&P.length===j,"uniform "+C,d.commandStr),g="1i";break;case Oa:c.command(cr(P)&&P.length&&P.length%2==0&&P.length<=j*2,"uniform "+C,d.commandStr),g="2i";break;case Ca:c.command(cr(P)&&P.length&&P.length%2==0&&P.length<=j*2,"uniform "+C,d.commandStr),g="2i";break;case Ra:c.command(cr(P)&&P.length&&P.length%3==0&&P.length<=j*3,"uniform "+C,d.commandStr),g="3i";break;case ka:c.command(cr(P)&&P.length&&P.length%3==0&&P.length<=j*3,"uniform "+C,d.commandStr),g="3i";break;case Da:c.command(cr(P)&&P.length&&P.length%4==0&&P.length<=j*4,"uniform "+C,d.commandStr),g="4i";break;case La:c.command(cr(P)&&P.length&&P.length%4==0&&P.length<=j*4,"uniform "+C,d.commandStr),g="4i";break}j>1?(g+="v",P=d.global.def("["+Array.prototype.slice.call(P)+"]")):P=cr(P)?Array.prototype.slice.call(P):P,l(E,".uniform",g,"(",_e,",",P,");")}continue}else Y=ie.append(d,l)}else{if(!S(Ou))continue;Y=l.def(b.uniforms,"[",s.id(C),"]")}U===_i?(c(!Array.isArray(Y),"must specify a scalar prop for textures"),l("if(",Y,"&&",Y,'._reglType==="framebuffer"){',Y,"=",Y,".color[0];","}")):U===yi&&(c(!Array.isArray(Y),"must specify a scalar prop for cube maps"),l("if(",Y,"&&",Y,'._reglType==="framebufferCube"){',Y,"=",Y,".color[0];","}")),c.optional(function(){function lt(nt,Na){d.assert(l,nt,'bad data or missing for uniform "'+C+'".  '+Na)}function bn(nt,Na){Na===1&&c(!Array.isArray(Y),"must not specify an array type for uniform"),lt("Array.isArray("+Y+") && typeof "+Y+'[0]===" '+nt+'" || typeof '+Y+'==="'+nt+'"',"invalid type, expected "+nt)}function mt(nt,Na,Ia){Array.isArray(Y)?c(Y.length&&Y.length%nt==0&&Y.length<=nt*Ia,"must have length of "+(Ia===1?"":"n * ")+nt):lt(b.isArrayLike+"("+Y+")&&"+Y+".length && "+Y+".length % "+nt+" === 0 && "+Y+".length<="+nt*Ia,"invalid vector, should have length of "+(Ia===1?"":"n * ")+nt,d.commandStr)}function Gu(nt){c(!Array.isArray(Y),"must not specify a value type"),lt("typeof "+Y+'==="function"&&'+Y+'._reglType==="texture'+(nt===xu?"2d":"Cube")+'"',"invalid texture type",d.commandStr)}switch(U){case tf:bn("number",j);break;case Ca:mt(2,"number",j);break;case ka:mt(3,"number",j);break;case La:mt(4,"number",j);break;case rf:bn("number",j);break;case Ta:mt(2,"number",j);break;case wa:mt(3,"number",j);break;case Sa:mt(4,"number",j);break;case nf:bn("boolean",j);break;case Oa:mt(2,"boolean",j);break;case Ra:mt(3,"boolean",j);break;case Da:mt(4,"boolean",j);break;case mi:mt(4,"number",j);break;case vi:mt(9,"number",j);break;case gi:mt(16,"number",j);break;case _i:Gu(xu);break;case yi:Gu(op);break}});var tr=1;switch(U){case _i:case yi:var $r=l.def(Y,"._texture");l(E,".uniform1i(",_e,",",$r,".bind());"),l.exit($r,".unbind();");continue;case tf:case nf:g="1i";break;case Ca:case Oa:g="2i",tr=2;break;case ka:case Ra:g="3i",tr=3;break;case La:case Da:g="4i",tr=4;break;case rf:g="1f";break;case Ta:g="2f",tr=2;break;case wa:g="3f",tr=3;break;case Sa:g="4f",tr=4;break;case mi:g="Matrix2fv";break;case vi:g="Matrix3fv";break;case gi:g="Matrix4fv";break}if(g.indexOf("Matrix")===-1&&j>1&&(g+="v",tr=1),g.charAt(0)==="M"){l(E,".uniform",g,"(",_e,",");var _n=Math.pow(U-mi+2,2),It=d.global.def("new Float32Array(",_n,")");Array.isArray(Y)?l("false,(",Wr(_n,function(lt){return It+"["+lt+"]="+Y[lt]}),",",It,")"):l("false,(Array.isArray(",Y,")||",Y," instanceof Float32Array)?",Y,":(",Wr(_n,function(lt){return It+"["+lt+"]="+Y+"["+lt+"]"}),",",It,")"),l(");")}else if(tr>1){for(var kt=[],Qt=[],yn=0;yn<tr;++yn)Array.isArray(Y)?Qt.push(Y[yn]):Qt.push(l.def(Y+"["+yn+"]")),x&&kt.push(l.def());x&&l("if(!",d.batchId,"||",kt.map(function(lt,bn){return lt+"!=="+Qt[bn]}).join("||"),"){",kt.map(function(lt,bn){return lt+"="+Qt[bn]+";"}).join("")),l(E,".uniform",g,"(",_e,",",Qt.join(","),");"),x&&l("}")}else{if(c(!Array.isArray(Y),"uniform value must not be an array"),x){var Mu=l.def();l("if(!",d.batchId,"||",Mu,"!==",Y,"){",Mu,"=",Y,";")}l(E,".uniform",g,"(",_e,",",Y,");"),x&&l("}")}}}function De(d,l,y,T){var S=d.shared,x=S.gl,b=S.draw,E=T.draw;function h(){var Te=E.elements,xe,Ie=l;return Te?((Te.contextDep&&T.contextDynamic||Te.propDep)&&(Ie=y),xe=Te.append(d,Ie),E.elementsActive&&Ie("if("+xe+")"+x+".bindBuffer("+ef+","+xe+".buffer.buffer);")):(xe=Ie.def(),Ie(xe,"=",b,".",hn,";","if(",xe,"){",x,".bindBuffer(",ef,",",xe,".buffer.buffer);}","else if(",S.vao,".currentVAO){",xe,"=",d.shared.elements+".getElements("+S.vao,".currentVAO.elements);",V?"":"if("+xe+")"+x+".bindBuffer("+ef+","+xe+".buffer.buffer);","}")),xe}function g(){var Te=E.count,xe,Ie=l;return Te?((Te.contextDep&&T.contextDynamic||Te.propDep)&&(Ie=y),xe=Te.append(d,Ie),c.optional(function(){Te.MISSING&&d.assert(l,"false","missing vertex count"),Te.DYNAMIC&&d.assert(Ie,xe+">=0","missing vertex count")})):(xe=Ie.def(b,".",mn),c.optional(function(){d.assert(Ie,xe+">=0","missing vertex count")})),xe}var p=h();function L(Te){var xe=E[Te];return xe?xe.contextDep&&T.contextDynamic||xe.propDep?xe.append(d,y):xe.append(d,l):l.def(b,".",Te)}var C=L(pn),U=L(Aa),j=g();if(typeof j=="number"){if(j===0)return}else y("if(",j,"){"),y.exit("}");var ie,Me;Z&&(ie=L(Ea),Me=d.instancing);var ke=p+".type",_e=E.elements&&Kt(E.elements)&&!E.vaoActive;function Y(){function Te(){y(Me,".drawElementsInstancedANGLE(",[C,j,ke,U+"<<(("+ke+"-"+eu+")>>1)",ie],");")}function xe(){y(Me,".drawArraysInstancedANGLE(",[C,U,j,ie],");")}p&&p!=="null"?_e?Te():(y("if(",p,"){"),Te(),y("}else{"),xe(),y("}")):xe()}function P(){function Te(){y(x+".drawElements("+[C,j,ke,U+"<<(("+ke+"-"+eu+")>>1)"]+");")}function xe(){y(x+".drawArrays("+[C,U,j]+");")}p&&p!=="null"?_e?Te():(y("if(",p,"){"),Te(),y("}else{"),xe(),y("}")):xe()}Z&&(typeof ie!="number"||ie>=0)?typeof ie=="string"?(y("if(",ie,">0){"),Y(),y("}else if(",ie,"<0){"),P(),y("}")):Y():P()}function We(d,l,y,T,S){var x=Be(),b=x.proc("body",S);return c.optional(function(){x.commandStr=l.commandStr,x.command=x.link(l.commandStr)}),Z&&(x.instancing=b.def(x.shared.extensions,".angle_instanced_arrays")),d(x,b,y,T),x.compile().body}function Ze(d,l,y,T){yr(d,l),y.useVAO?y.drawVAO?l(d.shared.vao,".setVAO(",y.drawVAO.append(d,l),");"):l(d.shared.vao,".setVAO(",d.shared.vao,".targetVAO);"):(l(d.shared.vao,".setVAO(null);"),Ur(d,l,y,T.attributes,function(){return!0})),rr(d,l,y,T.uniforms,function(){return!0},!1),De(d,l,l,y)}function br(d,l){var y=d.proc("draw",1);yr(d,y),Cr(d,y,l.context),kr(d,y,l.framebuffer),Nr(d,y,l),Pr(d,y,l.state),je(d,y,l,!1,!0);var T=l.shader.progVar.append(d,y);if(y(d.shared.gl,".useProgram(",T,".program);"),l.shader.program)Ze(d,y,l,l.shader.program);else{y(d.shared.vao,".setVAO(null);");var S=d.global.def("{}"),x=y.def(T,".id"),b=y.def(S,"[",x,"]");y(d.cond(b).then(b,".call(this,a0);").else(b,"=",S,"[",x,"]=",d.link(function(E){return We(Ze,d,l,E,1)}),"(",T,");",b,".call(this,a0);"))}Object.keys(l.state).length>0&&y(d.shared.current,".dirty=true;"),d.shared.vao&&y(d.shared.vao,".setVAO(null);")}function Ct(d,l,y,T){d.batchId="a1",yr(d,l);function S(){return!0}Ur(d,l,y,T.attributes,S),rr(d,l,y,T.uniforms,S,!1),De(d,l,l,y)}function gn(d,l,y,T){yr(d,l);var S=y.contextDep,x=l.def(),b="a0",E="a1",h=l.def();d.shared.props=h,d.batchId=x;var g=d.scope(),p=d.scope();l(g.entry,"for(",x,"=0;",x,"<",E,";++",x,"){",h,"=",b,"[",x,"];",p,"}",g.exit);function L(ke){return ke.contextDep&&S||ke.propDep}function C(ke){return!L(ke)}if(y.needsContext&&Cr(d,p,y.context),y.needsFramebuffer&&kr(d,p,y.framebuffer),Pr(d,p,y.state,L),y.profile&&L(y.profile)&&je(d,p,y,!1,!0),T)y.useVAO?y.drawVAO?L(y.drawVAO)?p(d.shared.vao,".setVAO(",y.drawVAO.append(d,p),");"):g(d.shared.vao,".setVAO(",y.drawVAO.append(d,g),");"):g(d.shared.vao,".setVAO(",d.shared.vao,".targetVAO);"):(g(d.shared.vao,".setVAO(null);"),Ur(d,g,y,T.attributes,C),Ur(d,p,y,T.attributes,L)),rr(d,g,y,T.uniforms,C,!1),rr(d,p,y,T.uniforms,L,!0),De(d,g,p,y);else{var U=d.global.def("{}"),j=y.shader.progVar.append(d,p),ie=p.def(j,".id"),Me=p.def(U,"[",ie,"]");p(d.shared.gl,".useProgram(",j,".program);","if(!",Me,"){",Me,"=",U,"[",ie,"]=",d.link(function(ke){return We(Ct,d,y,ke,2)}),"(",j,");}",Me,".call(this,a0[",x,"],",x,");")}}function m(d,l){var y=d.proc("batch",2);d.batchId="0",yr(d,y);var T=!1,S=!0;Object.keys(l.context).forEach(function(U){T=T||l.context[U].propDep}),T||(Cr(d,y,l.context),S=!1);var x=l.framebuffer,b=!1;x?(x.propDep?T=b=!0:x.contextDep&&T&&(b=!0),b||kr(d,y,x)):kr(d,y,null),l.state.viewport&&l.state.viewport.propDep&&(T=!0);function E(U){return U.contextDep&&T||U.propDep}Nr(d,y,l),Pr(d,y,l.state,function(U){return!E(U)}),(!l.profile||!E(l.profile))&&je(d,y,l,!1,"a1"),l.contextDep=T,l.needsContext=S,l.needsFramebuffer=b;var h=l.shader.progVar;if(h.contextDep&&T||h.propDep)gn(d,y,l,null);else{var g=h.append(d,y);if(y(d.shared.gl,".useProgram(",g,".program);"),l.shader.program)gn(d,y,l,l.shader.program);else{y(d.shared.vao,".setVAO(null);");var p=d.global.def("{}"),L=y.def(g,".id"),C=y.def(p,"[",L,"]");y(d.cond(C).then(C,".call(this,a0,a1);").else(C,"=",p,"[",L,"]=",d.link(function(U){return We(gn,d,l,U,2)}),"(",g,");",C,".call(this,a0,a1);"))}}Object.keys(l.state).length>0&&y(d.shared.current,".dirty=true;"),d.shared.vao&&y(d.shared.vao,".setVAO(null);")}function F(d,l){var y=d.proc("scope",3);d.batchId="a2";var T=d.shared,S=T.current;Cr(d,y,l.context),l.framebuffer&&l.framebuffer.append(d,y),Lu(Object.keys(l.state)).forEach(function(b){var E=l.state[b],h=E.append(d,y);cr(h)?h.forEach(function(g,p){y.set(d.next[b],"["+p+"]",g)}):y.set(T.next,"."+b,h)}),je(d,y,l,!0,!0),[hn,Aa,mn,Ea,pn].forEach(function(b){var E=l.draw[b];!E||y.set(T.draw,"."+b,""+E.append(d,y))}),Object.keys(l.uniforms).forEach(function(b){var E=l.uniforms[b].append(d,y);Array.isArray(E)&&(E="["+E.join()+"]"),y.set(T.uniforms,"["+s.id(b)+"]",E)}),Object.keys(l.attributes).forEach(function(b){var E=l.attributes[b].append(d,y),h=d.scopeAttrib(b);Object.keys(new w).forEach(function(g){y.set(h,"."+g,E[g])})}),l.scopeVAO&&y.set(T.vao,".targetVAO",l.scopeVAO.append(d,y));function x(b){var E=l.shader[b];E&&y.set(T.shader,"."+b,E.append(d,y))}x(di),x(hi),Object.keys(l.state).length>0&&(y(S,".dirty=true;"),y.exit(S,".dirty=true;")),y("a1(",d.shared.context,",a0,",d.batchId,");")}function O(d){if(!(typeof d!="object"||cr(d))){for(var l=Object.keys(d),y=0;y<l.length;++y)if(qr.isDynamic(d[l[y]]))return!0;return!1}}function ye(d,l,y){var T=l.static[y];if(!T||!O(T))return;var S=d.global,x=Object.keys(T),b=!1,E=!1,h=!1,g=d.global.def("{}");x.forEach(function(L){var C=T[L];if(qr.isDynamic(C)){typeof C=="function"&&(C=T[L]=qr.unbox(C));var U=tt(C,null);b=b||U.thisDep,h=h||U.propDep,E=E||U.contextDep}else{switch(S(g,".",L,"="),typeof C){case"number":S(C);break;case"string":S('"',C,'"');break;case"object":Array.isArray(C)&&S("[",C.join(),"]");break;default:S(d.link(C));break}S(";")}});function p(L,C){x.forEach(function(U){var j=T[U];if(!!qr.isDynamic(j)){var ie=L.invoke(C,j);C(g,".",U,"=",ie,";")}})}l.dynamic[y]=new qr.DynamicVariable(ba,{thisDep:b,contextDep:E,propDep:h,ref:g,append:p}),delete l.static[y]}function Ye(d,l,y,T,S){var x=Be();x.stats=x.link(S),Object.keys(l.static).forEach(function(E){ye(x,l,E)}),np.forEach(function(E){ye(x,d,E)});var b=Ar(d,l,y,T,x);return br(x,b),F(x,b),m(x,b),n(x.compile(),{destroy:function(){b.shader.program.destroy()}})}return{next:se,current:he,procs:function(){var d=Be(),l=d.proc("poll"),y=d.proc("refresh"),T=d.block();l(T),y(T);var S=d.shared,x=S.gl,b=S.next,E=S.current;T(E,".dirty=false;"),kr(d,l),kr(d,y,null,!0);var h;Z&&(h=d.link(Z)),_.oes_vertex_array_object&&y(d.link(_.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var g=0;g<D.maxAttributes;++g){var p=y.def(S.attributes,"[",g,"]"),L=d.cond(p,".buffer");L.then(x,".enableVertexAttribArray(",g,");",x,".bindBuffer(",zn,",",p,".buffer.buffer);",x,".vertexAttribPointer(",g,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(x,".disableVertexAttribArray(",g,");",x,".vertexAttrib4f(",g,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),y(L),Z&&y(h,".vertexAttribDivisorANGLE(",g,",",p,".divisor);")}return y(d.shared.vao,".currentVAO=null;",d.shared.vao,".setVAO(",d.shared.vao,".targetVAO);"),Object.keys(z).forEach(function(C){var U=z[C],j=T.def(b,".",C),ie=d.block();ie("if(",j,"){",x,".enable(",U,")}else{",x,".disable(",U,")}",E,".",C,"=",j,";"),y(ie),l("if(",j,"!==",E,".",C,"){",ie,"}")}),Object.keys($).forEach(function(C){var U=$[C],j=he[C],ie,Me,ke=d.block();if(ke(x,".",U,"("),cr(j)){var _e=j.length;ie=d.global.def(b,".",C),Me=d.global.def(E,".",C),ke(Wr(_e,function(Y){return ie+"["+Y+"]"}),");",Wr(_e,function(Y){return Me+"["+Y+"]="+ie+"["+Y+"];"}).join("")),l("if(",Wr(_e,function(Y){return ie+"["+Y+"]!=="+Me+"["+Y+"]"}).join("||"),"){",ke,"}")}else ie=T.def(b,".",C),Me=T.def(E,".",C),ke(ie,");",E,".",C,"=",ie,";"),l("if(",ie,"!==",Me,"){",ke,"}");y(ke)}),d.compile()}(),compile:Ye}}function Ap(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Ep=34918,Tp=34919,Ru=35007,wp=function(a,s){if(!s.ext_disjoint_timer_query)return null;var _=[];function D(){return _.pop()||s.ext_disjoint_timer_query.createQueryEXT()}function H(Z){_.push(Z)}var R=[];function I(Z){var me=D();s.ext_disjoint_timer_query.beginQueryEXT(Ru,me),R.push(me),K(R.length-1,R.length,Z)}function q(){s.ext_disjoint_timer_query.endQueryEXT(Ru)}function X(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var re=[];function ne(){return re.pop()||new X}function te(Z){re.push(Z)}var oe=[];function K(Z,me,V){var he=ne();he.startQueryIndex=Z,he.endQueryIndex=me,he.sum=0,he.stats=V,oe.push(he)}var ee=[],w=[];function N(){var Z,me,V=R.length;if(V!==0){w.length=Math.max(w.length,V+1),ee.length=Math.max(ee.length,V+1),ee[0]=0,w[0]=0;var he=0;for(Z=0,me=0;me<R.length;++me){var se=R[me];s.ext_disjoint_timer_query.getQueryObjectEXT(se,Tp)?(he+=s.ext_disjoint_timer_query.getQueryObjectEXT(se,Ep),H(se)):R[Z++]=se,ee[me+1]=he,w[me+1]=Z}for(R.length=Z,Z=0,me=0;me<oe.length;++me){var Le=oe[me],z=Le.startQueryIndex,$=Le.endQueryIndex;Le.sum+=ee[$]-ee[z];var be=w[z],fe=w[$];fe===be?(Le.stats.gpuTime+=Le.sum/1e6,te(Le)):(Le.startQueryIndex=be,Le.endQueryIndex=fe,oe[Z++]=Le)}oe.length=Z}}return{beginQuery:I,endQuery:q,pushScopeStats:K,update:N,getNumPendingQueries:function(){return R.length},clear:function(){_.push.apply(_,R);for(var Z=0;Z<_.length;Z++)s.ext_disjoint_timer_query.deleteQueryEXT(_[Z]);R.length=0,_.length=0},restore:function(){R.length=0,_.length=0}}},Sp=16384,Cp=256,kp=1024,Lp=34962,Du="webglcontextlost",Fu="webglcontextrestored",Nu=1,Op=2,Rp=3;function Iu(a,s){for(var _=0;_<a.length;++_)if(a[_]===s)return _;return-1}function Dp(a){var s=fo(a);if(!s)return null;var _=s.gl,D=_.getContextAttributes(),H=_.isContextLost(),R=_t(_,s);if(!R)return null;var I=oo(),q=Ap(),X=R.extensions,re=wp(_,X),ne=Dt(),te=_.drawingBufferWidth,oe=_.drawingBufferHeight,K={tick:0,time:0,viewportWidth:te,viewportHeight:oe,framebufferWidth:te,framebufferHeight:oe,drawingBufferWidth:te,drawingBufferHeight:oe,pixelRatio:s.pixelRatio},ee={},w={elements:null,primitive:4,count:-1,offset:0,instances:-1},N=_d(_,X),Z=Nd(_,q,s,he),me=Vd(_,X,Z,q),V=Vh(_,X,N,q,Z,me,w);function he(De){return V.destroyBuffer(De)}var se=Kh(_,I,q,s),Le=Eh(_,X,N,function(){be.procs.poll()},K,q,s),z=Th(_,X,N,q,s),$=jh(_,X,N,Le,z,q),be=xp(_,I,X,N,Z,me,Le,$,ee,V,se,w,K,re,s),fe=Jh(_,$,be.procs.poll,K,D,X,N),Q=be.next,le=_.canvas,ue=[],Ue=[],Be=[],ce=[s.onDestroy],pe=null;function Ne(){if(ue.length===0){re&&re.update(),pe=null;return}pe=gt.next(Ne),Pr();for(var De=ue.length-1;De>=0;--De){var We=ue[De];We&&We(K,null,0)}_.flush(),re&&re.update()}function $e(){!pe&&ue.length>0&&(pe=gt.next(Ne))}function Ve(){pe&&(gt.cancel(Ne),pe=null)}function dr(De){De.preventDefault(),H=!0,Ve(),Ue.forEach(function(We){We()})}function hr(De){_.getError(),H=!1,R.restore(),se.restore(),Z.restore(),Le.restore(),z.restore(),$.restore(),V.restore(),re&&re.restore(),be.procs.refresh(),$e(),Be.forEach(function(We){We()})}le&&(le.addEventListener(Du,dr,!1),le.addEventListener(Fu,hr,!1));function Xe(){ue.length=0,Ve(),le&&(le.removeEventListener(Du,dr),le.removeEventListener(Fu,hr)),se.clear(),$.clear(),z.clear(),V.clear(),Le.clear(),me.clear(),Z.clear(),re&&re.clear(),ce.forEach(function(De){De()})}function Sr(De){c(!!De,"invalid args to regl({...})"),c.type(De,"object","invalid args to regl({...})");function We(S){var x=n({},S);delete x.uniforms,delete x.attributes,delete x.context,delete x.vao,"stencil"in x&&x.stencil.op&&(x.stencil.opBack=x.stencil.opFront=x.stencil.op,delete x.stencil.op);function b(E){if(E in x){var h=x[E];delete x[E],Object.keys(h).forEach(function(g){x[E+"."+g]=h[g]})}}return b("blend"),b("depth"),b("cull"),b("stencil"),b("polygonOffset"),b("scissor"),b("sample"),"vao"in S&&(x.vao=S.vao),x}function Ze(S,x){var b={},E={};return Object.keys(S).forEach(function(h){var g=S[h];if(qr.isDynamic(g)){E[h]=qr.unbox(g,h);return}else if(x&&Array.isArray(g)){for(var p=0;p<g.length;++p)if(qr.isDynamic(g[p])){E[h]=qr.unbox(g,h);return}}b[h]=g}),{dynamic:E,static:b}}var br=Ze(De.context||{},!0),Ct=Ze(De.uniforms||{},!0),gn=Ze(De.attributes||{},!1),m=Ze(We(De),!1),F={gpuTime:0,cpuTime:0,count:0},O=be.compile(m,gn,Ct,br,F),ye=O.draw,Ye=O.batch,d=O.scope,l=[];function y(S){for(;l.length<S;)l.push(null);return l}function T(S,x){var b;if(H&&c.raise("context lost"),typeof S=="function")return d.call(this,null,S,0);if(typeof x=="function")if(typeof S=="number")for(b=0;b<S;++b)d.call(this,null,x,b);else if(Array.isArray(S))for(b=0;b<S.length;++b)d.call(this,S[b],x,b);else return d.call(this,S,x,0);else if(typeof S=="number"){if(S>0)return Ye.call(this,y(S|0),S|0)}else if(Array.isArray(S)){if(S.length)return Ye.call(this,S,S.length)}else return ye.call(this,S)}return n(T,{stats:F,destroy:function(){O.destroy()}})}var fr=$.setFBO=Sr({framebuffer:qr.define.call(null,Nu,"framebuffer")});function Ar(De,We){var Ze=0;be.procs.poll();var br=We.color;br&&(_.clearColor(+br[0]||0,+br[1]||0,+br[2]||0,+br[3]||0),Ze|=Sp),"depth"in We&&(_.clearDepth(+We.depth),Ze|=Cp),"stencil"in We&&(_.clearStencil(We.stencil|0),Ze|=kp),c(!!Ze,"called regl.clear with no buffer specified"),_.clear(Ze)}function Cr(De){if(c(typeof De=="object"&&De,"regl.clear() takes an object as input"),"framebuffer"in De)if(De.framebuffer&&De.framebuffer_reglType==="framebufferCube")for(var We=0;We<6;++We)fr(n({framebuffer:De.framebuffer.faces[We]},De),Ar);else fr(De,Ar);else Ar(null,De)}function kr(De){c.type(De,"function","regl.frame() callback must be a function"),ue.push(De);function We(){var Ze=Iu(ue,De);c(Ze>=0,"cannot cancel a frame twice");function br(){var Ct=Iu(ue,br);ue[Ct]=ue[ue.length-1],ue.length-=1,ue.length<=0&&Ve()}ue[Ze]=br}return $e(),{cancel:We}}function Nr(){var De=Q.viewport,We=Q.scissor_box;De[0]=De[1]=We[0]=We[1]=0,K.viewportWidth=K.framebufferWidth=K.drawingBufferWidth=De[2]=We[2]=_.drawingBufferWidth,K.viewportHeight=K.framebufferHeight=K.drawingBufferHeight=De[3]=We[3]=_.drawingBufferHeight}function Pr(){K.tick+=1,K.time=je(),Nr(),be.procs.poll()}function yr(){Le.refresh(),Nr(),be.procs.refresh(),re&&re.update()}function je(){return(Dt()-ne)/1e3}yr();function Ur(De,We){c.type(We,"function","listener callback must be a function");var Ze;switch(De){case"frame":return kr(We);case"lost":Ze=Ue;break;case"restore":Ze=Be;break;case"destroy":Ze=ce;break;default:c.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ze.push(We),{cancel:function(){for(var br=0;br<Ze.length;++br)if(Ze[br]===We){Ze[br]=Ze[Ze.length-1],Ze.pop();return}}}}var rr=n(Sr,{clear:Cr,prop:qr.define.bind(null,Nu),context:qr.define.bind(null,Op),this:qr.define.bind(null,Rp),draw:Sr({}),buffer:function(De){return Z.create(De,Lp,!1,!1)},elements:function(De){return me.create(De,!1)},texture:Le.create2D,cube:Le.createCube,renderbuffer:z.create,framebuffer:$.create,framebufferCube:$.createCube,vao:V.createVAO,attributes:D,frame:kr,on:Ur,limits:N,hasExtension:function(De){return N.extensions.indexOf(De.toLowerCase())>=0},read:fe,destroy:Xe,_gl:_,_refresh:yr,poll:function(){Pr(),re&&re.update()},now:je,stats:q});return s.onDone(null,rr),rr}return Dp})})(os);var Dy=os.exports,Ci={};function hm(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var r=e.which;if(r===2)return 4;if(r===3)return 2;if(r>0)return 1<<r-1}else if("button"in e){var r=e.button;if(r===1)return 4;if(r===2)return 2;if(r>=0)return 1<<r}}return 0}Ci.buttons=hm;function hf(e){return e.target||e.srcElement||window}Ci.element=hf;function pm(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var r=hf(e),t=r.getBoundingClientRect();return e.clientX-t.left}return 0}Ci.x=pm;function mm(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var r=hf(e),t=r.getBoundingClientRect();return e.clientY-t.top}return 0}Ci.y=mm;var vm=gm,ki=Ci;function gm(e,r){r||(r=e,e=window);var t=0,n=0,i=0,o={shift:!1,alt:!1,control:!1,meta:!1},f=!1;function u(J){var we=!1;return"altKey"in J&&(we=we||J.altKey!==o.alt,o.alt=!!J.altKey),"shiftKey"in J&&(we=we||J.shiftKey!==o.shift,o.shift=!!J.shiftKey),"ctrlKey"in J&&(we=we||J.ctrlKey!==o.control,o.control=!!J.ctrlKey),"metaKey"in J&&(we=we||J.metaKey!==o.meta,o.meta=!!J.metaKey),we}function v(J,we){var Fe=ki.x(we),ze=ki.y(we);"buttons"in we&&(J=we.buttons|0),(J!==t||Fe!==n||ze!==i||u(we))&&(t=J|0,n=Fe||0,i=ze||0,r&&r(t,n,i,o))}function A(J){v(0,J)}function M(){(t||n||i||o.shift||o.alt||o.meta||o.control)&&(n=i=0,t=0,o.shift=o.alt=o.control=o.meta=!1,r&&r(0,0,0,o))}function G(J){u(J)&&r&&r(t,n,i,o)}function W(J){ki.buttons(J)===0?v(0,J):v(t,J)}function B(J){v(t|ki.buttons(J),J)}function ge(J){v(t&~ki.buttons(J),J)}function Ee(){f||(f=!0,e.addEventListener("mousemove",W),e.addEventListener("mousedown",B),e.addEventListener("mouseup",ge),e.addEventListener("mouseleave",A),e.addEventListener("mouseenter",A),e.addEventListener("mouseout",A),e.addEventListener("mouseover",A),e.addEventListener("blur",M),e.addEventListener("keyup",G),e.addEventListener("keydown",G),e.addEventListener("keypress",G),e!==window&&(window.addEventListener("blur",M),window.addEventListener("keyup",G),window.addEventListener("keydown",G),window.addEventListener("keypress",G)))}function de(){!f||(f=!1,e.removeEventListener("mousemove",W),e.removeEventListener("mousedown",B),e.removeEventListener("mouseup",ge),e.removeEventListener("mouseleave",A),e.removeEventListener("mouseenter",A),e.removeEventListener("mouseout",A),e.removeEventListener("mouseover",A),e.removeEventListener("blur",M),e.removeEventListener("keyup",G),e.removeEventListener("keydown",G),e.removeEventListener("keypress",G),e!==window&&(window.removeEventListener("blur",M),window.removeEventListener("keyup",G),window.removeEventListener("keydown",G),window.removeEventListener("keypress",G)))}Ee();var Se={element:e};return Object.defineProperties(Se,{enabled:{get:function(){return f},set:function(J){J?Ee():de()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),Se}var _m=function(r,t){t||(t=[0,""]),r=String(r);var n=parseFloat(r,10);return t[0]=n,t[1]=r.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t},fs=_m,ym=mf,Li=ls("in",document.body);function pf(e,r){var t=fs(getComputedStyle(e).getPropertyValue(r));return t[0]*mf(t[1],e)}function ls(e,r){var t=document.createElement("div");t.style.height="128"+e,r.appendChild(t);var n=pf(t,"height")/128;return r.removeChild(t),n}function mf(e,r){if(!e)return null;switch(r=r||document.body,e=(e+""||"px").trim().toLowerCase(),(r===window||r===document)&&(r=document.body),e){case"%":return r.clientHeight/100;case"ch":case"ex":return ls(e,r);case"em":return pf(r,"font-size");case"rem":return pf(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return Li;case"cm":return Li/2.54;case"mm":return Li/25.4;case"pt":return Li/72;case"pc":return Li/6;case"px":return 1}var t=fs(e);if(!isNaN(t[0])&&t[1]){var n=mf(t[1],r);return typeof n=="number"?t[0]*n:null}return null}var bm=ym,xm=Am;function Am(e,r,t){typeof e=="function"&&(t=!!r,r=e,e=window);var n=bm("ex",e),i=function(o){t&&o.preventDefault();var f=o.deltaX||0,u=o.deltaY||0,v=o.deltaZ||0,A=o.deltaMode,M=1;switch(A){case 1:M=n;break;case 2:M=window.innerHeight;break}if(f*=M,u*=M,v*=M,f||u||v)return r(f,u,v,o)};return e.addEventListener("wheel",i),i}var us=Em;function Em(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var Tm=wm;function wm(e,r,t,n,i){var o=1/Math.tan(r/2),f=1/(n-i);return e[0]=o/t,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+n)*f,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*n*f,e[15]=0,e}var Sm=us,Cm=km;function km(e,r,t,n){var i,o,f,u,v,A,M,G,W,B,ge=r[0],Ee=r[1],de=r[2],Se=n[0],J=n[1],we=n[2],Fe=t[0],ze=t[1],er=t[2];return Math.abs(ge-Fe)<1e-6&&Math.abs(Ee-ze)<1e-6&&Math.abs(de-er)<1e-6?Sm(e):(M=ge-Fe,G=Ee-ze,W=de-er,B=1/Math.sqrt(M*M+G*G+W*W),M*=B,G*=B,W*=B,i=J*W-we*G,o=we*M-Se*W,f=Se*G-J*M,B=Math.sqrt(i*i+o*o+f*f),B?(B=1/B,i*=B,o*=B,f*=B):(i=0,o=0,f=0),u=G*f-W*o,v=W*i-M*f,A=M*o-G*i,B=Math.sqrt(u*u+v*v+A*A),B?(B=1/B,u*=B,v*=B,A*=B):(u=0,v=0,A=0),e[0]=i,e[1]=u,e[2]=M,e[3]=0,e[4]=o,e[5]=v,e[6]=G,e[7]=0,e[8]=f,e[9]=A,e[10]=W,e[11]=0,e[12]=-(i*ge+o*Ee+f*de),e[13]=-(u*ge+v*Ee+A*de),e[14]=-(M*ge+G*Ee+W*de),e[15]=1,e)}var Lm=vm,Om=xm,ss=us,Rm=Tm,Dm=Cm,Fy=Nm,Fm=typeof window!="undefined";function Nm(e,r){var t=r||{};typeof t.noScroll=="undefined"&&(t.noScroll=t.preventDefault);var n={view:ss(new Float32Array(16)),projection:ss(new Float32Array(16)),center:new Float32Array(t.center||3),theta:t.theta||0,phi:t.phi||0,distance:Math.log(t.distance||10),eye:new Float32Array(3),up:new Float32Array(t.up||[0,1,0]),fovy:t.fovy||Math.PI/4,near:typeof t.near!="undefined"?t.near:.01,far:typeof t.far!="undefined"?t.far:1e3,noScroll:typeof t.noScroll!="undefined"?t.noScroll:!1,flipY:!!t.flipY,dtheta:0,dphi:0,rotationSpeed:typeof t.rotationSpeed!="undefined"?t.rotationSpeed:1,zoomSpeed:typeof t.zoomSpeed!="undefined"?t.zoomSpeed:1,renderOnDirty:typeof t.renderOnDirty!==void 0?!!t.renderOnDirty:!1},i=t.element,o=typeof t.damping!="undefined"?t.damping:.9,f=new Float32Array([1,0,0]),u=new Float32Array([0,0,1]),v=Math.log("minDistance"in t?t.minDistance:.1),A=Math.log("maxDistance"in t?t.maxDistance:1e3),M=0,G=0,W=0;if(Fm&&t.mouse!==!1){let we=function(){return i?i.offsetWidth:window.innerWidth},Fe=function(){return i?i.offsetHeight:window.innerHeight};var B=i||e._gl.canvas;Lm(B,function(ze,er,vr){if(ze&1){var Er=(er-G)/we(),Zr=(vr-W)/Fe();n.dtheta+=n.rotationSpeed*4*Er,n.dphi+=n.rotationSpeed*4*Zr,n.dirty=!0}G=er,W=vr}),Om(B,function(ze,er){M+=er/Fe()*n.zoomSpeed,n.dirty=!0},t.noScroll)}function ge(we){var Fe=we*o;return Math.abs(Fe)<.1?0:(n.dirty=!0,Fe)}function Ee(we,Fe,ze){return Math.min(Math.max(we,Fe),ze)}function de(we){Object.keys(we).forEach(function(gr){n[gr]=we[gr]});var Fe=n.center,ze=n.eye,er=n.up,vr=n.dtheta,Er=n.dphi;n.theta+=vr,n.phi=Ee(n.phi+Er,-Math.PI/2,Math.PI/2),n.distance=Ee(n.distance+M,v,A),n.dtheta=ge(vr),n.dphi=ge(Er),M=ge(M);for(var Zr=n.theta,st=n.phi,ct=Math.exp(n.distance),dt=ct*Math.sin(Zr)*Math.cos(st),pr=ct*Math.cos(Zr)*Math.cos(st),Yr=ct*Math.sin(st),Ge=0;Ge<3;++Ge)ze[Ge]=Fe[Ge]+dt*u[Ge]+pr*f[Ge]+Yr*er[Ge];Dm(n.view,ze,Fe,er)}n.dirty=!0;var Se=e({context:Object.assign({},n,{dirty:function(){return n.dirty},projection:function(we){return Rm(n.projection,n.fovy,we.viewportWidth/we.viewportHeight,n.near,n.far),n.flipY&&(n.projection[5]*=-1),n.projection}}),uniforms:Object.keys(n).reduce(function(we,Fe){return we[Fe]=e.context(Fe),we},{})});function J(we,Fe){typeof J.dirty!="undefined"&&(n.dirty=J.dirty||n.dirty,J.dirty=void 0),we&&Fe&&(n.dirty=!0),!(n.renderOnDirty&&!n.dirty)&&(Fe||(Fe=we,we={}),de(we),Se(Fe),n.dirty=!1)}return Object.keys(n).forEach(function(we){J[we]=n[we]}),J}var vf=new Date,gf=new Date;function Gt(e,r,t,n){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=function(o){return e(o=new Date(+o)),o},i.ceil=function(o){return e(o=new Date(o-1)),r(o,1),e(o),o},i.round=function(o){var f=i(o),u=i.ceil(o);return o-f<u-o?f:u},i.offset=function(o,f){return r(o=new Date(+o),f==null?1:Math.floor(f)),o},i.range=function(o,f,u){var v=[],A;if(o=i.ceil(o),u=u==null?1:Math.floor(u),!(o<f)||!(u>0))return v;do v.push(A=new Date(+o)),r(o,u),e(o);while(A<o&&o<f);return v},i.filter=function(o){return Gt(function(f){if(f>=f)for(;e(f),!o(f);)f.setTime(f-1)},function(f,u){if(f>=f)if(u<0)for(;++u<=0;)for(;r(f,-1),!o(f););else for(;--u>=0;)for(;r(f,1),!o(f););})},t&&(i.count=function(o,f){return vf.setTime(+o),gf.setTime(+f),e(vf),e(gf),Math.floor(t(vf,gf))},i.every=function(o){return o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(n?function(f){return n(f)%o==0}:function(f){return i.count(0,f)%o==0}):i}),i}const Im=1e3,_f=Im*60,Mm=_f*60,yf=Mm*24,cs=yf*7;var Gm=Gt(e=>e.setHours(0,0,0,0),(e,r)=>e.setDate(e.getDate()+r),(e,r)=>(r-e-(r.getTimezoneOffset()-e.getTimezoneOffset())*_f)/yf,e=>e.getDate()-1),ds=Gm;function xn(e){return Gt(function(r){r.setDate(r.getDate()-(r.getDay()+7-e)%7),r.setHours(0,0,0,0)},function(r,t){r.setDate(r.getDate()+t*7)},function(r,t){return(t-r-(t.getTimezoneOffset()-r.getTimezoneOffset())*_f)/cs})}var Bm=xn(0),bf=xn(1);xn(2);xn(3);var Oi=xn(4);xn(5);xn(6);var hs=Gt(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,r){e.setFullYear(e.getFullYear()+r)},function(e,r){return r.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});hs.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Gt(function(r){r.setFullYear(Math.floor(r.getFullYear()/e)*e),r.setMonth(0,1),r.setHours(0,0,0,0)},function(r,t){r.setFullYear(r.getFullYear()+t*e)})};var Ri=hs,Pm=Gt(function(e){e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCDate(e.getUTCDate()+r)},function(e,r){return(r-e)/yf},function(e){return e.getUTCDate()-1}),ps=Pm;function An(e){return Gt(function(r){r.setUTCDate(r.getUTCDate()-(r.getUTCDay()+7-e)%7),r.setUTCHours(0,0,0,0)},function(r,t){r.setUTCDate(r.getUTCDate()+t*7)},function(r,t){return(t-r)/cs})}var Um=An(0),xf=An(1);An(2);An(3);var Di=An(4);An(5);An(6);var ms=Gt(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,r){e.setUTCFullYear(e.getUTCFullYear()+r)},function(e,r){return r.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});ms.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Gt(function(r){r.setUTCFullYear(Math.floor(r.getUTCFullYear()/e)*e),r.setUTCMonth(0,1),r.setUTCHours(0,0,0,0)},function(r,t){r.setUTCFullYear(r.getUTCFullYear()+t*e)})};var Fi=ms;function Af(e){if(0<=e.y&&e.y<100){var r=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return r.setFullYear(e.y),r}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ef(e){if(0<=e.y&&e.y<100){var r=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return r.setUTCFullYear(e.y),r}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ni(e,r,t){return{y:e,m:r,d:t,H:0,M:0,S:0,L:0}}function $m(e){var r=e.dateTime,t=e.date,n=e.time,i=e.periods,o=e.days,f=e.shortDays,u=e.months,v=e.shortMonths,A=Ii(i),M=Mi(i),G=Ii(o),W=Mi(o),B=Ii(f),ge=Mi(f),Ee=Ii(u),de=Mi(u),Se=Ii(v),J=Mi(v),we={a:at,A:Vr,b:Lr,B:ur,c:null,d:xs,e:xs,f:s0,g:b0,G:A0,H:f0,I:l0,j:u0,L:As,m:c0,M:d0,p:or,q:ht,Q:ks,s:Ls,S:h0,u:p0,U:m0,V:v0,w:g0,W:_0,x:null,X:null,y:y0,Y:x0,Z:E0,"%":Cs},Fe={a:sr,A:ot,b:mr,B:Rt,c:null,d:Ts,e:Ts,f:C0,g:G0,G:P0,H:T0,I:w0,j:S0,L:ws,m:k0,M:L0,p:tn,q:wn,Q:ks,s:Ls,S:O0,u:R0,U:D0,V:F0,w:N0,W:I0,x:null,X:null,y:M0,Y:B0,Z:U0,"%":Cs},ze={a:st,A:ct,b:dt,B:pr,c:Yr,d:ys,e:ys,f:n0,g:_s,G:gs,H:bs,I:bs,j:Jm,L:t0,m:Zm,M:e0,p:Zr,q:Qm,Q:a0,s:o0,S:r0,u:Vm,U:Wm,V:Xm,w:Ym,W:qm,x:Ge,X:gr,y:_s,Y:gs,Z:Km,"%":i0};we.x=er(t,we),we.X=er(n,we),we.c=er(r,we),Fe.x=er(t,Fe),Fe.X=er(n,Fe),Fe.c=er(r,Fe);function er(Ce,qe){return function(Ke){var ae=[],Tr=-1,nr=0,_r=Ce.length,wr,Jr,Dr;for(Ke instanceof Date||(Ke=new Date(+Ke));++Tr<_r;)Ce.charCodeAt(Tr)===37&&(ae.push(Ce.slice(nr,Tr)),(Jr=vs[wr=Ce.charAt(++Tr)])!=null?wr=Ce.charAt(++Tr):Jr=wr==="e"?" ":"0",(Dr=qe[wr])&&(wr=Dr(Ke,Jr)),ae.push(wr),nr=Tr+1);return ae.push(Ce.slice(nr,Tr)),ae.join("")}}function vr(Ce,qe){return function(Ke){var ae=Ni(1900,void 0,1),Tr=Er(ae,Ce,Ke+="",0),nr,_r;if(Tr!=Ke.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(qe&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(nr=Ef(Ni(ae.y,0,1)),_r=nr.getUTCDay(),nr=_r>4||_r===0?xf.ceil(nr):xf(nr),nr=ps.offset(nr,(ae.V-1)*7),ae.y=nr.getUTCFullYear(),ae.m=nr.getUTCMonth(),ae.d=nr.getUTCDate()+(ae.w+6)%7):(nr=Af(Ni(ae.y,0,1)),_r=nr.getDay(),nr=_r>4||_r===0?bf.ceil(nr):bf(nr),nr=ds.offset(nr,(ae.V-1)*7),ae.y=nr.getFullYear(),ae.m=nr.getMonth(),ae.d=nr.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),_r="Z"in ae?Ef(Ni(ae.y,0,1)).getUTCDay():Af(Ni(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(_r+5)%7:ae.w+ae.U*7-(_r+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,Ef(ae)):Af(ae)}}function Er(Ce,qe,Ke,ae){for(var Tr=0,nr=qe.length,_r=Ke.length,wr,Jr;Tr<nr;){if(ae>=_r)return-1;if(wr=qe.charCodeAt(Tr++),wr===37){if(wr=qe.charAt(Tr++),Jr=ze[wr in vs?qe.charAt(Tr++):wr],!Jr||(ae=Jr(Ce,Ke,ae))<0)return-1}else if(wr!=Ke.charCodeAt(ae++))return-1}return ae}function Zr(Ce,qe,Ke){var ae=A.exec(qe.slice(Ke));return ae?(Ce.p=M.get(ae[0].toLowerCase()),Ke+ae[0].length):-1}function st(Ce,qe,Ke){var ae=B.exec(qe.slice(Ke));return ae?(Ce.w=ge.get(ae[0].toLowerCase()),Ke+ae[0].length):-1}function ct(Ce,qe,Ke){var ae=G.exec(qe.slice(Ke));return ae?(Ce.w=W.get(ae[0].toLowerCase()),Ke+ae[0].length):-1}function dt(Ce,qe,Ke){var ae=Se.exec(qe.slice(Ke));return ae?(Ce.m=J.get(ae[0].toLowerCase()),Ke+ae[0].length):-1}function pr(Ce,qe,Ke){var ae=Ee.exec(qe.slice(Ke));return ae?(Ce.m=de.get(ae[0].toLowerCase()),Ke+ae[0].length):-1}function Yr(Ce,qe,Ke){return Er(Ce,r,qe,Ke)}function Ge(Ce,qe,Ke){return Er(Ce,t,qe,Ke)}function gr(Ce,qe,Ke){return Er(Ce,n,qe,Ke)}function at(Ce){return f[Ce.getDay()]}function Vr(Ce){return o[Ce.getDay()]}function Lr(Ce){return v[Ce.getMonth()]}function ur(Ce){return u[Ce.getMonth()]}function or(Ce){return i[+(Ce.getHours()>=12)]}function ht(Ce){return 1+~~(Ce.getMonth()/3)}function sr(Ce){return f[Ce.getUTCDay()]}function ot(Ce){return o[Ce.getUTCDay()]}function mr(Ce){return v[Ce.getUTCMonth()]}function Rt(Ce){return u[Ce.getUTCMonth()]}function tn(Ce){return i[+(Ce.getUTCHours()>=12)]}function wn(Ce){return 1+~~(Ce.getUTCMonth()/3)}return{format:function(Ce){var qe=er(Ce+="",we);return qe.toString=function(){return Ce},qe},parse:function(Ce){var qe=vr(Ce+="",!1);return qe.toString=function(){return Ce},qe},utcFormat:function(Ce){var qe=er(Ce+="",Fe);return qe.toString=function(){return Ce},qe},utcParse:function(Ce){var qe=vr(Ce+="",!0);return qe.toString=function(){return Ce},qe}}}var vs={"-":"",_:" ","0":"0"},Hr=/^\s*\d+/,Hm=/^%/,zm=/[\\^$*+?|[\]().{}]/g;function ir(e,r,t){var n=e<0?"-":"",i=(n?-e:e)+"",o=i.length;return n+(o<t?new Array(t-o+1).join(r)+i:i)}function jm(e){return e.replace(zm,"\\$&")}function Ii(e){return new RegExp("^(?:"+e.map(jm).join("|")+")","i")}function Mi(e){return new Map(e.map((r,t)=>[r.toLowerCase(),t]))}function Ym(e,r,t){var n=Hr.exec(r.slice(t,t+1));return n?(e.w=+n[0],t+n[0].length):-1}function Vm(e,r,t){var n=Hr.exec(r.slice(t,t+1));return n?(e.u=+n[0],t+n[0].length):-1}function Wm(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.U=+n[0],t+n[0].length):-1}function Xm(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.V=+n[0],t+n[0].length):-1}function qm(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.W=+n[0],t+n[0].length):-1}function gs(e,r,t){var n=Hr.exec(r.slice(t,t+4));return n?(e.y=+n[0],t+n[0].length):-1}function _s(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),t+n[0].length):-1}function Km(e,r,t){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(r.slice(t,t+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),t+n[0].length):-1}function Qm(e,r,t){var n=Hr.exec(r.slice(t,t+1));return n?(e.q=n[0]*3-3,t+n[0].length):-1}function Zm(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.m=n[0]-1,t+n[0].length):-1}function ys(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.d=+n[0],t+n[0].length):-1}function Jm(e,r,t){var n=Hr.exec(r.slice(t,t+3));return n?(e.m=0,e.d=+n[0],t+n[0].length):-1}function bs(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.H=+n[0],t+n[0].length):-1}function e0(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.M=+n[0],t+n[0].length):-1}function r0(e,r,t){var n=Hr.exec(r.slice(t,t+2));return n?(e.S=+n[0],t+n[0].length):-1}function t0(e,r,t){var n=Hr.exec(r.slice(t,t+3));return n?(e.L=+n[0],t+n[0].length):-1}function n0(e,r,t){var n=Hr.exec(r.slice(t,t+6));return n?(e.L=Math.floor(n[0]/1e3),t+n[0].length):-1}function i0(e,r,t){var n=Hm.exec(r.slice(t,t+1));return n?t+n[0].length:-1}function a0(e,r,t){var n=Hr.exec(r.slice(t));return n?(e.Q=+n[0],t+n[0].length):-1}function o0(e,r,t){var n=Hr.exec(r.slice(t));return n?(e.s=+n[0],t+n[0].length):-1}function xs(e,r){return ir(e.getDate(),r,2)}function f0(e,r){return ir(e.getHours(),r,2)}function l0(e,r){return ir(e.getHours()%12||12,r,2)}function u0(e,r){return ir(1+ds.count(Ri(e),e),r,3)}function As(e,r){return ir(e.getMilliseconds(),r,3)}function s0(e,r){return As(e,r)+"000"}function c0(e,r){return ir(e.getMonth()+1,r,2)}function d0(e,r){return ir(e.getMinutes(),r,2)}function h0(e,r){return ir(e.getSeconds(),r,2)}function p0(e){var r=e.getDay();return r===0?7:r}function m0(e,r){return ir(Bm.count(Ri(e)-1,e),r,2)}function Es(e){var r=e.getDay();return r>=4||r===0?Oi(e):Oi.ceil(e)}function v0(e,r){return e=Es(e),ir(Oi.count(Ri(e),e)+(Ri(e).getDay()===4),r,2)}function g0(e){return e.getDay()}function _0(e,r){return ir(bf.count(Ri(e)-1,e),r,2)}function y0(e,r){return ir(e.getFullYear()%100,r,2)}function b0(e,r){return e=Es(e),ir(e.getFullYear()%100,r,2)}function x0(e,r){return ir(e.getFullYear()%1e4,r,4)}function A0(e,r){var t=e.getDay();return e=t>=4||t===0?Oi(e):Oi.ceil(e),ir(e.getFullYear()%1e4,r,4)}function E0(e){var r=e.getTimezoneOffset();return(r>0?"-":(r*=-1,"+"))+ir(r/60|0,"0",2)+ir(r%60,"0",2)}function Ts(e,r){return ir(e.getUTCDate(),r,2)}function T0(e,r){return ir(e.getUTCHours(),r,2)}function w0(e,r){return ir(e.getUTCHours()%12||12,r,2)}function S0(e,r){return ir(1+ps.count(Fi(e),e),r,3)}function ws(e,r){return ir(e.getUTCMilliseconds(),r,3)}function C0(e,r){return ws(e,r)+"000"}function k0(e,r){return ir(e.getUTCMonth()+1,r,2)}function L0(e,r){return ir(e.getUTCMinutes(),r,2)}function O0(e,r){return ir(e.getUTCSeconds(),r,2)}function R0(e){var r=e.getUTCDay();return r===0?7:r}function D0(e,r){return ir(Um.count(Fi(e)-1,e),r,2)}function Ss(e){var r=e.getUTCDay();return r>=4||r===0?Di(e):Di.ceil(e)}function F0(e,r){return e=Ss(e),ir(Di.count(Fi(e),e)+(Fi(e).getUTCDay()===4),r,2)}function N0(e){return e.getUTCDay()}function I0(e,r){return ir(xf.count(Fi(e)-1,e),r,2)}function M0(e,r){return ir(e.getUTCFullYear()%100,r,2)}function G0(e,r){return e=Ss(e),ir(e.getUTCFullYear()%100,r,2)}function B0(e,r){return ir(e.getUTCFullYear()%1e4,r,4)}function P0(e,r){var t=e.getUTCDay();return e=t>=4||t===0?Di(e):Di.ceil(e),ir(e.getUTCFullYear()%1e4,r,4)}function U0(){return"+0000"}function Cs(){return"%"}function ks(e){return+e}function Ls(e){return Math.floor(+e/1e3)}var Va,$0,H0;z0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function z0(e){return Va=$m(e),$0=Va.format,H0=Va.parse,Va}function Os(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Xn=Os();function j0(e){Xn=e}const Y0=/[&<>"']/,V0=/[&<>"']/g,W0=/[<>"']|&(?!#?\w+;)/,X0=/[<>"']|&(?!#?\w+;)/g,q0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Rs=e=>q0[e];function zr(e,r){if(r){if(Y0.test(e))return e.replace(V0,Rs)}else if(W0.test(e))return e.replace(X0,Rs);return e}const K0=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ds(e){return e.replace(K0,(r,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const Q0=/(^|[^\[])\^/g;function lr(e,r){e=e.source||e,r=r||"";const t={replace:(n,i)=>(i=i.source||i,i=i.replace(Q0,"$1"),e=e.replace(n,i),t),getRegex:()=>new RegExp(e,r)};return t}const Z0=/[^\w:]/g,J0=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function Fs(e,r,t){if(e){let n;try{n=decodeURIComponent(Ds(t)).replace(Z0,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}r&&!J0.test(t)&&(t=nv(r,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const Wa={},ev=/^[^:]+:\/*[^/]*$/,rv=/^([^:]+:)[\s\S]*$/,tv=/^([^:]+:\/*[^/]*)[\s\S]*$/;function nv(e,r){Wa[" "+e]||(ev.test(e)?Wa[" "+e]=e+"/":Wa[" "+e]=qa(e,"/",!0)),e=Wa[" "+e];const t=e.indexOf(":")===-1;return r.substring(0,2)==="//"?t?r:e.replace(rv,"$1")+r:r.charAt(0)==="/"?t?r:e.replace(tv,"$1")+r:e+r}const Xa={exec:function(){}};function At(e){let r=1,t,n;for(;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function Ns(e,r){const t=e.replace(/\|/g,(o,f,u)=>{let v=!1,A=f;for(;--A>=0&&u[A]==="\\";)v=!v;return v?"|":" |"}),n=t.split(/ \|/);let i=0;if(n[0].trim()||n.shift(),n[n.length-1].trim()||n.pop(),n.length>r)n.splice(r);else for(;n.length<r;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function qa(e,r,t){const n=e.length;if(n===0)return"";let i=0;for(;i<n;){const o=e.charAt(n-i-1);if(o===r&&!t)i++;else if(o!==r&&t)i++;else break}return e.substr(0,n-i)}function iv(e,r){if(e.indexOf(r[1])===-1)return-1;const t=e.length;let n=0,i=0;for(;i<t;i++)if(e[i]==="\\")i++;else if(e[i]===r[0])n++;else if(e[i]===r[1]&&(n--,n<0))return i;return-1}function Is(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Ms(e,r){if(r<1)return"";let t="";for(;r>1;)r&1&&(t+=e),r>>=1,e+=e;return t+e}function Gs(e,r,t,n){const i=r.href,o=r.title?zr(r.title):null,f=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){n.state.inLink=!0;const u={type:"link",raw:t,href:i,title:o,text:f,tokens:n.inlineTokens(f,[])};return n.state.inLink=!1,u}else return{type:"image",raw:t,href:i,title:o,text:zr(f)}}function av(e,r){const t=e.match(/^(\s+)(?:```)/);if(t===null)return r;const n=t[1];return r.split(`
`).map(i=>{const o=i.match(/^\s+/);if(o===null)return i;const[f]=o;return f.length>=n.length?i.slice(n.length):i}).join(`
`)}class Tf{constructor(r){this.options=r||Xn}space(r){const t=this.rules.block.newline.exec(r);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(r){const t=this.rules.block.code.exec(r);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:qa(n,`
`)}}}fences(r){const t=this.rules.block.fences.exec(r);if(t){const n=t[0],i=av(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}}heading(r){const t=this.rules.block.heading.exec(r);if(t){let n=t[2].trim();if(/#$/.test(n)){const o=qa(n,"#");(this.options.pedantic||!o||/ $/.test(o))&&(n=o.trim())}const i={type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:[]};return this.lexer.inline(i.text,i.tokens),i}}hr(r){const t=this.rules.block.hr.exec(r);if(t)return{type:"hr",raw:t[0]}}blockquote(r){const t=this.rules.block.blockquote.exec(r);if(t){const n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],tokens:this.lexer.blockTokens(n,[]),text:n}}}list(r){let t=this.rules.block.list.exec(r);if(t){let n,i,o,f,u,v,A,M,G,W,B,ge,Ee=t[1].trim();const de=Ee.length>1,Se={type:"list",raw:"",ordered:de,start:de?+Ee.slice(0,-1):"",loose:!1,items:[]};Ee=de?`\\d{1,9}\\${Ee.slice(-1)}`:`\\${Ee}`,this.options.pedantic&&(Ee=de?Ee:"[*+-]");const J=new RegExp(`^( {0,3}${Ee})((?: [^\\n]*)?(?:\\n|$))`);for(;r&&(ge=!1,!(!(t=J.exec(r))||this.rules.block.hr.test(r)));){if(n=t[0],r=r.substring(n.length),M=t[2].split(`
`,1)[0],G=r.split(`
`,1)[0],this.options.pedantic?(f=2,B=M.trimLeft()):(f=t[2].search(/[^ ]/),f=f>4?1:f,B=M.slice(f),f+=t[1].length),v=!1,!M&&/^ *$/.test(G)&&(n+=G+`
`,r=r.substring(G.length+1),ge=!0),!ge){const Fe=new RegExp(`^ {0,${Math.min(3,f-1)}}(?:[*+-]|\\d{1,9}[.)])`);for(;r&&(W=r.split(`
`,1)[0],M=W,this.options.pedantic&&(M=M.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!Fe.test(M));){if(M.search(/[^ ]/)>=f||!M.trim())B+=`
`+M.slice(f);else if(!v)B+=`
`+M;else break;!v&&!M.trim()&&(v=!0),n+=W+`
`,r=r.substring(W.length+1)}}Se.loose||(A?Se.loose=!0:/\n *\n *$/.test(n)&&(A=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(B),i&&(o=i[0]!=="[ ] ",B=B.replace(/^\[[ xX]\] +/,""))),Se.items.push({type:"list_item",raw:n,task:!!i,checked:o,loose:!1,text:B}),Se.raw+=n}Se.items[Se.items.length-1].raw=n.trimRight(),Se.items[Se.items.length-1].text=B.trimRight(),Se.raw=Se.raw.trimRight();const we=Se.items.length;for(u=0;u<we;u++){this.lexer.state.top=!1,Se.items[u].tokens=this.lexer.blockTokens(Se.items[u].text,[]);const Fe=Se.items[u].tokens.filter(er=>er.type==="space"),ze=Fe.every(er=>{const vr=er.raw.split("");let Er=0;for(const Zr of vr)if(Zr===`
`&&(Er+=1),Er>1)return!0;return!1});!Se.loose&&Fe.length&&ze&&(Se.loose=!0,Se.items[u].loose=!0)}return Se}}html(r){const t=this.rules.block.html.exec(r);if(t){const n={type:"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:t[0]};return this.options.sanitize&&(n.type="paragraph",n.text=this.options.sanitizer?this.options.sanitizer(t[0]):zr(t[0]),n.tokens=[],this.lexer.inline(n.text,n.tokens)),n}}def(r){const t=this.rules.block.def.exec(r);if(t){t[3]&&(t[3]=t[3].substring(1,t[3].length-1));const n=t[1].toLowerCase().replace(/\s+/g," ");return{type:"def",tag:n,raw:t[0],href:t[2],title:t[3]}}}table(r){const t=this.rules.block.table.exec(r);if(t){const n={type:"table",header:Ns(t[1]).map(i=>({text:i})),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:t[3]?t[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=t[0];let i=n.align.length,o,f,u,v;for(o=0;o<i;o++)/^ *-+: *$/.test(n.align[o])?n.align[o]="right":/^ *:-+: *$/.test(n.align[o])?n.align[o]="center":/^ *:-+ *$/.test(n.align[o])?n.align[o]="left":n.align[o]=null;for(i=n.rows.length,o=0;o<i;o++)n.rows[o]=Ns(n.rows[o],n.header.length).map(A=>({text:A}));for(i=n.header.length,f=0;f<i;f++)n.header[f].tokens=[],this.lexer.inlineTokens(n.header[f].text,n.header[f].tokens);for(i=n.rows.length,f=0;f<i;f++)for(v=n.rows[f],u=0;u<v.length;u++)v[u].tokens=[],this.lexer.inlineTokens(v[u].text,v[u].tokens);return n}}}lheading(r){const t=this.rules.block.lheading.exec(r);if(t){const n={type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}paragraph(r){const t=this.rules.block.paragraph.exec(r);if(t){const n={type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}text(r){const t=this.rules.block.text.exec(r);if(t){const n={type:"text",raw:t[0],text:t[0],tokens:[]};return this.lexer.inline(n.text,n.tokens),n}}escape(r){const t=this.rules.inline.escape.exec(r);if(t)return{type:"escape",raw:t[0],text:zr(t[1])}}tag(r){const t=this.rules.inline.tag.exec(r);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):zr(t[0]):t[0]}}link(r){const t=this.rules.inline.link.exec(r);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const f=qa(n.slice(0,-1),"\\");if((n.length-f.length)%2==0)return}else{const f=iv(t[2],"()");if(f>-1){const v=(t[0].indexOf("!")===0?5:4)+t[1].length+f;t[2]=t[2].substring(0,f),t[0]=t[0].substring(0,v).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){const f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);f&&(i=f[1],o=f[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),Gs(t,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:o&&o.replace(this.rules.inline._escapes,"$1")},t[0],this.lexer)}}reflink(r,t){let n;if((n=this.rules.inline.reflink.exec(r))||(n=this.rules.inline.nolink.exec(r))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=t[i.toLowerCase()],!i||!i.href){const o=n[0].charAt(0);return{type:"text",raw:o,text:o}}return Gs(n,i,n[0],this.lexer)}}emStrong(r,t,n=""){let i=this.rules.inline.emStrong.lDelim.exec(r);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;const o=i[1]||i[2]||"";if(!o||o&&(n===""||this.rules.inline.punctuation.exec(n))){const f=i[0].length-1;let u,v,A=f,M=0;const G=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(G.lastIndex=0,t=t.slice(-1*r.length+f);(i=G.exec(t))!=null;){if(u=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!u)continue;if(v=u.length,i[3]||i[4]){A+=v;continue}else if((i[5]||i[6])&&f%3&&!((f+v)%3)){M+=v;continue}if(A-=v,A>0)continue;if(v=Math.min(v,v+A+M),Math.min(f,v)%2){const B=r.slice(1,f+i.index+v);return{type:"em",raw:r.slice(0,f+i.index+v+1),text:B,tokens:this.lexer.inlineTokens(B,[])}}const W=r.slice(2,f+i.index+v-1);return{type:"strong",raw:r.slice(0,f+i.index+v+1),text:W,tokens:this.lexer.inlineTokens(W,[])}}}}codespan(r){const t=this.rules.inline.code.exec(r);if(t){let n=t[2].replace(/\n/g," ");const i=/[^ ]/.test(n),o=/^ /.test(n)&&/ $/.test(n);return i&&o&&(n=n.substring(1,n.length-1)),n=zr(n,!0),{type:"codespan",raw:t[0],text:n}}}br(r){const t=this.rules.inline.br.exec(r);if(t)return{type:"br",raw:t[0]}}del(r){const t=this.rules.inline.del.exec(r);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2],[])}}autolink(r,t){const n=this.rules.inline.autolink.exec(r);if(n){let i,o;return n[2]==="@"?(i=zr(this.options.mangle?t(n[1]):n[1]),o="mailto:"+i):(i=zr(n[1]),o=i),{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}url(r,t){let n;if(n=this.rules.inline.url.exec(r)){let i,o;if(n[2]==="@")i=zr(this.options.mangle?t(n[0]):n[0]),o="mailto:"+i;else{let f;do f=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(f!==n[0]);i=zr(n[0]),n[1]==="www."?o="http://"+i:o=i}return{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(r,t){const n=this.rules.inline.text.exec(r);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):zr(n[0]):n[0]:i=zr(this.options.smartypants?t(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}}const He={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)( [^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Xa,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};He._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;He._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;He.def=lr(He.def).replace("label",He._label).replace("title",He._title).getRegex();He.bullet=/(?:[*+-]|\d{1,9}[.)])/;He.listItemStart=lr(/^( *)(bull) */).replace("bull",He.bullet).getRegex();He.list=lr(He.list).replace(/bull/g,He.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+He.def.source+")").getRegex();He._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";He._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;He.html=lr(He.html,"i").replace("comment",He._comment).replace("tag",He._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();He.paragraph=lr(He._paragraph).replace("hr",He.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",He._tag).getRegex();He.blockquote=lr(He.blockquote).replace("paragraph",He.paragraph).getRegex();He.normal=At({},He);He.gfm=At({},He.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});He.gfm.table=lr(He.gfm.table).replace("hr",He.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",He._tag).getRegex();He.gfm.paragraph=lr(He._paragraph).replace("hr",He.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",He.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",He._tag).getRegex();He.pedantic=At({},He.normal,{html:lr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",He._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Xa,paragraph:lr(He.normal._paragraph).replace("hr",He.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",He.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const Re={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Xa,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Xa,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Re._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Re.punctuation=lr(Re.punctuation).replace(/punctuation/g,Re._punctuation).getRegex();Re.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Re.escapedEmSt=/\\\*|\\_/g;Re._comment=lr(He._comment).replace("(?:-->|$)","-->").getRegex();Re.emStrong.lDelim=lr(Re.emStrong.lDelim).replace(/punct/g,Re._punctuation).getRegex();Re.emStrong.rDelimAst=lr(Re.emStrong.rDelimAst,"g").replace(/punct/g,Re._punctuation).getRegex();Re.emStrong.rDelimUnd=lr(Re.emStrong.rDelimUnd,"g").replace(/punct/g,Re._punctuation).getRegex();Re._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Re._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Re._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Re.autolink=lr(Re.autolink).replace("scheme",Re._scheme).replace("email",Re._email).getRegex();Re._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Re.tag=lr(Re.tag).replace("comment",Re._comment).replace("attribute",Re._attribute).getRegex();Re._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Re._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Re._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Re.link=lr(Re.link).replace("label",Re._label).replace("href",Re._href).replace("title",Re._title).getRegex();Re.reflink=lr(Re.reflink).replace("label",Re._label).replace("ref",He._label).getRegex();Re.nolink=lr(Re.nolink).replace("ref",He._label).getRegex();Re.reflinkSearch=lr(Re.reflinkSearch,"g").replace("reflink",Re.reflink).replace("nolink",Re.nolink).getRegex();Re.normal=At({},Re);Re.pedantic=At({},Re.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:lr(/^!?\[(label)\]\((.*?)\)/).replace("label",Re._label).getRegex(),reflink:lr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Re._label).getRegex()});Re.gfm=At({},Re.normal,{escape:lr(Re.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Re.gfm.url=lr(Re.gfm.url,"i").replace("email",Re.gfm._extended_email).getRegex();Re.breaks=At({},Re.gfm,{br:lr(Re.br).replace("{2,}","*").getRegex(),text:lr(Re.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function ov(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function Bs(e){let r="",t,n;const i=e.length;for(t=0;t<i;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),r+="&#"+n+";";return r}class Bt{constructor(r){this.tokens=[],this.tokens.links=Object.create(null),this.options=r||Xn,this.options.tokenizer=this.options.tokenizer||new Tf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:He.normal,inline:Re.normal};this.options.pedantic?(t.block=He.pedantic,t.inline=Re.pedantic):this.options.gfm&&(t.block=He.gfm,this.options.breaks?t.inline=Re.breaks:t.inline=Re.gfm),this.tokenizer.rules=t}static get rules(){return{block:He,inline:Re}}static lex(r,t){return new Bt(t).lex(r)}static lexInline(r,t){return new Bt(t).inlineTokens(r)}lex(r){r=r.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(r,this.tokens);let t;for(;t=this.inlineQueue.shift();)this.inlineTokens(t.src,t.tokens);return this.tokens}blockTokens(r,t=[]){this.options.pedantic&&(r=r.replace(/^ +$/gm,""));let n,i,o,f;for(;r;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(u=>(n=u.call({lexer:this},r,t))?(r=r.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.space(r)){r=r.substring(n.raw.length),n.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(r)){r=r.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(n=this.tokenizer.fences(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(r)){r=r.substring(n.raw.length),i=t[t.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(r)){r=r.substring(n.raw.length),t.push(n);continue}if(o=r,this.options.extensions&&this.options.extensions.startBlock){let u=1/0;const v=r.slice(1);let A;this.options.extensions.startBlock.forEach(function(M){A=M.call({lexer:this},v),typeof A=="number"&&A>=0&&(u=Math.min(u,A))}),u<1/0&&u>=0&&(o=r.substring(0,u+1))}if(this.state.top&&(n=this.tokenizer.paragraph(o))){i=t[t.length-1],f&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n),f=o.length!==r.length,r=r.substring(n.raw.length);continue}if(n=this.tokenizer.text(r)){r=r.substring(n.raw.length),i=t[t.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(n);continue}if(r){const u="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(r,t){this.inlineQueue.push({src:r,tokens:t})}inlineTokens(r,t=[]){let n,i,o,f=r,u,v,A;if(this.tokens.links){const M=Object.keys(this.tokens.links);if(M.length>0)for(;(u=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)M.includes(u[0].slice(u[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,u.index)+"["+Ms("a",u[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(u=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,u.index)+"["+Ms("a",u[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(u=this.tokenizer.rules.inline.escapedEmSt.exec(f))!=null;)f=f.slice(0,u.index)+"++"+f.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;r;)if(v||(A=""),v=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(M=>(n=M.call({lexer:this},r,t))?(r=r.substring(n.raw.length),t.push(n),!0):!1))){if(n=this.tokenizer.escape(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.tag(r)){r=r.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.link(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.reflink(r,this.tokens.links)){r=r.substring(n.raw.length),i=t[t.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(n=this.tokenizer.emStrong(r,f,A)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.codespan(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.br(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.del(r)){r=r.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.autolink(r,Bs)){r=r.substring(n.raw.length),t.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(r,Bs))){r=r.substring(n.raw.length),t.push(n);continue}if(o=r,this.options.extensions&&this.options.extensions.startInline){let M=1/0;const G=r.slice(1);let W;this.options.extensions.startInline.forEach(function(B){W=B.call({lexer:this},G),typeof W=="number"&&W>=0&&(M=Math.min(M,W))}),M<1/0&&M>=0&&(o=r.substring(0,M+1))}if(n=this.tokenizer.inlineText(o,ov)){r=r.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(A=n.raw.slice(-1)),v=!0,i=t[t.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):t.push(n);continue}if(r){const M="Infinite loop on byte: "+r.charCodeAt(0);if(this.options.silent){console.error(M);break}else throw new Error(M)}}return t}}class wf{constructor(r){this.options=r||Xn}code(r,t,n){const i=(t||"").match(/\S*/)[0];if(this.options.highlight){const o=this.options.highlight(r,i);o!=null&&o!==r&&(n=!0,r=o)}return r=r.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+zr(i,!0)+'">'+(n?r:zr(r,!0))+`</code></pre>
`:"<pre><code>"+(n?r:zr(r,!0))+`</code></pre>
`}blockquote(r){return`<blockquote>
`+r+`</blockquote>
`}html(r){return r}heading(r,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+r+"</h"+t+`>
`:"<h"+t+">"+r+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(r,t,n){const i=t?"ol":"ul",o=t&&n!==1?' start="'+n+'"':"";return"<"+i+o+`>
`+r+"</"+i+`>
`}listitem(r){return"<li>"+r+`</li>
`}checkbox(r){return"<input "+(r?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(r){return"<p>"+r+`</p>
`}table(r,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+r+`</thead>
`+t+`</table>
`}tablerow(r){return`<tr>
`+r+`</tr>
`}tablecell(r,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+r+"</"+n+`>
`}strong(r){return"<strong>"+r+"</strong>"}em(r){return"<em>"+r+"</em>"}codespan(r){return"<code>"+r+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(r){return"<del>"+r+"</del>"}link(r,t,n){if(r=Fs(this.options.sanitize,this.options.baseUrl,r),r===null)return n;let i='<a href="'+zr(r)+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>",i}image(r,t,n){if(r=Fs(this.options.sanitize,this.options.baseUrl,r),r===null)return n;let i='<img src="'+r+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+=this.options.xhtml?"/>":">",i}text(r){return r}}class Ps{strong(r){return r}em(r){return r}codespan(r){return r}del(r){return r}html(r){return r}text(r){return r}link(r,t,n){return""+n}image(r,t,n){return""+n}br(){return""}}class Us{constructor(){this.seen={}}serialize(r){return r.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(r,t){let n=r,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[r];do i++,n=r+"-"+i;while(this.seen.hasOwnProperty(n))}return t||(this.seen[r]=i,this.seen[n]=0),n}slug(r,t={}){const n=this.serialize(r);return this.getNextSafeSlug(n,t.dryrun)}}class Pt{constructor(r){this.options=r||Xn,this.options.renderer=this.options.renderer||new wf,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ps,this.slugger=new Us}static parse(r,t){return new Pt(t).parse(r)}static parseInline(r,t){return new Pt(t).parseInline(r)}parse(r,t=!0){let n="",i,o,f,u,v,A,M,G,W,B,ge,Ee,de,Se,J,we,Fe,ze,er;const vr=r.length;for(i=0;i<vr;i++){if(B=r[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[B.type]&&(er=this.options.extensions.renderers[B.type].call({parser:this},B),er!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(B.type))){n+=er||"";continue}switch(B.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(B.tokens),B.depth,Ds(this.parseInline(B.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(B.text,B.lang,B.escaped);continue}case"table":{for(G="",M="",u=B.header.length,o=0;o<u;o++)M+=this.renderer.tablecell(this.parseInline(B.header[o].tokens),{header:!0,align:B.align[o]});for(G+=this.renderer.tablerow(M),W="",u=B.rows.length,o=0;o<u;o++){for(A=B.rows[o],M="",v=A.length,f=0;f<v;f++)M+=this.renderer.tablecell(this.parseInline(A[f].tokens),{header:!1,align:B.align[f]});W+=this.renderer.tablerow(M)}n+=this.renderer.table(G,W);continue}case"blockquote":{W=this.parse(B.tokens),n+=this.renderer.blockquote(W);continue}case"list":{for(ge=B.ordered,Ee=B.start,de=B.loose,u=B.items.length,W="",o=0;o<u;o++)J=B.items[o],we=J.checked,Fe=J.task,Se="",J.task&&(ze=this.renderer.checkbox(we),de?J.tokens.length>0&&J.tokens[0].type==="paragraph"?(J.tokens[0].text=ze+" "+J.tokens[0].text,J.tokens[0].tokens&&J.tokens[0].tokens.length>0&&J.tokens[0].tokens[0].type==="text"&&(J.tokens[0].tokens[0].text=ze+" "+J.tokens[0].tokens[0].text)):J.tokens.unshift({type:"text",text:ze}):Se+=ze),Se+=this.parse(J.tokens,de),W+=this.renderer.listitem(Se,Fe,we);n+=this.renderer.list(W,ge,Ee);continue}case"html":{n+=this.renderer.html(B.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(B.tokens));continue}case"text":{for(W=B.tokens?this.parseInline(B.tokens):B.text;i+1<vr&&r[i+1].type==="text";)B=r[++i],W+=`
`+(B.tokens?this.parseInline(B.tokens):B.text);n+=t?this.renderer.paragraph(W):W;continue}default:{const Er='Token with "'+B.type+'" type was not found.';if(this.options.silent){console.error(Er);return}else throw new Error(Er)}}}return n}parseInline(r,t){t=t||this.renderer;let n="",i,o,f;const u=r.length;for(i=0;i<u;i++){if(o=r[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[o.type]&&(f=this.options.extensions.renderers[o.type].call({parser:this},o),f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type))){n+=f||"";continue}switch(o.type){case"escape":{n+=t.text(o.text);break}case"html":{n+=t.html(o.text);break}case"link":{n+=t.link(o.href,o.title,this.parseInline(o.tokens,t));break}case"image":{n+=t.image(o.href,o.title,o.text);break}case"strong":{n+=t.strong(this.parseInline(o.tokens,t));break}case"em":{n+=t.em(this.parseInline(o.tokens,t));break}case"codespan":{n+=t.codespan(o.text);break}case"br":{n+=t.br();break}case"del":{n+=t.del(this.parseInline(o.tokens,t));break}case"text":{n+=t.text(o.text);break}default:{const v='Token with "'+o.type+'" type was not found.';if(this.options.silent){console.error(v);return}else throw new Error(v)}}}return n}}function Qe(e,r,t){if(typeof e=="undefined"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof r=="function"&&(t=r,r=null),r=At({},Qe.defaults,r||{}),Is(r),t){const n=r.highlight;let i;try{i=Bt.lex(e,r)}catch(u){return t(u)}const o=function(u){let v;if(!u)try{r.walkTokens&&Qe.walkTokens(i,r.walkTokens),v=Pt.parse(i,r)}catch(A){u=A}return r.highlight=n,u?t(u):t(null,v)};if(!n||n.length<3||(delete r.highlight,!i.length))return o();let f=0;Qe.walkTokens(i,function(u){u.type==="code"&&(f++,setTimeout(()=>{n(u.text,u.lang,function(v,A){if(v)return o(v);A!=null&&A!==u.text&&(u.text=A,u.escaped=!0),f--,f===0&&o()})},0))}),f===0&&o();return}try{const n=Bt.lex(e,r);return r.walkTokens&&Qe.walkTokens(n,r.walkTokens),Pt.parse(n,r)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,r.silent)return"<p>An error occurred:</p><pre>"+zr(n.message+"",!0)+"</pre>";throw n}}Qe.options=Qe.setOptions=function(e){return At(Qe.defaults,e),j0(Qe.defaults),Qe};Qe.getDefaults=Os;Qe.defaults=Xn;Qe.use=function(...e){const r=At({},...e),t=Qe.defaults.extensions||{renderers:{},childTokens:{}};let n;e.forEach(i=>{if(i.extensions&&(n=!0,i.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if(o.renderer){const f=t.renderers?t.renderers[o.name]:null;f?t.renderers[o.name]=function(...u){let v=o.renderer.apply(this,u);return v===!1&&(v=f.apply(this,u)),v}:t.renderers[o.name]=o.renderer}if(o.tokenizer){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[o.level]?t[o.level].unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}o.childTokens&&(t.childTokens[o.name]=o.childTokens)})),i.renderer){const o=Qe.defaults.renderer||new wf;for(const f in i.renderer){const u=o[f];o[f]=(...v)=>{let A=i.renderer[f].apply(o,v);return A===!1&&(A=u.apply(o,v)),A}}r.renderer=o}if(i.tokenizer){const o=Qe.defaults.tokenizer||new Tf;for(const f in i.tokenizer){const u=o[f];o[f]=(...v)=>{let A=i.tokenizer[f].apply(o,v);return A===!1&&(A=u.apply(o,v)),A}}r.tokenizer=o}if(i.walkTokens){const o=Qe.defaults.walkTokens;r.walkTokens=function(f){i.walkTokens.call(this,f),o&&o.call(this,f)}}n&&(r.extensions=t),Qe.setOptions(r)})};Qe.walkTokens=function(e,r){for(const t of e)switch(r.call(Qe,t),t.type){case"table":{for(const n of t.header)Qe.walkTokens(n.tokens,r);for(const n of t.rows)for(const i of n)Qe.walkTokens(i.tokens,r);break}case"list":{Qe.walkTokens(t.items,r);break}default:Qe.defaults.extensions&&Qe.defaults.extensions.childTokens&&Qe.defaults.extensions.childTokens[t.type]?Qe.defaults.extensions.childTokens[t.type].forEach(function(n){Qe.walkTokens(t[n],r)}):t.tokens&&Qe.walkTokens(t.tokens,r)}};Qe.parseInline=function(e,r){if(typeof e=="undefined"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");r=At({},Qe.defaults,r||{}),Is(r);try{const t=Bt.lexInline(e,r);return r.walkTokens&&Qe.walkTokens(t,r.walkTokens),Pt.parseInline(t,r)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,r.silent)return"<p>An error occurred:</p><pre>"+zr(t.message+"",!0)+"</pre>";throw t}};Qe.Parser=Pt;Qe.parser=Pt.parse;Qe.Renderer=wf;Qe.TextRenderer=Ps;Qe.Lexer=Bt;Qe.lexer=Bt.lex;Qe.Tokenizer=Tf;Qe.Slugger=Us;Qe.parse=Qe;Pt.parse;Bt.lex;var Sf={exports:{}};(function(e,r){(function(){function t(i,o){var f="\\u0000\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u200B\\u2028\\u2029\\u202F\\u205F\\u3000\\uFEFF",u=f+"\\u005B\\u005C\\u005D\\u007B\\u007D\\u003A",v=new RegExp(`.*((\r|
)+)`),A=new RegExp("^\\s*([^"+u+`]+)[ 	\r]*:[ 	\r]*(.*(?:
|\r|$))`),M=new RegExp(`^\\s*:[ 	\r]*(endskip|ignore|skip|end).*?(
|\r|$)`,"i"),G=new RegExp(`^\\s*\\*[ 	\r]*(.*(?:
|\r|$))`),W=new RegExp("^\\s*(\\[|\\{)[ 	\r]*([+.]*)[ 	\r]*([^"+u+`]*)[ 	\r]*(?:\\]|\\}).*?(
|\r|$)`),B={},ge=B,Ee=[],de=void 0,Se=null,J=null,we="",Fe=!1,o=o||{};for(o.comments!==!0&&(o.comments=!1);i;){var ze;M.exec(i)?(ze=M.exec(i),Er(ze[1].toLowerCase())):!Fe&&A.exec(i)&&(!de||de.arrayType!=="simple")?(ze=A.exec(i),er(ze[1],ze[2]||"")):!Fe&&G.exec(i)&&de&&de.array&&de.arrayType!=="complex"&&de.arrayType!=="freeform"&&de.flags.indexOf("+")<0?(ze=G.exec(i),vr(ze[1])):!Fe&&W.exec(i)?(ze=W.exec(i),Zr(ze[1],ze[2],ze[3])):v.exec(i)?(ze=v.exec(i),st(ze[0])):(st(i),i=""),ze&&(i=i.substring(ze[0].length))}function er(Ge,gr){pr(),ct(Ge),de&&de.flags.indexOf("+")>-1&&(Ge="value"),J=Ge,we=gr,Yr(Ge,{replace:!0})}function vr(Ge){pr(),de.arrayType=de.arrayType||"simple",de.array.push(""),J=de.array,we=Ge,Yr(de.array,{replace:!0})}function Er(Ge){if(Fe&&!(Ge==="endskip"||Ge==="ignore"))return pr();switch(Ge){case"end":J&&Yr(J,{replace:!1});return;case"ignore":i="";break;case"skip":Fe=!0;break;case"endskip":Fe=!1;break}pr()}function Zr(Ge,gr,at){if(pr(),at==""){var Vr=Ee.pop();ge=(Vr?Vr.scope:B)||B,de=Ee[Ee.length-1]}else if(Ge==="["||Ge==="{"){var Lr=!1,ur=B;if(gr.indexOf(".")>-1?(ct(at),Lr=!0,de&&(ur=ge)):(ge=B,Ee=[]),de&&de.flags.indexOf("+")>-1)var or=at;else{for(var ht=at.split("."),sr=0;sr<ht.length-1;sr++)ur=ur[ht[sr]]=ur[ht[sr]]||{};var or=ht[ht.length-1]}de&&de.flags.indexOf("+")>-1&&gr.indexOf(".")>-1&&(Ge==="["?or="value":Ge==="{"&&(ge=ge.value={}));var ot={array:null,arrayType:null,arrayFirstKey:null,flags:gr,scope:ge};Ge=="["?(ot.array=ur[or]=[],gr.indexOf("+")>-1&&(ot.arrayType="freeform"),Lr?Ee.push(ot):Ee=[ot],de=Ee[Ee.length-1]):Ge=="{"&&(Lr?Ee.push(ot):(ge=ur[or]=typeof ur[or]=="object"?ur[or]:{},Ee=[ot]),de=Ee[Ee.length-1])}}function st(Ge){de&&de.flags.indexOf("+")>-1&&Ge.match(/[^\n\r\s]/)?de.array.push({type:"text",value:Ge.replace(/(^\s*)|(\s*$)/g,"")}):we+=i.substring(0,Ge.length)}function ct(Ge){if(de&&de.array){if(de.arrayType=de.arrayType||"complex",de.arrayType==="simple")return;(de.arrayFirstKey===null||de.arrayFirstKey===Ge)&&de.array.push(ge={}),de.flags.indexOf("+")>-1?ge.type=Ge:de.arrayFirstKey=de.arrayFirstKey||Ge}}function dt(Ge,gr){return o.comments&&(Ge=Ge.replace(/(?:^\\)?\[[^\[\]\n\r]*\](?!\])/mg,""),Ge=Ge.replace(/\[\[([^\[\]\n\r]*)\]\]/g,"[$1]")),gr=="append"&&(Ge=Ge.replace(new RegExp("^(\\s*)\\\\","gm"),"$1")),Ge}function pr(){var Ge=we+"";return we="",J=null,Ge}function Yr(Ge,gr){gr=gr||{};var at=J,Vr=pr();if(gr.replace?(Vr=dt(Vr,"replace").replace(new RegExp("^\\s*"),""),we=new RegExp("\\s*$").exec(Vr)[0],J=at):Vr=dt(Vr,"append"),typeof Ge=="object")gr.replace&&(Ge[Ge.length-1]=""),Ge[Ge.length-1]+=Vr.replace(new RegExp("\\s*$"),"");else{var Lr=Ge.split(".");Se=ge;for(var ur=0;ur<Lr.length-1;ur++)typeof Se[Lr[ur]]=="string"&&(Se[Lr[ur]]={}),Se=Se[Lr[ur]]=Se[Lr[ur]]||{};gr.replace&&(Se[Lr[Lr.length-1]]=""),Se[Lr[Lr.length-1]]+=Vr.replace(new RegExp("\\s*$"),"")}}return pr(),B}var n={load:t};e.exports&&(r=e.exports=n),r.archieml=n}).call(as)})(Sf,Sf.exports);var Ny=Sf.exports;/*! @license DOMPurify 2.3.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.3.5/LICENSE */function fv(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var lv=Object.hasOwnProperty,$s=Object.setPrototypeOf,uv=Object.isFrozen,sv=Object.getPrototypeOf,cv=Object.getOwnPropertyDescriptor,Kr=Object.freeze,Ut=Object.seal,dv=Object.create,Hs=typeof Reflect!="undefined"&&Reflect,Ka=Hs.apply,Cf=Hs.construct;Ka||(Ka=function(r,t,n){return r.apply(t,n)});Kr||(Kr=function(r){return r});Ut||(Ut=function(r){return r});Cf||(Cf=function(r,t){return new(Function.prototype.bind.apply(r,[null].concat(fv(t))))});var hv=Et(Array.prototype.forEach),zs=Et(Array.prototype.pop),Gi=Et(Array.prototype.push),Qa=Et(String.prototype.toLowerCase),js=Et(String.prototype.match),Jt=Et(String.prototype.replace),pv=Et(String.prototype.indexOf),mv=Et(String.prototype.trim),ut=Et(RegExp.prototype.test),kf=vv(TypeError);function Et(e){return function(r){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ka(e,r,n)}}function vv(e){return function(){for(var r=arguments.length,t=Array(r),n=0;n<r;n++)t[n]=arguments[n];return Cf(e,t)}}function Je(e,r){$s&&$s(e,null);for(var t=r.length;t--;){var n=r[t];if(typeof n=="string"){var i=Qa(n);i!==n&&(uv(r)||(r[t]=i),n=i)}e[n]=!0}return e}function En(e){var r=dv(null),t=void 0;for(t in e)Ka(lv,e,[t])&&(r[t]=e[t]);return r}function Za(e,r){for(;e!==null;){var t=cv(e,r);if(t){if(t.get)return Et(t.get);if(typeof t.value=="function")return Et(t.value)}e=sv(e)}function n(i){return console.warn("fallback value for",i),null}return n}var Ys=Kr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lf=Kr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Of=Kr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),gv=Kr(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Rf=Kr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),_v=Kr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Vs=Kr(["#text"]),Ws=Kr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Df=Kr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Xs=Kr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ja=Kr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),yv=Ut(/\{\{[\s\S]*|[\s\S]*\}\}/gm),bv=Ut(/<%[\s\S]*|[\s\S]*%>/gm),xv=Ut(/^data-[\-\w.\u00B7-\uFFFF]/),Av=Ut(/^aria-[\-\w]+$/),Ev=Ut(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Tv=Ut(/^(?:\w+script|data):/i),wv=Ut(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Lt(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)}var Sv=function(){return typeof window=="undefined"?null:window},Cv=function(r,t){if((typeof r=="undefined"?"undefined":Bi(r))!=="object"||typeof r.createPolicy!="function")return null;var n=null,i="data-tt-policy-suffix";t.currentScript&&t.currentScript.hasAttribute(i)&&(n=t.currentScript.getAttribute(i));var o="dompurify"+(n?"#"+n:"");try{return r.createPolicy(o,{createHTML:function(u){return u}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function qs(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sv(),r=function(k){return qs(k)};if(r.version="2.3.5",r.removed=[],!e||!e.document||e.document.nodeType!==9)return r.isSupported=!1,r;var t=e.document,n=e.document,i=e.DocumentFragment,o=e.HTMLTemplateElement,f=e.Node,u=e.Element,v=e.NodeFilter,A=e.NamedNodeMap,M=A===void 0?e.NamedNodeMap||e.MozNamedAttrMap:A,G=e.HTMLFormElement,W=e.DOMParser,B=e.trustedTypes,ge=u.prototype,Ee=Za(ge,"cloneNode"),de=Za(ge,"nextSibling"),Se=Za(ge,"childNodes"),J=Za(ge,"parentNode");if(typeof o=="function"){var we=n.createElement("template");we.content&&we.content.ownerDocument&&(n=we.content.ownerDocument)}var Fe=Cv(B,t),ze=Fe?Fe.createHTML(""):"",er=n,vr=er.implementation,Er=er.createNodeIterator,Zr=er.createDocumentFragment,st=er.getElementsByTagName,ct=t.importNode,dt={};try{dt=En(n).documentMode?n.documentMode:{}}catch{}var pr={};r.isSupported=typeof J=="function"&&vr&&typeof vr.createHTMLDocument!="undefined"&&dt!==9;var Yr=yv,Ge=bv,gr=xv,at=Av,Vr=Tv,Lr=wv,ur=Ev,or=null,ht=Je({},[].concat(Lt(Ys),Lt(Lf),Lt(Of),Lt(Rf),Lt(Vs))),sr=null,ot=Je({},[].concat(Lt(Ws),Lt(Df),Lt(Xs),Lt(Ja))),mr=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Rt=null,tn=null,wn=!0,Ce=!0,qe=!1,Ke=!1,ae=!1,Tr=!1,nr=!1,_r=!1,wr=!1,Jr=!1,Dr=!0,Sn=!0,Tt=!1,Ht={},zt=null,c=Je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ji=null,Yi=Je({},["audio","video","img","source","image","track"]),ei=null,Vi=Je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",Cn="http://www.w3.org/2000/svg",et="http://www.w3.org/1999/xhtml",nn=et,ri=!1,jt=void 0,Wi=["application/xhtml+xml","text/html"],qr="text/html",gt=void 0,Dt=null,oo=n.createElement("form"),Xi=function(k){return k instanceof RegExp||k instanceof Function},ti=function(k){Dt&&Dt===k||((!k||(typeof k=="undefined"?"undefined":Bi(k))!=="object")&&(k={}),k=En(k),or="ALLOWED_TAGS"in k?Je({},k.ALLOWED_TAGS):ht,sr="ALLOWED_ATTR"in k?Je({},k.ALLOWED_ATTR):ot,ei="ADD_URI_SAFE_ATTR"in k?Je(En(Vi),k.ADD_URI_SAFE_ATTR):Vi,ji="ADD_DATA_URI_TAGS"in k?Je(En(Yi),k.ADD_DATA_URI_TAGS):Yi,zt="FORBID_CONTENTS"in k?Je({},k.FORBID_CONTENTS):c,Rt="FORBID_TAGS"in k?Je({},k.FORBID_TAGS):{},tn="FORBID_ATTR"in k?Je({},k.FORBID_ATTR):{},Ht="USE_PROFILES"in k?k.USE_PROFILES:!1,wn=k.ALLOW_ARIA_ATTR!==!1,Ce=k.ALLOW_DATA_ATTR!==!1,qe=k.ALLOW_UNKNOWN_PROTOCOLS||!1,Ke=k.SAFE_FOR_TEMPLATES||!1,ae=k.WHOLE_DOCUMENT||!1,_r=k.RETURN_DOM||!1,wr=k.RETURN_DOM_FRAGMENT||!1,Jr=k.RETURN_TRUSTED_TYPE||!1,nr=k.FORCE_BODY||!1,Dr=k.SANITIZE_DOM!==!1,Sn=k.KEEP_CONTENT!==!1,Tt=k.IN_PLACE||!1,ur=k.ALLOWED_URI_REGEXP||ur,nn=k.NAMESPACE||et,k.CUSTOM_ELEMENT_HANDLING&&Xi(k.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(mr.tagNameCheck=k.CUSTOM_ELEMENT_HANDLING.tagNameCheck),k.CUSTOM_ELEMENT_HANDLING&&Xi(k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(mr.attributeNameCheck=k.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),k.CUSTOM_ELEMENT_HANDLING&&typeof k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(mr.allowCustomizedBuiltInElements=k.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),jt=Wi.indexOf(k.PARSER_MEDIA_TYPE)===-1?jt=qr:jt=k.PARSER_MEDIA_TYPE,gt=jt==="application/xhtml+xml"?function(ve){return ve}:Qa,Ke&&(Ce=!1),wr&&(_r=!0),Ht&&(or=Je({},[].concat(Lt(Vs))),sr=[],Ht.html===!0&&(Je(or,Ys),Je(sr,Ws)),Ht.svg===!0&&(Je(or,Lf),Je(sr,Df),Je(sr,Ja)),Ht.svgFilters===!0&&(Je(or,Of),Je(sr,Df),Je(sr,Ja)),Ht.mathMl===!0&&(Je(or,Rf),Je(sr,Xs),Je(sr,Ja))),k.ADD_TAGS&&(or===ht&&(or=En(or)),Je(or,k.ADD_TAGS)),k.ADD_ATTR&&(sr===ot&&(sr=En(sr)),Je(sr,k.ADD_ATTR)),k.ADD_URI_SAFE_ATTR&&Je(ei,k.ADD_URI_SAFE_ATTR),k.FORBID_CONTENTS&&(zt===c&&(zt=En(zt)),Je(zt,k.FORBID_CONTENTS)),Sn&&(or["#text"]=!0),ae&&Je(or,["html","head","body"]),or.table&&(Je(or,["tbody"]),delete Rt.tbody),Kr&&Kr(k),Dt=k)},qi=Je({},["mi","mo","mn","ms","mtext"]),Ki=Je({},["foreignobject","desc","title","annotation-xml"]),an=Je({},Lf);Je(an,Of),Je(an,gv);var kn=Je({},Rf);Je(kn,_v);var fo=function(k){var ve=J(k);(!ve||!ve.tagName)&&(ve={namespaceURI:et,tagName:"template"});var Oe=Qa(k.tagName),ar=Qa(ve.tagName);if(k.namespaceURI===Cn)return ve.namespaceURI===et?Oe==="svg":ve.namespaceURI===vt?Oe==="svg"&&(ar==="annotation-xml"||qi[ar]):Boolean(an[Oe]);if(k.namespaceURI===vt)return ve.namespaceURI===et?Oe==="math":ve.namespaceURI===Cn?Oe==="math"&&Ki[ar]:Boolean(kn[Oe]);if(k.namespaceURI===et){if(ve.namespaceURI===Cn&&!Ki[ar]||ve.namespaceURI===vt&&!qi[ar])return!1;var Mr=Je({},["title","style","font","a","script"]);return!kn[Oe]&&(Mr[Oe]||!an[Oe])}return!1},_t=function(k){Gi(r.removed,{element:k});try{k.parentNode.removeChild(k)}catch{try{k.outerHTML=ze}catch{k.remove()}}},Wr=function(k,ve){try{Gi(r.removed,{attribute:ve.getAttributeNode(k),from:ve})}catch{Gi(r.removed,{attribute:null,from:ve})}if(ve.removeAttribute(k),k==="is"&&!sr[k])if(_r||wr)try{_t(ve)}catch{}else try{ve.setAttribute(k,"")}catch{}},Qi=function(k){var ve=void 0,Oe=void 0;if(nr)k="<remove></remove>"+k;else{var ar=js(k,/^[\r\n\t ]+/);Oe=ar&&ar[0]}jt==="application/xhtml+xml"&&(k='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+k+"</body></html>");var Mr=Fe?Fe.createHTML(k):k;if(nn===et)try{ve=new W().parseFromString(Mr,jt)}catch{}if(!ve||!ve.documentElement){ve=vr.createDocument(nn,"template",null);try{ve.documentElement.innerHTML=ri?"":Mr}catch{}}var Gr=ve.body||ve.documentElement;return k&&Oe&&Gr.insertBefore(n.createTextNode(Oe),Gr.childNodes[0]||null),nn===et?st.call(ve,ae?"html":"body")[0]:ae?ve.documentElement:Gr},Zi=function(k){return Er.call(k.ownerDocument||k,k,v.SHOW_ELEMENT|v.SHOW_COMMENT|v.SHOW_TEXT,null,!1)},lo=function(k){return k instanceof G&&(typeof k.nodeName!="string"||typeof k.textContent!="string"||typeof k.removeChild!="function"||!(k.attributes instanceof M)||typeof k.removeAttribute!="function"||typeof k.setAttribute!="function"||typeof k.namespaceURI!="string"||typeof k.insertBefore!="function")},on=function(k){return(typeof f=="undefined"?"undefined":Bi(f))==="object"?k instanceof f:k&&(typeof k=="undefined"?"undefined":Bi(k))==="object"&&typeof k.nodeType=="number"&&typeof k.nodeName=="string"},yt=function(k,ve,Oe){!pr[k]||hv(pr[k],function(ar){ar.call(r,ve,Oe,Dt)})},Ji=function(k){var ve=void 0;if(yt("beforeSanitizeElements",k,null),lo(k)||js(k.nodeName,/[\u0080-\uFFFF]/))return _t(k),!0;var Oe=gt(k.nodeName);if(yt("uponSanitizeElement",k,{tagName:Oe,allowedTags:or}),!on(k.firstElementChild)&&(!on(k.content)||!on(k.content.firstElementChild))&&ut(/<[/\w]/g,k.innerHTML)&&ut(/<[/\w]/g,k.textContent)||Oe==="select"&&ut(/<template/i,k.innerHTML))return _t(k),!0;if(!or[Oe]||Rt[Oe]){if(Sn&&!zt[Oe]){var ar=J(k)||k.parentNode,Mr=Se(k)||k.childNodes;if(Mr&&ar)for(var Gr=Mr.length,Fr=Gr-1;Fr>=0;--Fr)ar.insertBefore(Ee(Mr[Fr],!0),de(k))}return!Rt[Oe]&&ra(Oe)&&(mr.tagNameCheck instanceof RegExp&&ut(mr.tagNameCheck,Oe)||mr.tagNameCheck instanceof Function&&mr.tagNameCheck(Oe))?!1:(_t(k),!0)}return k instanceof u&&!fo(k)||(Oe==="noscript"||Oe==="noembed")&&ut(/<\/no(script|embed)/i,k.innerHTML)?(_t(k),!0):(Ke&&k.nodeType===3&&(ve=k.textContent,ve=Jt(ve,Yr," "),ve=Jt(ve,Ge," "),k.textContent!==ve&&(Gi(r.removed,{element:k.cloneNode()}),k.textContent=ve)),yt("afterSanitizeElements",k,null),!1)},ea=function(k,ve,Oe){if(Dr&&(ve==="id"||ve==="name")&&(Oe in n||Oe in oo))return!1;if(!(Ce&&!tn[ve]&&ut(gr,ve))){if(!(wn&&ut(at,ve))){if(!sr[ve]||tn[ve]){if(!(ra(k)&&(mr.tagNameCheck instanceof RegExp&&ut(mr.tagNameCheck,k)||mr.tagNameCheck instanceof Function&&mr.tagNameCheck(k))&&(mr.attributeNameCheck instanceof RegExp&&ut(mr.attributeNameCheck,ve)||mr.attributeNameCheck instanceof Function&&mr.attributeNameCheck(ve))||ve==="is"&&mr.allowCustomizedBuiltInElements&&(mr.tagNameCheck instanceof RegExp&&ut(mr.tagNameCheck,Oe)||mr.tagNameCheck instanceof Function&&mr.tagNameCheck(Oe))))return!1}else if(!ei[ve]){if(!ut(ur,Jt(Oe,Lr,""))){if(!((ve==="src"||ve==="xlink:href"||ve==="href")&&k!=="script"&&pv(Oe,"data:")===0&&ji[k])){if(!(qe&&!ut(Vr,Jt(Oe,Lr,"")))){if(Oe)return!1}}}}}}return!0},ra=function(k){return k.indexOf("-")>0},ni=function(k){var ve=void 0,Oe=void 0,ar=void 0,Mr=void 0;yt("beforeSanitizeAttributes",k,null);var Gr=k.attributes;if(!!Gr){var Fr={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:sr};for(Mr=Gr.length;Mr--;){ve=Gr[Mr];var Ln=ve,rt=Ln.name,na=Ln.namespaceURI;if(Oe=mv(ve.value),ar=gt(rt),Fr.attrName=ar,Fr.attrValue=Oe,Fr.keepAttr=!0,Fr.forceKeepAttr=void 0,yt("uponSanitizeAttribute",k,Fr),Oe=Fr.attrValue,!Fr.forceKeepAttr&&(Wr(rt,k),!!Fr.keepAttr)){if(ut(/\/>/i,Oe)){Wr(rt,k);continue}Ke&&(Oe=Jt(Oe,Yr," "),Oe=Jt(Oe,Ge," "));var uo=gt(k.nodeName);if(!!ea(uo,ar,Oe))try{na?k.setAttributeNS(na,rt,Oe):k.setAttribute(rt,Oe),zs(r.removed)}catch{}}}yt("afterSanitizeAttributes",k,null)}},ta=function Ae(k){var ve=void 0,Oe=Zi(k);for(yt("beforeSanitizeShadowDOM",k,null);ve=Oe.nextNode();)yt("uponSanitizeShadowNode",ve,null),!Ji(ve)&&(ve.content instanceof i&&Ae(ve.content),ni(ve));yt("afterSanitizeShadowDOM",k,null)};return r.sanitize=function(Ae,k){var ve=void 0,Oe=void 0,ar=void 0,Mr=void 0,Gr=void 0;if(ri=!Ae,ri&&(Ae="<!-->"),typeof Ae!="string"&&!on(Ae)){if(typeof Ae.toString!="function")throw kf("toString is not a function");if(Ae=Ae.toString(),typeof Ae!="string")throw kf("dirty is not a string, aborting")}if(!r.isSupported){if(Bi(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Ae=="string")return e.toStaticHTML(Ae);if(on(Ae))return e.toStaticHTML(Ae.outerHTML)}return Ae}if(Tr||ti(k),r.removed=[],typeof Ae=="string"&&(Tt=!1),Tt){if(Ae.nodeName){var Fr=gt(Ae.nodeName);if(!or[Fr]||Rt[Fr])throw kf("root node is forbidden and cannot be sanitized in-place")}}else if(Ae instanceof f)ve=Qi("<!---->"),Oe=ve.ownerDocument.importNode(Ae,!0),Oe.nodeType===1&&Oe.nodeName==="BODY"||Oe.nodeName==="HTML"?ve=Oe:ve.appendChild(Oe);else{if(!_r&&!Ke&&!ae&&Ae.indexOf("<")===-1)return Fe&&Jr?Fe.createHTML(Ae):Ae;if(ve=Qi(Ae),!ve)return _r?null:Jr?ze:""}ve&&nr&&_t(ve.firstChild);for(var Ln=Zi(Tt?Ae:ve);ar=Ln.nextNode();)ar.nodeType===3&&ar===Mr||Ji(ar)||(ar.content instanceof i&&ta(ar.content),ni(ar),Mr=ar);if(Mr=null,Tt)return Ae;if(_r){if(wr)for(Gr=Zr.call(ve.ownerDocument);ve.firstChild;)Gr.appendChild(ve.firstChild);else Gr=ve;return sr.shadowroot&&(Gr=ct.call(t,Gr,!0)),Gr}var rt=ae?ve.outerHTML:ve.innerHTML;return Ke&&(rt=Jt(rt,Yr," "),rt=Jt(rt,Ge," ")),Fe&&Jr?Fe.createHTML(rt):rt},r.setConfig=function(Ae){ti(Ae),Tr=!0},r.clearConfig=function(){Dt=null,Tr=!1},r.isValidAttribute=function(Ae,k,ve){Dt||ti({});var Oe=gt(Ae),ar=gt(k);return ea(Oe,ar,ve)},r.addHook=function(Ae,k){typeof k=="function"&&(pr[Ae]=pr[Ae]||[],Gi(pr[Ae],k))},r.removeHook=function(Ae){pr[Ae]&&zs(pr[Ae])},r.removeHooks=function(Ae){pr[Ae]&&(pr[Ae]=[])},r.removeAllHooks=function(){pr={}},r}var Iy=qs();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Ks(e){return typeof e=="undefined"||e===null}function kv(e){return typeof e=="object"&&e!==null}function Lv(e){return Array.isArray(e)?e:Ks(e)?[]:[e]}function Ov(e,r){var t,n,i,o;if(r)for(o=Object.keys(r),t=0,n=o.length;t<n;t+=1)i=o[t],e[i]=r[i];return e}function Rv(e,r){var t="",n;for(n=0;n<r;n+=1)t+=e;return t}function Dv(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Fv=Ks,Nv=kv,Iv=Lv,Mv=Rv,Gv=Dv,Bv=Ov,Ir={isNothing:Fv,isObject:Nv,toArray:Iv,repeat:Mv,isNegativeZero:Gv,extend:Bv};function Qs(e,r){var t="",n=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(t+='in "'+e.mark.name+'" '),t+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!r&&e.mark.snippet&&(t+=`

`+e.mark.snippet),n+" "+t):n}function Pi(e,r){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=r,this.message=Qs(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Pi.prototype=Object.create(Error.prototype);Pi.prototype.constructor=Pi;Pi.prototype.toString=function(r){return this.name+": "+Qs(this,r)};var Qr=Pi;function Ff(e,r,t,n,i){var o="",f="",u=Math.floor(i/2)-1;return n-r>u&&(o=" ... ",r=n-u+o.length),t-n>u&&(f=" ...",t=n+u-f.length),{str:o+e.slice(r,t).replace(/\t/g,"\u2192")+f,pos:n-r+o.length}}function Nf(e,r){return Ir.repeat(" ",r-e.length)+e}function Pv(e,r){if(r=Object.create(r||null),!e.buffer)return null;r.maxLength||(r.maxLength=79),typeof r.indent!="number"&&(r.indent=1),typeof r.linesBefore!="number"&&(r.linesBefore=3),typeof r.linesAfter!="number"&&(r.linesAfter=2);for(var t=/\r?\n|\r|\0/g,n=[0],i=[],o,f=-1;o=t.exec(e.buffer);)i.push(o.index),n.push(o.index+o[0].length),e.position<=o.index&&f<0&&(f=n.length-2);f<0&&(f=n.length-1);var u="",v,A,M=Math.min(e.line+r.linesAfter,i.length).toString().length,G=r.maxLength-(r.indent+M+3);for(v=1;v<=r.linesBefore&&!(f-v<0);v++)A=Ff(e.buffer,n[f-v],i[f-v],e.position-(n[f]-n[f-v]),G),u=Ir.repeat(" ",r.indent)+Nf((e.line-v+1).toString(),M)+" | "+A.str+`
`+u;for(A=Ff(e.buffer,n[f],i[f],e.position,G),u+=Ir.repeat(" ",r.indent)+Nf((e.line+1).toString(),M)+" | "+A.str+`
`,u+=Ir.repeat("-",r.indent+M+3+A.pos)+`^
`,v=1;v<=r.linesAfter&&!(f+v>=i.length);v++)A=Ff(e.buffer,n[f+v],i[f+v],e.position-(n[f]-n[f+v]),G),u+=Ir.repeat(" ",r.indent)+Nf((e.line+v+1).toString(),M)+" | "+A.str+`
`;return u.replace(/\n$/,"")}var Uv=Pv,$v=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Hv=["scalar","sequence","mapping"];function zv(e){var r={};return e!==null&&Object.keys(e).forEach(function(t){e[t].forEach(function(n){r[String(n)]=t})}),r}function jv(e,r){if(r=r||{},Object.keys(r).forEach(function(t){if($v.indexOf(t)===-1)throw new Qr('Unknown option "'+t+'" is met in definition of "'+e+'" YAML type.')}),this.options=r,this.tag=e,this.kind=r.kind||null,this.resolve=r.resolve||function(){return!0},this.construct=r.construct||function(t){return t},this.instanceOf=r.instanceOf||null,this.predicate=r.predicate||null,this.represent=r.represent||null,this.representName=r.representName||null,this.defaultStyle=r.defaultStyle||null,this.multi=r.multi||!1,this.styleAliases=zv(r.styleAliases||null),Hv.indexOf(this.kind)===-1)throw new Qr('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var jr=jv;function Zs(e,r){var t=[];return e[r].forEach(function(n){var i=t.length;t.forEach(function(o,f){o.tag===n.tag&&o.kind===n.kind&&o.multi===n.multi&&(i=f)}),t[i]=n}),t}function Yv(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},r,t;function n(i){i.multi?(e.multi[i.kind].push(i),e.multi.fallback.push(i)):e[i.kind][i.tag]=e.fallback[i.tag]=i}for(r=0,t=arguments.length;r<t;r+=1)arguments[r].forEach(n);return e}function If(e){return this.extend(e)}If.prototype.extend=function(r){var t=[],n=[];if(r instanceof jr)n.push(r);else if(Array.isArray(r))n=n.concat(r);else if(r&&(Array.isArray(r.implicit)||Array.isArray(r.explicit)))r.implicit&&(t=t.concat(r.implicit)),r.explicit&&(n=n.concat(r.explicit));else throw new Qr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(o){if(!(o instanceof jr))throw new Qr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new Qr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new Qr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(o){if(!(o instanceof jr))throw new Qr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(If.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=Zs(i,"implicit"),i.compiledExplicit=Zs(i,"explicit"),i.compiledTypeMap=Yv(i.compiledImplicit,i.compiledExplicit),i};var Js=If,ec=new jr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),rc=new jr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),tc=new jr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),nc=new Js({explicit:[ec,rc,tc]});function Vv(e){if(e===null)return!0;var r=e.length;return r===1&&e==="~"||r===4&&(e==="null"||e==="Null"||e==="NULL")}function Wv(){return null}function Xv(e){return e===null}var ic=new jr("tag:yaml.org,2002:null",{kind:"scalar",resolve:Vv,construct:Wv,predicate:Xv,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function qv(e){if(e===null)return!1;var r=e.length;return r===4&&(e==="true"||e==="True"||e==="TRUE")||r===5&&(e==="false"||e==="False"||e==="FALSE")}function Kv(e){return e==="true"||e==="True"||e==="TRUE"}function Qv(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var ac=new jr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:qv,construct:Kv,predicate:Qv,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function Zv(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function Jv(e){return 48<=e&&e<=55}function eg(e){return 48<=e&&e<=57}function rg(e){if(e===null)return!1;var r=e.length,t=0,n=!1,i;if(!r)return!1;if(i=e[t],(i==="-"||i==="+")&&(i=e[++t]),i==="0"){if(t+1===r)return!0;if(i=e[++t],i==="b"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!Zv(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(t++;t<r;t++)if(i=e[t],i!=="_"){if(!Jv(e.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;t<r;t++)if(i=e[t],i!=="_"){if(!eg(e.charCodeAt(t)))return!1;n=!0}return!(!n||i==="_")}function tg(e){var r=e,t=1,n;if(r.indexOf("_")!==-1&&(r=r.replace(/_/g,"")),n=r[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),r=r.slice(1),n=r[0]),r==="0")return 0;if(n==="0"){if(r[1]==="b")return t*parseInt(r.slice(2),2);if(r[1]==="x")return t*parseInt(r.slice(2),16);if(r[1]==="o")return t*parseInt(r.slice(2),8)}return t*parseInt(r,10)}function ng(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1==0&&!Ir.isNegativeZero(e)}var oc=new jr("tag:yaml.org,2002:int",{kind:"scalar",resolve:rg,construct:tg,predicate:ng,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),ig=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function ag(e){return!(e===null||!ig.test(e)||e[e.length-1]==="_")}function og(e){var r,t;return r=e.replace(/_/g,"").toLowerCase(),t=r[0]==="-"?-1:1,"+-".indexOf(r[0])>=0&&(r=r.slice(1)),r===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:r===".nan"?NaN:t*parseFloat(r,10)}var fg=/^[-+]?[0-9]+e/;function lg(e,r){var t;if(isNaN(e))switch(r){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(r){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(r){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Ir.isNegativeZero(e))return"-0.0";return t=e.toString(10),fg.test(t)?t.replace("e",".e"):t}function ug(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!=0||Ir.isNegativeZero(e))}var fc=new jr("tag:yaml.org,2002:float",{kind:"scalar",resolve:ag,construct:og,predicate:ug,represent:lg,defaultStyle:"lowercase"}),lc=nc.extend({implicit:[ic,ac,oc,fc]}),uc=lc,sc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),cc=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function sg(e){return e===null?!1:sc.exec(e)!==null||cc.exec(e)!==null}function cg(e){var r,t,n,i,o,f,u,v=0,A=null,M,G,W;if(r=sc.exec(e),r===null&&(r=cc.exec(e)),r===null)throw new Error("Date resolve error");if(t=+r[1],n=+r[2]-1,i=+r[3],!r[4])return new Date(Date.UTC(t,n,i));if(o=+r[4],f=+r[5],u=+r[6],r[7]){for(v=r[7].slice(0,3);v.length<3;)v+="0";v=+v}return r[9]&&(M=+r[10],G=+(r[11]||0),A=(M*60+G)*6e4,r[9]==="-"&&(A=-A)),W=new Date(Date.UTC(t,n,i,o,f,u,v)),A&&W.setTime(W.getTime()-A),W}function dg(e){return e.toISOString()}var dc=new jr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:sg,construct:cg,instanceOf:Date,represent:dg});function hg(e){return e==="<<"||e===null}var hc=new jr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:hg}),Mf=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function pg(e){if(e===null)return!1;var r,t,n=0,i=e.length,o=Mf;for(t=0;t<i;t++)if(r=o.indexOf(e.charAt(t)),!(r>64)){if(r<0)return!1;n+=6}return n%8==0}function mg(e){var r,t,n=e.replace(/[\r\n=]/g,""),i=n.length,o=Mf,f=0,u=[];for(r=0;r<i;r++)r%4==0&&r&&(u.push(f>>16&255),u.push(f>>8&255),u.push(f&255)),f=f<<6|o.indexOf(n.charAt(r));return t=i%4*6,t===0?(u.push(f>>16&255),u.push(f>>8&255),u.push(f&255)):t===18?(u.push(f>>10&255),u.push(f>>2&255)):t===12&&u.push(f>>4&255),new Uint8Array(u)}function vg(e){var r="",t=0,n,i,o=e.length,f=Mf;for(n=0;n<o;n++)n%3==0&&n&&(r+=f[t>>18&63],r+=f[t>>12&63],r+=f[t>>6&63],r+=f[t&63]),t=(t<<8)+e[n];return i=o%3,i===0?(r+=f[t>>18&63],r+=f[t>>12&63],r+=f[t>>6&63],r+=f[t&63]):i===2?(r+=f[t>>10&63],r+=f[t>>4&63],r+=f[t<<2&63],r+=f[64]):i===1&&(r+=f[t>>2&63],r+=f[t<<4&63],r+=f[64],r+=f[64]),r}function gg(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var pc=new jr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:pg,construct:mg,predicate:gg,represent:vg}),_g=Object.prototype.hasOwnProperty,yg=Object.prototype.toString;function bg(e){if(e===null)return!0;var r=[],t,n,i,o,f,u=e;for(t=0,n=u.length;t<n;t+=1){if(i=u[t],f=!1,yg.call(i)!=="[object Object]")return!1;for(o in i)if(_g.call(i,o))if(!f)f=!0;else return!1;if(!f)return!1;if(r.indexOf(o)===-1)r.push(o);else return!1}return!0}function xg(e){return e!==null?e:[]}var mc=new jr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:bg,construct:xg}),Ag=Object.prototype.toString;function Eg(e){if(e===null)return!0;var r,t,n,i,o,f=e;for(o=new Array(f.length),r=0,t=f.length;r<t;r+=1){if(n=f[r],Ag.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;o[r]=[i[0],n[i[0]]]}return!0}function Tg(e){if(e===null)return[];var r,t,n,i,o,f=e;for(o=new Array(f.length),r=0,t=f.length;r<t;r+=1)n=f[r],i=Object.keys(n),o[r]=[i[0],n[i[0]]];return o}var vc=new jr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Eg,construct:Tg}),wg=Object.prototype.hasOwnProperty;function Sg(e){if(e===null)return!0;var r,t=e;for(r in t)if(wg.call(t,r)&&t[r]!==null)return!1;return!0}function Cg(e){return e!==null?e:{}}var gc=new jr("tag:yaml.org,2002:set",{kind:"mapping",resolve:Sg,construct:Cg}),Gf=uc.extend({implicit:[dc,hc],explicit:[pc,mc,vc,gc]}),en=Object.prototype.hasOwnProperty,eo=1,_c=2,yc=3,ro=4,Bf=1,kg=2,bc=3,Lg=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Og=/[\x85\u2028\u2029]/,Rg=/[,\[\]\{\}]/,xc=/^(?:!|!!|![a-z\-]+!)$/i,Ac=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Ec(e){return Object.prototype.toString.call(e)}function Ot(e){return e===10||e===13}function Tn(e){return e===9||e===32}function it(e){return e===9||e===32||e===10||e===13}function qn(e){return e===44||e===91||e===93||e===123||e===125}function Dg(e){var r;return 48<=e&&e<=57?e-48:(r=e|32,97<=r&&r<=102?r-97+10:-1)}function Fg(e){return e===120?2:e===117?4:e===85?8:0}function Ng(e){return 48<=e&&e<=57?e-48:-1}function Tc(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"\x85":e===95?"\xA0":e===76?"\u2028":e===80?"\u2029":""}function Ig(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var wc=new Array(256),Sc=new Array(256);for(var Kn=0;Kn<256;Kn++)wc[Kn]=Tc(Kn)?1:0,Sc[Kn]=Tc(Kn);function Mg(e,r){this.input=e,this.filename=r.filename||null,this.schema=r.schema||Gf,this.onWarning=r.onWarning||null,this.legacy=r.legacy||!1,this.json=r.json||!1,this.listener=r.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Cc(e,r){var t={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return t.snippet=Uv(t),new Qr(r,t)}function Pe(e,r){throw Cc(e,r)}function to(e,r){e.onWarning&&e.onWarning.call(null,Cc(e,r))}var kc={YAML:function(r,t,n){var i,o,f;r.version!==null&&Pe(r,"duplication of %YAML directive"),n.length!==1&&Pe(r,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&Pe(r,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),f=parseInt(i[2],10),o!==1&&Pe(r,"unacceptable YAML version of the document"),r.version=n[0],r.checkLineBreaks=f<2,f!==1&&f!==2&&to(r,"unsupported YAML version of the document")},TAG:function(r,t,n){var i,o;n.length!==2&&Pe(r,"TAG directive accepts exactly two arguments"),i=n[0],o=n[1],xc.test(i)||Pe(r,"ill-formed tag handle (first argument) of the TAG directive"),en.call(r.tagMap,i)&&Pe(r,'there is a previously declared suffix for "'+i+'" tag handle'),Ac.test(o)||Pe(r,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{Pe(r,"tag prefix is malformed: "+o)}r.tagMap[i]=o}};function rn(e,r,t,n){var i,o,f,u;if(r<t){if(u=e.input.slice(r,t),n)for(i=0,o=u.length;i<o;i+=1)f=u.charCodeAt(i),f===9||32<=f&&f<=1114111||Pe(e,"expected valid JSON character");else Lg.test(u)&&Pe(e,"the stream contains non-printable characters");e.result+=u}}function Lc(e,r,t,n){var i,o,f,u;for(Ir.isObject(t)||Pe(e,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),f=0,u=i.length;f<u;f+=1)o=i[f],en.call(r,o)||(r[o]=t[o],n[o]=!0)}function Qn(e,r,t,n,i,o,f,u,v){var A,M;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),A=0,M=i.length;A<M;A+=1)Array.isArray(i[A])&&Pe(e,"nested arrays are not supported inside keys"),typeof i=="object"&&Ec(i[A])==="[object Object]"&&(i[A]="[object Object]");if(typeof i=="object"&&Ec(i)==="[object Object]"&&(i="[object Object]"),i=String(i),r===null&&(r={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(A=0,M=o.length;A<M;A+=1)Lc(e,r,o[A],t);else Lc(e,r,o,t);else!e.json&&!en.call(t,i)&&en.call(r,i)&&(e.line=f||e.line,e.lineStart=u||e.lineStart,e.position=v||e.position,Pe(e,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(r,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):r[i]=o,delete t[i];return r}function Pf(e){var r;r=e.input.charCodeAt(e.position),r===10?e.position++:r===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):Pe(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Rr(e,r,t){for(var n=0,i=e.input.charCodeAt(e.position);i!==0;){for(;Tn(i);)i===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),i=e.input.charCodeAt(++e.position);if(r&&i===35)do i=e.input.charCodeAt(++e.position);while(i!==10&&i!==13&&i!==0);if(Ot(i))for(Pf(e),i=e.input.charCodeAt(e.position),n++,e.lineIndent=0;i===32;)e.lineIndent++,i=e.input.charCodeAt(++e.position);else break}return t!==-1&&n!==0&&e.lineIndent<t&&to(e,"deficient indentation"),n}function no(e){var r=e.position,t;return t=e.input.charCodeAt(r),!!((t===45||t===46)&&t===e.input.charCodeAt(r+1)&&t===e.input.charCodeAt(r+2)&&(r+=3,t=e.input.charCodeAt(r),t===0||it(t)))}function Uf(e,r){r===1?e.result+=" ":r>1&&(e.result+=Ir.repeat(`
`,r-1))}function Gg(e,r,t){var n,i,o,f,u,v,A,M,G=e.kind,W=e.result,B;if(B=e.input.charCodeAt(e.position),it(B)||qn(B)||B===35||B===38||B===42||B===33||B===124||B===62||B===39||B===34||B===37||B===64||B===96||(B===63||B===45)&&(i=e.input.charCodeAt(e.position+1),it(i)||t&&qn(i)))return!1;for(e.kind="scalar",e.result="",o=f=e.position,u=!1;B!==0;){if(B===58){if(i=e.input.charCodeAt(e.position+1),it(i)||t&&qn(i))break}else if(B===35){if(n=e.input.charCodeAt(e.position-1),it(n))break}else{if(e.position===e.lineStart&&no(e)||t&&qn(B))break;if(Ot(B))if(v=e.line,A=e.lineStart,M=e.lineIndent,Rr(e,!1,-1),e.lineIndent>=r){u=!0,B=e.input.charCodeAt(e.position);continue}else{e.position=f,e.line=v,e.lineStart=A,e.lineIndent=M;break}}u&&(rn(e,o,f,!1),Uf(e,e.line-v),o=f=e.position,u=!1),Tn(B)||(f=e.position+1),B=e.input.charCodeAt(++e.position)}return rn(e,o,f,!1),e.result?!0:(e.kind=G,e.result=W,!1)}function Bg(e,r){var t,n,i;if(t=e.input.charCodeAt(e.position),t!==39)return!1;for(e.kind="scalar",e.result="",e.position++,n=i=e.position;(t=e.input.charCodeAt(e.position))!==0;)if(t===39)if(rn(e,n,e.position,!0),t=e.input.charCodeAt(++e.position),t===39)n=e.position,e.position++,i=e.position;else return!0;else Ot(t)?(rn(e,n,i,!0),Uf(e,Rr(e,!1,r)),n=i=e.position):e.position===e.lineStart&&no(e)?Pe(e,"unexpected end of the document within a single quoted scalar"):(e.position++,i=e.position);Pe(e,"unexpected end of the stream within a single quoted scalar")}function Pg(e,r){var t,n,i,o,f,u;if(u=e.input.charCodeAt(e.position),u!==34)return!1;for(e.kind="scalar",e.result="",e.position++,t=n=e.position;(u=e.input.charCodeAt(e.position))!==0;){if(u===34)return rn(e,t,e.position,!0),e.position++,!0;if(u===92){if(rn(e,t,e.position,!0),u=e.input.charCodeAt(++e.position),Ot(u))Rr(e,!1,r);else if(u<256&&wc[u])e.result+=Sc[u],e.position++;else if((f=Fg(u))>0){for(i=f,o=0;i>0;i--)u=e.input.charCodeAt(++e.position),(f=Dg(u))>=0?o=(o<<4)+f:Pe(e,"expected hexadecimal character");e.result+=Ig(o),e.position++}else Pe(e,"unknown escape sequence");t=n=e.position}else Ot(u)?(rn(e,t,n,!0),Uf(e,Rr(e,!1,r)),t=n=e.position):e.position===e.lineStart&&no(e)?Pe(e,"unexpected end of the document within a double quoted scalar"):(e.position++,n=e.position)}Pe(e,"unexpected end of the stream within a double quoted scalar")}function Ug(e,r){var t=!0,n,i,o,f=e.tag,u,v=e.anchor,A,M,G,W,B,ge=Object.create(null),Ee,de,Se,J;if(J=e.input.charCodeAt(e.position),J===91)M=93,B=!1,u=[];else if(J===123)M=125,B=!0,u={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=u),J=e.input.charCodeAt(++e.position);J!==0;){if(Rr(e,!0,r),J=e.input.charCodeAt(e.position),J===M)return e.position++,e.tag=f,e.anchor=v,e.kind=B?"mapping":"sequence",e.result=u,!0;t?J===44&&Pe(e,"expected the node content, but found ','"):Pe(e,"missed comma between flow collection entries"),de=Ee=Se=null,G=W=!1,J===63&&(A=e.input.charCodeAt(e.position+1),it(A)&&(G=W=!0,e.position++,Rr(e,!0,r))),n=e.line,i=e.lineStart,o=e.position,Zn(e,r,eo,!1,!0),de=e.tag,Ee=e.result,Rr(e,!0,r),J=e.input.charCodeAt(e.position),(W||e.line===n)&&J===58&&(G=!0,J=e.input.charCodeAt(++e.position),Rr(e,!0,r),Zn(e,r,eo,!1,!0),Se=e.result),B?Qn(e,u,ge,de,Ee,Se,n,i,o):G?u.push(Qn(e,null,ge,de,Ee,Se,n,i,o)):u.push(Ee),Rr(e,!0,r),J=e.input.charCodeAt(e.position),J===44?(t=!0,J=e.input.charCodeAt(++e.position)):t=!1}Pe(e,"unexpected end of the stream within a flow collection")}function $g(e,r){var t,n,i=Bf,o=!1,f=!1,u=r,v=0,A=!1,M,G;if(G=e.input.charCodeAt(e.position),G===124)n=!1;else if(G===62)n=!0;else return!1;for(e.kind="scalar",e.result="";G!==0;)if(G=e.input.charCodeAt(++e.position),G===43||G===45)Bf===i?i=G===43?bc:kg:Pe(e,"repeat of a chomping mode identifier");else if((M=Ng(G))>=0)M===0?Pe(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):f?Pe(e,"repeat of an indentation width identifier"):(u=r+M-1,f=!0);else break;if(Tn(G)){do G=e.input.charCodeAt(++e.position);while(Tn(G));if(G===35)do G=e.input.charCodeAt(++e.position);while(!Ot(G)&&G!==0)}for(;G!==0;){for(Pf(e),e.lineIndent=0,G=e.input.charCodeAt(e.position);(!f||e.lineIndent<u)&&G===32;)e.lineIndent++,G=e.input.charCodeAt(++e.position);if(!f&&e.lineIndent>u&&(u=e.lineIndent),Ot(G)){v++;continue}if(e.lineIndent<u){i===bc?e.result+=Ir.repeat(`
`,o?1+v:v):i===Bf&&o&&(e.result+=`
`);break}for(n?Tn(G)?(A=!0,e.result+=Ir.repeat(`
`,o?1+v:v)):A?(A=!1,e.result+=Ir.repeat(`
`,v+1)):v===0?o&&(e.result+=" "):e.result+=Ir.repeat(`
`,v):e.result+=Ir.repeat(`
`,o?1+v:v),o=!0,f=!0,v=0,t=e.position;!Ot(G)&&G!==0;)G=e.input.charCodeAt(++e.position);rn(e,t,e.position,!1)}return!0}function Oc(e,r){var t,n=e.tag,i=e.anchor,o=[],f,u=!1,v;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),v=e.input.charCodeAt(e.position);v!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Pe(e,"tab characters must not be used in indentation")),!(v!==45||(f=e.input.charCodeAt(e.position+1),!it(f))));){if(u=!0,e.position++,Rr(e,!0,-1)&&e.lineIndent<=r){o.push(null),v=e.input.charCodeAt(e.position);continue}if(t=e.line,Zn(e,r,yc,!1,!0),o.push(e.result),Rr(e,!0,-1),v=e.input.charCodeAt(e.position),(e.line===t||e.lineIndent>r)&&v!==0)Pe(e,"bad indentation of a sequence entry");else if(e.lineIndent<r)break}return u?(e.tag=n,e.anchor=i,e.kind="sequence",e.result=o,!0):!1}function Hg(e,r,t){var n,i,o,f,u,v,A=e.tag,M=e.anchor,G={},W=Object.create(null),B=null,ge=null,Ee=null,de=!1,Se=!1,J;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=G),J=e.input.charCodeAt(e.position);J!==0;){if(!de&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,Pe(e,"tab characters must not be used in indentation")),n=e.input.charCodeAt(e.position+1),o=e.line,(J===63||J===58)&&it(n))J===63?(de&&(Qn(e,G,W,B,ge,null,f,u,v),B=ge=Ee=null),Se=!0,de=!0,i=!0):de?(de=!1,i=!0):Pe(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,J=n;else{if(f=e.line,u=e.lineStart,v=e.position,!Zn(e,t,_c,!1,!0))break;if(e.line===o){for(J=e.input.charCodeAt(e.position);Tn(J);)J=e.input.charCodeAt(++e.position);if(J===58)J=e.input.charCodeAt(++e.position),it(J)||Pe(e,"a whitespace character is expected after the key-value separator within a block mapping"),de&&(Qn(e,G,W,B,ge,null,f,u,v),B=ge=Ee=null),Se=!0,de=!1,i=!1,B=e.tag,ge=e.result;else if(Se)Pe(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=A,e.anchor=M,!0}else if(Se)Pe(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=A,e.anchor=M,!0}if((e.line===o||e.lineIndent>r)&&(de&&(f=e.line,u=e.lineStart,v=e.position),Zn(e,r,ro,!0,i)&&(de?ge=e.result:Ee=e.result),de||(Qn(e,G,W,B,ge,Ee,f,u,v),B=ge=Ee=null),Rr(e,!0,-1),J=e.input.charCodeAt(e.position)),(e.line===o||e.lineIndent>r)&&J!==0)Pe(e,"bad indentation of a mapping entry");else if(e.lineIndent<r)break}return de&&Qn(e,G,W,B,ge,null,f,u,v),Se&&(e.tag=A,e.anchor=M,e.kind="mapping",e.result=G),Se}function zg(e){var r,t=!1,n=!1,i,o,f;if(f=e.input.charCodeAt(e.position),f!==33)return!1;if(e.tag!==null&&Pe(e,"duplication of a tag property"),f=e.input.charCodeAt(++e.position),f===60?(t=!0,f=e.input.charCodeAt(++e.position)):f===33?(n=!0,i="!!",f=e.input.charCodeAt(++e.position)):i="!",r=e.position,t){do f=e.input.charCodeAt(++e.position);while(f!==0&&f!==62);e.position<e.length?(o=e.input.slice(r,e.position),f=e.input.charCodeAt(++e.position)):Pe(e,"unexpected end of the stream within a verbatim tag")}else{for(;f!==0&&!it(f);)f===33&&(n?Pe(e,"tag suffix cannot contain exclamation marks"):(i=e.input.slice(r-1,e.position+1),xc.test(i)||Pe(e,"named tag handle cannot contain such characters"),n=!0,r=e.position+1)),f=e.input.charCodeAt(++e.position);o=e.input.slice(r,e.position),Rg.test(o)&&Pe(e,"tag suffix cannot contain flow indicator characters")}o&&!Ac.test(o)&&Pe(e,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{Pe(e,"tag name is malformed: "+o)}return t?e.tag=o:en.call(e.tagMap,i)?e.tag=e.tagMap[i]+o:i==="!"?e.tag="!"+o:i==="!!"?e.tag="tag:yaml.org,2002:"+o:Pe(e,'undeclared tag handle "'+i+'"'),!0}function jg(e){var r,t;if(t=e.input.charCodeAt(e.position),t!==38)return!1;for(e.anchor!==null&&Pe(e,"duplication of an anchor property"),t=e.input.charCodeAt(++e.position),r=e.position;t!==0&&!it(t)&&!qn(t);)t=e.input.charCodeAt(++e.position);return e.position===r&&Pe(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(r,e.position),!0}function Yg(e){var r,t,n;if(n=e.input.charCodeAt(e.position),n!==42)return!1;for(n=e.input.charCodeAt(++e.position),r=e.position;n!==0&&!it(n)&&!qn(n);)n=e.input.charCodeAt(++e.position);return e.position===r&&Pe(e,"name of an alias node must contain at least one character"),t=e.input.slice(r,e.position),en.call(e.anchorMap,t)||Pe(e,'unidentified alias "'+t+'"'),e.result=e.anchorMap[t],Rr(e,!0,-1),!0}function Zn(e,r,t,n,i){var o,f,u,v=1,A=!1,M=!1,G,W,B,ge,Ee,de;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,o=f=u=ro===t||yc===t,n&&Rr(e,!0,-1)&&(A=!0,e.lineIndent>r?v=1:e.lineIndent===r?v=0:e.lineIndent<r&&(v=-1)),v===1)for(;zg(e)||jg(e);)Rr(e,!0,-1)?(A=!0,u=o,e.lineIndent>r?v=1:e.lineIndent===r?v=0:e.lineIndent<r&&(v=-1)):u=!1;if(u&&(u=A||i),(v===1||ro===t)&&(eo===t||_c===t?Ee=r:Ee=r+1,de=e.position-e.lineStart,v===1?u&&(Oc(e,de)||Hg(e,de,Ee))||Ug(e,Ee)?M=!0:(f&&$g(e,Ee)||Bg(e,Ee)||Pg(e,Ee)?M=!0:Yg(e)?(M=!0,(e.tag!==null||e.anchor!==null)&&Pe(e,"alias node should not have any properties")):Gg(e,Ee,eo===t)&&(M=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):v===0&&(M=u&&Oc(e,de))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&Pe(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),G=0,W=e.implicitTypes.length;G<W;G+=1)if(ge=e.implicitTypes[G],ge.resolve(e.result)){e.result=ge.construct(e.result),e.tag=ge.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(en.call(e.typeMap[e.kind||"fallback"],e.tag))ge=e.typeMap[e.kind||"fallback"][e.tag];else for(ge=null,B=e.typeMap.multi[e.kind||"fallback"],G=0,W=B.length;G<W;G+=1)if(e.tag.slice(0,B[G].tag.length)===B[G].tag){ge=B[G];break}ge||Pe(e,"unknown tag !<"+e.tag+">"),e.result!==null&&ge.kind!==e.kind&&Pe(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+ge.kind+'", not "'+e.kind+'"'),ge.resolve(e.result,e.tag)?(e.result=ge.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):Pe(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||M}function Vg(e){var r=e.position,t,n,i,o=!1,f;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(f=e.input.charCodeAt(e.position))!==0&&(Rr(e,!0,-1),f=e.input.charCodeAt(e.position),!(e.lineIndent>0||f!==37));){for(o=!0,f=e.input.charCodeAt(++e.position),t=e.position;f!==0&&!it(f);)f=e.input.charCodeAt(++e.position);for(n=e.input.slice(t,e.position),i=[],n.length<1&&Pe(e,"directive name must not be less than one character in length");f!==0;){for(;Tn(f);)f=e.input.charCodeAt(++e.position);if(f===35){do f=e.input.charCodeAt(++e.position);while(f!==0&&!Ot(f));break}if(Ot(f))break;for(t=e.position;f!==0&&!it(f);)f=e.input.charCodeAt(++e.position);i.push(e.input.slice(t,e.position))}f!==0&&Pf(e),en.call(kc,n)?kc[n](e,n,i):to(e,'unknown document directive "'+n+'"')}if(Rr(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Rr(e,!0,-1)):o&&Pe(e,"directives end mark is expected"),Zn(e,e.lineIndent-1,ro,!1,!0),Rr(e,!0,-1),e.checkLineBreaks&&Og.test(e.input.slice(r,e.position))&&to(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&no(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Rr(e,!0,-1));return}if(e.position<e.length-1)Pe(e,"end of the stream or a document separator is expected");else return}function Rc(e,r){e=String(e),r=r||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var t=new Mg(e,r),n=e.indexOf("\0");for(n!==-1&&(t.position=n,Pe(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)Vg(t);return t.documents}function Wg(e,r,t){r!==null&&typeof r=="object"&&typeof t=="undefined"&&(t=r,r=null);var n=Rc(e,t);if(typeof r!="function")return n;for(var i=0,o=n.length;i<o;i+=1)r(n[i])}function Xg(e,r){var t=Rc(e,r);if(t.length!==0){if(t.length===1)return t[0];throw new Qr("expected a single document in the stream, but found more")}}var qg=Wg,Kg=Xg,Dc={loadAll:qg,load:Kg},Fc=Object.prototype.toString,Nc=Object.prototype.hasOwnProperty,$f=65279,Qg=9,Ui=10,Zg=13,Jg=32,e_=33,r_=34,Hf=35,t_=37,n_=38,i_=39,a_=42,Ic=44,o_=45,io=58,f_=61,l_=62,u_=63,s_=64,Mc=91,Gc=93,c_=96,Bc=123,d_=124,Pc=125,Xr={};Xr[0]="\\0";Xr[7]="\\a";Xr[8]="\\b";Xr[9]="\\t";Xr[10]="\\n";Xr[11]="\\v";Xr[12]="\\f";Xr[13]="\\r";Xr[27]="\\e";Xr[34]='\\"';Xr[92]="\\\\";Xr[133]="\\N";Xr[160]="\\_";Xr[8232]="\\L";Xr[8233]="\\P";var h_=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],p_=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function m_(e,r){var t,n,i,o,f,u,v;if(r===null)return{};for(t={},n=Object.keys(r),i=0,o=n.length;i<o;i+=1)f=n[i],u=String(r[f]),f.slice(0,2)==="!!"&&(f="tag:yaml.org,2002:"+f.slice(2)),v=e.compiledTypeMap.fallback[f],v&&Nc.call(v.styleAliases,u)&&(u=v.styleAliases[u]),t[f]=u;return t}function v_(e){var r,t,n;if(r=e.toString(16).toUpperCase(),e<=255)t="x",n=2;else if(e<=65535)t="u",n=4;else if(e<=4294967295)t="U",n=8;else throw new Qr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+Ir.repeat("0",n-r.length)+r}var g_=1,$i=2;function __(e){this.schema=e.schema||Gf,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=Ir.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=m_(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?$i:g_,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Uc(e,r){for(var t=Ir.repeat(" ",r),n=0,i=-1,o="",f,u=e.length;n<u;)i=e.indexOf(`
`,n),i===-1?(f=e.slice(n),n=u):(f=e.slice(n,i+1),n=i+1),f.length&&f!==`
`&&(o+=t),o+=f;return o}function zf(e,r){return`
`+Ir.repeat(" ",e.indent*r)}function y_(e,r){var t,n,i;for(t=0,n=e.implicitTypes.length;t<n;t+=1)if(i=e.implicitTypes[t],i.resolve(r))return!0;return!1}function ao(e){return e===Jg||e===Qg}function Hi(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==$f||65536<=e&&e<=1114111}function $c(e){return Hi(e)&&e!==$f&&e!==Zg&&e!==Ui}function Hc(e,r,t){var n=$c(e),i=n&&!ao(e);return(t?n:n&&e!==Ic&&e!==Mc&&e!==Gc&&e!==Bc&&e!==Pc)&&e!==Hf&&!(r===io&&!i)||$c(r)&&!ao(r)&&e===Hf||r===io&&i}function b_(e){return Hi(e)&&e!==$f&&!ao(e)&&e!==o_&&e!==u_&&e!==io&&e!==Ic&&e!==Mc&&e!==Gc&&e!==Bc&&e!==Pc&&e!==Hf&&e!==n_&&e!==a_&&e!==e_&&e!==d_&&e!==f_&&e!==l_&&e!==i_&&e!==r_&&e!==t_&&e!==s_&&e!==c_}function x_(e){return!ao(e)&&e!==io}function zi(e,r){var t=e.charCodeAt(r),n;return t>=55296&&t<=56319&&r+1<e.length&&(n=e.charCodeAt(r+1),n>=56320&&n<=57343)?(t-55296)*1024+n-56320+65536:t}function zc(e){var r=/^\n* /;return r.test(e)}var jc=1,jf=2,Yc=3,Vc=4,Jn=5;function A_(e,r,t,n,i,o,f,u){var v,A=0,M=null,G=!1,W=!1,B=n!==-1,ge=-1,Ee=b_(zi(e,0))&&x_(zi(e,e.length-1));if(r||f)for(v=0;v<e.length;A>=65536?v+=2:v++){if(A=zi(e,v),!Hi(A))return Jn;Ee=Ee&&Hc(A,M,u),M=A}else{for(v=0;v<e.length;A>=65536?v+=2:v++){if(A=zi(e,v),A===Ui)G=!0,B&&(W=W||v-ge-1>n&&e[ge+1]!==" ",ge=v);else if(!Hi(A))return Jn;Ee=Ee&&Hc(A,M,u),M=A}W=W||B&&v-ge-1>n&&e[ge+1]!==" "}return!G&&!W?Ee&&!f&&!i(e)?jc:o===$i?Jn:jf:t>9&&zc(e)?Jn:f?o===$i?Jn:jf:W?Vc:Yc}function E_(e,r,t,n,i){e.dump=function(){if(r.length===0)return e.quotingType===$i?'""':"''";if(!e.noCompatMode&&(h_.indexOf(r)!==-1||p_.test(r)))return e.quotingType===$i?'"'+r+'"':"'"+r+"'";var o=e.indent*Math.max(1,t),f=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-o),u=n||e.flowLevel>-1&&t>=e.flowLevel;function v(A){return y_(e,A)}switch(A_(r,u,e.indent,f,v,e.quotingType,e.forceQuotes&&!n,i)){case jc:return r;case jf:return"'"+r.replace(/'/g,"''")+"'";case Yc:return"|"+Wc(r,e.indent)+Xc(Uc(r,o));case Vc:return">"+Wc(r,e.indent)+Xc(Uc(T_(r,f),o));case Jn:return'"'+w_(r)+'"';default:throw new Qr("impossible error: invalid scalar style")}}()}function Wc(e,r){var t=zc(e)?String(r):"",n=e[e.length-1]===`
`,i=n&&(e[e.length-2]===`
`||e===`
`),o=i?"+":n?"":"-";return t+o+`
`}function Xc(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function T_(e,r){for(var t=/(\n+)([^\n]*)/g,n=function(){var A=e.indexOf(`
`);return A=A!==-1?A:e.length,t.lastIndex=A,qc(e.slice(0,A),r)}(),i=e[0]===`
`||e[0]===" ",o,f;f=t.exec(e);){var u=f[1],v=f[2];o=v[0]===" ",n+=u+(!i&&!o&&v!==""?`
`:"")+qc(v,r),i=o}return n}function qc(e,r){if(e===""||e[0]===" ")return e;for(var t=/ [^ ]/g,n,i=0,o,f=0,u=0,v="";n=t.exec(e);)u=n.index,u-i>r&&(o=f>i?f:u,v+=`
`+e.slice(i,o),i=o+1),f=u;return v+=`
`,e.length-i>r&&f>i?v+=e.slice(i,f)+`
`+e.slice(f+1):v+=e.slice(i),v.slice(1)}function w_(e){for(var r="",t=0,n,i=0;i<e.length;t>=65536?i+=2:i++)t=zi(e,i),n=Xr[t],!n&&Hi(t)?(r+=e[i],t>=65536&&(r+=e[i+1])):r+=n||v_(t);return r}function S_(e,r,t){var n="",i=e.tag,o,f,u;for(o=0,f=t.length;o<f;o+=1)u=t[o],e.replacer&&(u=e.replacer.call(t,String(o),u)),($t(e,r,u,!1,!1)||typeof u=="undefined"&&$t(e,r,null,!1,!1))&&(n!==""&&(n+=","+(e.condenseFlow?"":" ")),n+=e.dump);e.tag=i,e.dump="["+n+"]"}function Kc(e,r,t,n){var i="",o=e.tag,f,u,v;for(f=0,u=t.length;f<u;f+=1)v=t[f],e.replacer&&(v=e.replacer.call(t,String(f),v)),($t(e,r+1,v,!0,!0,!1,!0)||typeof v=="undefined"&&$t(e,r+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=zf(e,r)),e.dump&&Ui===e.dump.charCodeAt(0)?i+="-":i+="- ",i+=e.dump);e.tag=o,e.dump=i||"[]"}function C_(e,r,t){var n="",i=e.tag,o=Object.keys(t),f,u,v,A,M;for(f=0,u=o.length;f<u;f+=1)M="",n!==""&&(M+=", "),e.condenseFlow&&(M+='"'),v=o[f],A=t[v],e.replacer&&(A=e.replacer.call(t,v,A)),!!$t(e,r,v,!1,!1)&&(e.dump.length>1024&&(M+="? "),M+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),!!$t(e,r,A,!1,!1)&&(M+=e.dump,n+=M));e.tag=i,e.dump="{"+n+"}"}function k_(e,r,t,n){var i="",o=e.tag,f=Object.keys(t),u,v,A,M,G,W;if(e.sortKeys===!0)f.sort();else if(typeof e.sortKeys=="function")f.sort(e.sortKeys);else if(e.sortKeys)throw new Qr("sortKeys must be a boolean or a function");for(u=0,v=f.length;u<v;u+=1)W="",(!n||i!=="")&&(W+=zf(e,r)),A=f[u],M=t[A],e.replacer&&(M=e.replacer.call(t,A,M)),!!$t(e,r+1,A,!0,!0,!0)&&(G=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,G&&(e.dump&&Ui===e.dump.charCodeAt(0)?W+="?":W+="? "),W+=e.dump,G&&(W+=zf(e,r)),!!$t(e,r+1,M,!0,G)&&(e.dump&&Ui===e.dump.charCodeAt(0)?W+=":":W+=": ",W+=e.dump,i+=W));e.tag=o,e.dump=i||"{}"}function Qc(e,r,t){var n,i,o,f,u,v;for(i=t?e.explicitTypes:e.implicitTypes,o=0,f=i.length;o<f;o+=1)if(u=i[o],(u.instanceOf||u.predicate)&&(!u.instanceOf||typeof r=="object"&&r instanceof u.instanceOf)&&(!u.predicate||u.predicate(r))){if(t?u.multi&&u.representName?e.tag=u.representName(r):e.tag=u.tag:e.tag="?",u.represent){if(v=e.styleMap[u.tag]||u.defaultStyle,Fc.call(u.represent)==="[object Function]")n=u.represent(r,v);else if(Nc.call(u.represent,v))n=u.represent[v](r,v);else throw new Qr("!<"+u.tag+'> tag resolver accepts not "'+v+'" style');e.dump=n}return!0}return!1}function $t(e,r,t,n,i,o,f){e.tag=null,e.dump=t,Qc(e,t,!1)||Qc(e,t,!0);var u=Fc.call(e.dump),v=n,A;n&&(n=e.flowLevel<0||e.flowLevel>r);var M=u==="[object Object]"||u==="[object Array]",G,W;if(M&&(G=e.duplicates.indexOf(t),W=G!==-1),(e.tag!==null&&e.tag!=="?"||W||e.indent!==2&&r>0)&&(i=!1),W&&e.usedDuplicates[G])e.dump="*ref_"+G;else{if(M&&W&&!e.usedDuplicates[G]&&(e.usedDuplicates[G]=!0),u==="[object Object]")n&&Object.keys(e.dump).length!==0?(k_(e,r,e.dump,i),W&&(e.dump="&ref_"+G+e.dump)):(C_(e,r,e.dump),W&&(e.dump="&ref_"+G+" "+e.dump));else if(u==="[object Array]")n&&e.dump.length!==0?(e.noArrayIndent&&!f&&r>0?Kc(e,r-1,e.dump,i):Kc(e,r,e.dump,i),W&&(e.dump="&ref_"+G+e.dump)):(S_(e,r,e.dump),W&&(e.dump="&ref_"+G+" "+e.dump));else if(u==="[object String]")e.tag!=="?"&&E_(e,e.dump,r,o,v);else{if(u==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Qr("unacceptable kind of an object to dump "+u)}e.tag!==null&&e.tag!=="?"&&(A=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?A="!"+A:A.slice(0,18)==="tag:yaml.org,2002:"?A="!!"+A.slice(18):A="!<"+A+">",e.dump=A+" "+e.dump)}return!0}function L_(e,r){var t=[],n=[],i,o;for(Yf(e,t,n),i=0,o=n.length;i<o;i+=1)r.duplicates.push(t[n[i]]);r.usedDuplicates=new Array(o)}function Yf(e,r,t){var n,i,o;if(e!==null&&typeof e=="object")if(i=r.indexOf(e),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(r.push(e),Array.isArray(e))for(i=0,o=e.length;i<o;i+=1)Yf(e[i],r,t);else for(n=Object.keys(e),i=0,o=n.length;i<o;i+=1)Yf(e[n[i]],r,t)}function O_(e,r){r=r||{};var t=new __(r);t.noRefs||L_(e,t);var n=e;return t.replacer&&(n=t.replacer.call({"":n},"",n)),$t(t,0,n,!0,!0)?t.dump+`
`:""}var R_=O_,D_={dump:R_};function Vf(e,r){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+r+" instead, which is now safe by default.")}}var F_=jr,N_=Js,I_=nc,M_=lc,G_=uc,B_=Gf,P_=Dc.load,U_=Dc.loadAll,$_=D_.dump,H_=Qr,z_={binary:pc,float:fc,map:tc,null:ic,pairs:vc,set:gc,timestamp:dc,bool:ac,int:oc,merge:hc,omap:mc,seq:rc,str:ec},j_=Vf("safeLoad","load"),Y_=Vf("safeLoadAll","loadAll"),V_=Vf("safeDump","dump"),My={Type:F_,Schema:N_,FAILSAFE_SCHEMA:I_,JSON_SCHEMA:M_,CORE_SCHEMA:G_,DEFAULT_SCHEMA:B_,load:P_,loadAll:U_,dump:$_,YAMLException:H_,types:z_,safeLoad:j_,safeLoadAll:Y_,safeDump:V_};export{Dy as $,wy as A,sm as B,Fp as C,dm as D,yy as E,Xp as F,ay as G,Yp as H,Zt as I,Wu as J,J_ as K,_y as L,X_ as M,q_ as N,dy as O,Q_ as P,Z_ as Q,K_ as R,Ly as S,Oy as T,Fy as U,za as V,Ey as W,cy as X,vy as Y,Ry as Z,es as _,Kp as a,W_ as a0,ty as a1,Yn as a2,$0 as a3,H0 as a4,hy as a5,ny as a6,uy as a7,Ny as a8,Qe as a9,Iy as aa,My as ab,Zu as ac,fy as ad,qp as b,iy as c,xi as d,Ba as e,sy as f,Wp as g,Qp as h,ky as i,ly as j,ey as k,ry as l,oy as m,by as n,Ay as o,xy as p,fm as q,gy as r,Np as s,uf as t,my as u,py as v,Sy as w,Cy as x,um as y,Ty as z};
